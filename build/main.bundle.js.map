{"version":3,"sources":["webpack:///webpack/bootstrap bd1f2d6f4bda9679e139","webpack:///./js/main.js","webpack:///./js/file-loader.js","webpack:///./js/number-recogniser.js","webpack:///./js/song-player.js","webpack:///./js/kali.min.js","webpack:///./js/buffer-loader.js"],"names":["checkCompatibility","init","songUrlInput","document","getElementById","beatsPerMinuteInput","beatsPerBarInput","playbackRateInput","startBarkeepButton","loadingSampleProgressBar","jumpToBarNumberInput","jumpToBarButton","recognisedNumberDisplayElement","onclick","songPlayer","fileLoader","playbackRate","Number","parseInt","value","loadByUrl","then","loadBuffer","fileData","console","log","p","buffer","play","e","onNumberRecognised","n","innerHTML","numberRecogniser","startListening","FileLoader","url","Promise","resolve","reject","request","XMLHttpRequest","open","responseType","onload","response","onerror","status","statusText","send","NumberRecogniser","recognition","window","SpeechRecognition","webkitSpeechRecognition","lang","interimResults","maxAlternatives","start","onaudioend","onresult","results","ev","i","length","candidateNumber","transcript","isNaN","isFinite","alert","isLocalhost","location","host","startsWith","isChrome","test","navigator","userAgent","vendor","protocol","SongPlayer","bufferRate","bpm","beatsPerBar","secondsPerBar","context","AudioContext","webkitAudioContext","barNumber","stop","source","createBufferSource","connect","destination","startTime","getStartTimeInSeconds","currentSource","startTimeInSeconds","Math","max","t","r","exports","id","loaded","call","m","c","floor","s","is_initialized","sample_rate","channels","quick_search","factor","search","segment","overlap","process_size","samples_in","samples_out","segments_total","skip_total","o","input_fifo","Float32Array","output_fifo","prototype","difference","pow","tempo_best_overlap_position","overlap_buf","a","u","subarray","f","tempo_overlap","process","occupancy","read_ptr","write_ptr","write","set","read","input","output","min","flush","setup","segments_ms","segments_pow","searches_div","overlaps_div","h","l","ceil","reserve","setTempo","Kali","begin","end","typedArrayConstructor","clear","error","BufferLoader","progressCallback","undefined","decodeAudioData","stretchedBuffer","_stretch","numChannels","bestQuality","stretchSampleSize","inputBufferSize","getChannelData","outputBufferSize","outputAudioBuffer","createBuffer","sampleRate","channel","inputData","kali","outputData","inputOffset","completedOffset","loopCount","flushed","dataToInput"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bd1f2d6f4bda9679e139","import BufferLoader from './buffer-loader'\r\nimport FileLoader from './file-loader'\r\nimport NumberRecogniser from './number-recogniser'\r\nimport SongPlayer from './song-player'\r\n\r\nif (NumberRecogniser.checkCompatibility()) {\r\n    init();\r\n}\r\n\r\nfunction init() {\r\n    let songUrlInput = document.getElementById('songUrl');\r\n    let beatsPerMinuteInput = document.getElementById('beatsPerMinute');\r\n    let beatsPerBarInput = document.getElementById('beatsPerBar');\r\n    let playbackRateInput = document.getElementById('playbackRate');\r\n    let startBarkeepButton = document.getElementById('startBarkeep');\r\n    let loadingSampleProgressBar = document.getElementById('loadingSampleProgressBar');\r\n    let jumpToBarNumberInput = document.getElementById('jumpToBarNumber');\r\n    let jumpToBarButton = document.getElementById('jumpToBarButton');\r\n    let recognisedNumberDisplayElement = document.getElementById('recognisedNumberDisplay');\r\n\r\n    startBarkeepButton.onclick = () => {\r\n        let songPlayer;\r\n        let fileLoader = new FileLoader();\r\n        let playbackRate = Number.parseInt(playbackRateInput.value) / 100;\r\n        fileLoader.loadByUrl(songUrlInput.value)\r\n            .then(fileData => {\r\n                return BufferLoader.loadBuffer(fileData, playbackRate, p => { console.log(p); });\r\n            })\r\n            .then(buffer => {\r\n                songPlayer = new SongPlayer(buffer, playbackRate, beatsPerMinuteInput.value, beatsPerBarInput.value);\r\n                songPlayer.play();\r\n            });\r\n\r\n        jumpToBarButton.onclick = (e) => {\r\n            songPlayer.play(Number.parseInt(jumpToBarNumberInput.value));\r\n        };\r\n        let onNumberRecognised = (n) => {\r\n            recognisedNumberDisplayElement.innerHTML = n;\r\n            recognisedNumberDisplayElement.innerHTML = n;\r\n            recognisedNumberDisplayElement.innerHTML = n;\r\n            songPlayer.play(n);\r\n        }\r\n        let numberRecogniser = new NumberRecogniser(onNumberRecognised);\r\n        numberRecogniser.startListening();\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/main.js","export default class FileLoader {\r\n\r\n    loadByUrl(url) {\r\n        return new Promise(function (resolve, reject) {\r\n            var request = new XMLHttpRequest();\r\n            request.open('GET', url);\r\n            request.responseType = 'arraybuffer';\r\n            request.onload = () => {\r\n                resolve(request.response);\r\n            };\r\n            request.onerror = () => {\r\n                reject({\r\n                    status: this.status,\r\n                    statusText: request.statusText\r\n                });\r\n            };\r\n            request.send();\r\n        });\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/file-loader.js","export default class NumberRecogniser {\r\n\r\n    constructor(onNumberRecognised) {\r\n        this.onNumberRecognised = onNumberRecognised;\r\n    }\r\n\r\n    static checkCompatibility() {\r\n        if (!(window.SpeechRecognition || window.webkitSpeechRecognition)) {\r\n            alert('SpeechRecognition is not supported. Please use a compatible browser, eg Chrome.');\r\n            return false;\r\n        }\r\n        var isLocalhost = location.host.startsWith('localhost');\r\n        if (isLocalhost) {\r\n            return true;\r\n        }\r\n        var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\r\n        if (isChrome && location.protocol !== 'https:') {\r\n            alert('Chrome requires https for SpeechRecognition. Redirecting now!');\r\n            location.protocol = 'https:';\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    startListening() {\r\n        var recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();\r\n        // recognition.continuous = true;\r\n        // TODO: other languages?\r\n        recognition.lang = 'en-US';\r\n        recognition.interimResults = false;\r\n        recognition.maxAlternatives = 5;\r\n        recognition.start();\r\n\r\n        recognition.onaudioend = ev => {\r\n            // start listening again after audio ends\r\n            this.startListening();\r\n        };\r\n\r\n        recognition.onresult = ev => {\r\n            var results = ev.results[0];\r\n            for (var i = 0; i < results.length; i++) {\r\n                var candidateNumber = Number.parseInt(results[i].transcript);\r\n                if (!Number.isNaN(candidateNumber) && Number.isFinite(candidateNumber)) {\r\n                    this.onNumberRecognised(candidateNumber);\r\n                    // keep listening for more\r\n                    this.startListening();\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n    };\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/number-recogniser.js","export default class SongPlayer {\r\n\r\n    constructor(buffer, bufferRate, bpm, beatsPerBar) {\r\n        this.buffer = buffer;\r\n        this.bpm = bpm;\r\n        this.beatsPerBar = beatsPerBar;\r\n        this.secondsPerBar = this.beatsPerBar * 60 / (bufferRate * bpm);\r\n        this.context = new (window.AudioContext || window.webkitAudioContext)();        \r\n    }\r\n\r\n    play(barNumber) {\r\n        this.stop();\r\n        let source = this.context.createBufferSource();\r\n        source.buffer = this.buffer;\r\n        source.connect(this.context.destination);\r\n        let startTime = this.getStartTimeInSeconds(barNumber || 0);\r\n        source.start(0, startTime);\r\n        this.currentSource = source;\r\n    }\r\n\r\n    stop() {\r\n        if (this.currentSource) {\r\n            this.currentSource.stop();\r\n        }\r\n    }\r\n\r\n    getStartTimeInSeconds(barNumber) {\r\n        let startTimeInSeconds = ((barNumber - 1) * this.secondsPerBar);\r\n        return Math.max(0, startTimeInSeconds);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/song-player.js","!function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p=\"\",t(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){function i(e){return Math.floor(e)}var n=r(2),s=function(){function e(){this.is_initialized=!1,this.sample_rate=44100,this.channels=0,this.quick_search=!1,this.factor=0,this.search=0,this.segment=0,this.overlap=0,this.process_size=0,this.samples_in=0,this.samples_out=0,this.segments_total=0,this.skip_total=0}return e}(),o=function(){function e(e){var t=new s;t.channels=e,t.input_fifo=new n(Float32Array),t.output_fifo=new n(Float32Array),this.t=t}return e.prototype.difference=function(e,t,r){for(var i=0,n=0,n=0;r>n;n++)i+=Math.pow(e[n]-t[n],2);return i},e.prototype.tempo_best_overlap_position=function(e,t){var r,i,n,s=e.overlap_buf,o=e.search+1>>>1,a=64,p=i=e.quick_search?o:0,u=this.difference(t.subarray(e.channels*p),s,e.channels*e.overlap),f=0;if(e.quick_search){do{for(f=-1;1>=f;f+=2)for(r=1;(4>r||64==a)&&(p=o+f*r*a,!(0>p||p>=e.search));r++)n=this.difference(t.subarray(e.channels*p),s,e.channels*e.overlap),u>n&&(u=n,i=p);o=i}while(a>>>=2)}else for(p=1;p<e.search;p++)n=this.difference(t.subarray(e.channels*p),s,e.channels*e.overlap),u>n&&(u=n,i=p);return i},e.prototype.tempo_overlap=function(e,t,r,i){var n=0,s=0,o=0,a=1/e.overlap;for(n=0;n<e.overlap;n++){var p=a*n,u=1-p;for(s=0;s<e.channels;s++,o++)i[o]=t[o]*u+r[o]*p}},e.prototype.process=function(){for(var e=this.t;e.input_fifo.occupancy()>=e.process_size;){var t,r;e.segments_total?(r=this.tempo_best_overlap_position(e,e.input_fifo.read_ptr(0)),this.tempo_overlap(e,e.overlap_buf,e.input_fifo.read_ptr(e.channels*r),e.output_fifo.write_ptr(e.overlap))):(r=e.search/2,e.output_fifo.write(e.input_fifo.read_ptr(e.channels*r,e.overlap),e.overlap)),e.output_fifo.write(e.input_fifo.read_ptr(e.channels*(r+e.overlap)),e.segment-2*e.overlap);var n=e.channels*e.overlap;e.overlap_buf.set(e.input_fifo.read_ptr(e.channels*(r+e.segment-e.overlap)).subarray(0,n)),e.segments_total++,t=i(e.factor*(e.segment-e.overlap)+.5),e.input_fifo.read(null,t)}},e.prototype.input=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=0),null==t&&(t=e.length);var i=this.t;i.samples_in+=t,i.input_fifo.write(e,t)},e.prototype.output=function(e){var t=this.t,r=Math.min(e.length,t.output_fifo.occupancy());return t.samples_out+=r,t.output_fifo.read(e,r),r},e.prototype.flush=function(){var e=this.t,t=i(e.samples_in/e.factor+.5),r=t>e.samples_out?t-e.samples_out:0,n=new Float32Array(128*e.channels);if(r>0){for(;e.output_fifo.occupancy()<r;)this.input(n,128),this.process();e.samples_in=0}},e.prototype.setup=function(t,r,n,s,o,a){void 0===n&&(n=!1),void 0===s&&(s=null),void 0===o&&(o=null),void 0===a&&(a=null);var p=1,u=this.t;u.sample_rate=t,null==s&&(s=Math.max(10,e.segments_ms[p]/Math.max(Math.pow(r,e.segments_pow[p]),1))),null==o&&(o=s/e.searches_div[p]),null==a&&(a=s/e.overlaps_div[p]);var f;if(u.quick_search=n,u.factor=r,u.segment=i(t*s/1e3+.5),u.search=i(t*o/1e3+.5),u.overlap=Math.max(i(t*a/1e3+4.5),16),2*u.overlap>u.segment&&(u.overlap-=8),u.is_initialized){var h=new Float32Array(u.overlap*u.channels),l=0;u.overlap*u.channels<u.overlap_buf.length&&(l=u.overlap_buf.length-u.overlap*u.channels),h.set(u.overlap_buf.subarray(l,u.overlap_buf.length)),u.overlap_buf=h}else u.overlap_buf=new Float32Array(u.overlap*u.channels);f=i(Math.ceil(r*(u.segment-u.overlap))),u.process_size=Math.max(f+u.overlap,u.segment)+u.search,u.is_initialized||u.input_fifo.reserve(i(u.search/2)),u.is_initialized=!0},e.prototype.setTempo=function(e){var t=this.t;this.setup(t.sample_rate,e,t.quick_search)},e.segments_ms=[82,82,35,20],e.segments_pow=[0,1,.33,1],e.overlaps_div=[6.833,7,2.5,2],e.searches_div=[5.587,6,2.14,2],e}();window&&(window.Kali=o),e.exports=o},function(e,t){var r=function(){function e(e){this.begin=0,this.end=0,this.typedArrayConstructor=e,this.buffer=new e(16384)}return e.prototype.clear=function(){this.begin=this.end=0},e.prototype.reserve=function(e){for(this.begin==this.end&&this.clear();;){if(this.end+e<this.buffer.length){var t=this.end;return this.end+=e,t}if(this.begin>16384)this.buffer.set(this.buffer.subarray(this.begin,this.end)),this.end-=this.begin,this.begin=0;else{var r=new this.typedArrayConstructor(this.buffer.length+e);r.set(this.buffer),this.buffer=r}}},e.prototype.write=function(e,t){var r=this.reserve(t);this.buffer.set(e.subarray(0,t),r)},e.prototype.write_ptr=function(e){var t=this.reserve(e);return this.buffer.subarray(t,t+e)},e.prototype.read=function(e,t){t+this.begin>this.end&&console.error(\"Read out of bounds\",t,this.end,this.begin),null!=e&&e.set(this.buffer.subarray(this.begin,this.begin+t)),this.begin+=t},e.prototype.read_ptr=function(e,t){return void 0===t&&(t=-1),t>this.occupancy()&&console.error(\"Read Pointer out of bounds\",t),0>t&&(t=this.occupancy()),this.buffer.subarray(this.begin+e,this.begin+t)},e.prototype.occupancy=function(){return this.end-this.begin},e}();e.exports=r}]);\n\n\n// WEBPACK FOOTER //\n// ./js/kali.min.js","import './kali.min.js'\r\n\r\nexport default class BufferLoader {\r\n\r\n    static loadBuffer(fileData, playbackRate = 1.0, progressCallback = undefined) {\r\n        return new Promise((resolve, reject) => {\r\n            let context = new (window.AudioContext || window.webkitAudioContext)();\r\n\r\n            context.decodeAudioData(fileData, (buffer) => {\r\n                let stretchedBuffer = BufferLoader._stretch(context, buffer, playbackRate, 2, false, progressCallback);\r\n                resolve(stretchedBuffer);\r\n            }, (e) => {\r\n                console.error(e);\r\n                reject();\r\n            });\r\n        });\r\n    }\r\n\r\n    static _stretch(context, buffer, playbackRate, numChannels, bestQuality, progressCallback) {\r\n\r\n        if (playbackRate === 1.0) {\r\n            return buffer;\r\n        }\r\n\r\n        let stretchSampleSize = 4096 * numChannels;\r\n\r\n        let inputBufferSize = buffer.getChannelData(0).length;\r\n        let outputBufferSize = Math.floor(inputBufferSize / playbackRate) + 1;\r\n\r\n        let outputAudioBuffer = context.createBuffer(numChannels, outputBufferSize, context.sampleRate);\r\n\r\n        for (let channel = 0; channel < numChannels; channel++) {\r\n            let inputData = buffer.getChannelData(channel);\r\n\r\n            let kali = new Kali(1);\r\n            kali.setup(context.sampleRate, playbackRate, !bestQuality);\r\n\r\n            let outputData = new Float32Array(outputBufferSize);\r\n\r\n            let inputOffset = 0;\r\n            let completedOffset = 0;\r\n            let loopCount = 0;\r\n            let flushed = false;\r\n\r\n            while (completedOffset < outputData.length) {\r\n                if (progressCallback && loopCount % 100 === 0) {\r\n                    progressCallback((completedOffset + outputBufferSize * channel) / (outputBufferSize * numChannels));\r\n                }\r\n\r\n                // Read stretched samples into outputData array\r\n                completedOffset += kali.output(outputData.subarray(completedOffset, Math.min(completedOffset + stretchSampleSize, outputData.length)));\r\n\r\n                if (inputOffset < inputData.length) {\r\n                    // If we have more data to write, write it\r\n                    let dataToInput = inputData.subarray(inputOffset, Math.min(inputOffset + stretchSampleSize, inputData.length));\r\n                    inputOffset += dataToInput.length;\r\n\r\n                    kali.input(dataToInput);\r\n                    kali.process();\r\n                } else if (!flushed) {\r\n                    kali.flush();\r\n                    flushed = true;\r\n                }\r\n\r\n                loopCount++;\r\n            }\r\n\r\n            outputAudioBuffer.getChannelData(channel).set(outputData);\r\n        }\r\n\r\n        if (progressCallback) {\r\n            // 100%\r\n            progressCallback(1);\r\n        }\r\n        return outputAudioBuffer;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/buffer-loader.js"],"sourceRoot":""}