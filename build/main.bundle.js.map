{"version":3,"sources":["webpack:///webpack/bootstrap 6e96ca568f92004aa9a2","webpack:///./js/beeper.js","webpack:///./js/song-info.js","webpack:///./js/voice-handlers/command-parser.js","webpack:///./js/main.js","webpack:///./js/note-converter.js","webpack:///./js/file-helpers.js","webpack:///./js/ui/logger.js","webpack:///./js/playlist-manager.js","webpack:///./js/buffer-manager.js","webpack:///./vendor/kali.min.js","webpack:///./js/song-player.js","webpack:///./js/song-file.js","webpack:///./js/song-library.js","webpack:///./js/ui/tab-controller.js","webpack:///./js/ui/toast-controller.js","webpack:///./js/voice-handlers/command-handler.js","webpack:///./js/voice-handlers/wake-word-handler.js","webpack:///./js/voice-command-listener.js","webpack:///./vendor/jtmpl-1.1.0.min.js"],"names":["Beeper","context","options","defaults","startSecondsFromNow","durationSeconds","note","Object","assign","gainNode","createGain","gain","setValueAtTime","currentTime","connect","destination","oscillator","createOscillator","frequency","getFrequencyFromNote","startWhen","start","stop","beep","startFrequency","endFrequency","setTargetAtTime","SongInfo","bpm","beatsPerBar","playbackSpeed","song","playbackSpeedPercent","CommandParser","init","synonyms","Map","commands","Array","key","addSynonyms","command","addCommand","set","s","allSynonyms","concat","map","synonymsPattern","join","keyRegexp","RegExp","replace","action","commandWithSynonymsExpanded","_expandSynonyms","push","regexp","_getRegExp","types","_getTypes","statement","results","exec","args","i","length","type","value","_getValueForType","e","console","log","pattern","indexedTypes","indexType","index","res","substring","entries","sort","a","b","valueAsNumber","Number","parseInt","isNaN","isFinite","checkCompatibility","setElementClass","el","klass","isSet","classList","add","remove","enableMicButton","document","getElementById","loadDemoSongButton","filesInput","filesDropArea","noSongsContainer","someSongsContainer","sampleVoiceCommandSongName","getElementsByClassName","jumpToBarNumberInput","jumpToBarButton","fromBarNumberInput","toBarNumberInput","loopBarsButton","importSongLibraryInput","exportSongLibraryButton","loggerOutput","tabController","openTab","toastController","window","AudioContext","webkitAudioContext","songLibrary","playlistManager","jtmplModel","playlist","jtmpl","jtmplSongs","on","prop","updateSongInfos","anySongsLoaded","addLoadedSong","songFile","info","getSongInfoByName","fileName","songModel","name","escapedName","addSong","fileData","trigger","from","forEach","innerText","loadFileByUrl","url","loadByUrl","then","file","split","contents","onclick","loadFiles","files","f","readArrayBufferFromFile","onchange","evt","target","ondragover","dataTransfer","dropEffect","ondragleave","ondrop","barkeep_play","songInfo","songName","playSong","alert","barNumber","show","jumpToBar","loopBars","beeper","wakeWordHandler","onWakeWord","activated","respond","setVolume","commandHandler","onBarCommand","onLoopBarCommand","onLoopBarsCommand","fromBarNumber","toBarNumber","onPlayCommand","input","getSongNameFromInput","onStopCommand","logger","voiceCommandListener","startListening","onStopListeningCommand","stopListening","onNothingCommand","readTextFromFile","import","json","export","downloadFile","NoteConverter","Math","pow","round","FileHelpers","Promise","resolve","reject","request","XMLHttpRequest","open","responseType","onload","urlParts","fileNamePart","response","onerror","status","statusText","send","reader","FileReader","result","readAsArrayBuffer","readAsText","link","createElement","download","href","URL","createObjectURL","Blob","click","Logger","outputElement","level","message","prepend","PlaylistManager","bufferManager","loadBuffer","noteNumber","buffer","getBuffer","p","currentSongPlayer","play","doubleBeep","volume","BufferManager","bufferMap","decodeAudioData","error","progressIntervalCount","progressCallback","undefined","bufferKey","has","get","originalBuffer","_stretch","numChannels","bestQuality","stretchSampleSize","inputBufferSize","getChannelData","outputBufferSize","floor","outputAudioBuffer","createBuffer","sampleRate","progressCounter","progressIntervalSize","channel","inputData","kali","Kali","setup","outputData","Float32Array","inputOffset","completedOffset","flushed","framesCompleted","output","subarray","min","dataToInput","process","flush","t","r","exports","n","id","loaded","call","m","c","is_initialized","sample_rate","channels","quick_search","factor","search","segment","overlap","process_size","samples_in","samples_out","segments_total","skip_total","o","input_fifo","output_fifo","prototype","difference","tempo_best_overlap_position","overlap_buf","u","tempo_overlap","occupancy","read_ptr","write_ptr","write","read","max","segments_ms","segments_pow","searches_div","overlaps_div","h","l","ceil","reserve","setTempo","begin","end","typedArrayConstructor","clear","SongPlayer","bufferRate","secondsPerBar","source","createBufferSource","startTime","getStartTimeInSeconds","currentSource","loop","loopStart","loopEnd","startTimeInSeconds","SongFile","SongLibrary","songInfos","retrieveFromStorage","trim","toLowerCase","keys","indexOf","songs","fromObject","persistToStorage","JSON","stringify","localStorage","setItem","jsonFromStorage","getItem","parse","songsToImport","TabController","tabLinks","tabPanes","tabLink","_getTargetTabId","targetTabId","toggleActive","tabId","tabContents","getAttribute","ToastController","toastElement","body","appendChild","durationMilliseconds","innerHTML","setTimeout","CommandHandler","commandParser","barSynonym","loopSynonym","barSynonym1","barSynonym2","WakeWordHandler","VoiceCommandListener","SpeechRecognition","webkitSpeechRecognition","isLocalhost","location","host","startsWith","isChrome","test","navigator","userAgent","vendor","protocol","stopped","active","wakeWordActive","wakeWordActivatedAt","Date","recognition","lang","interimResults","maxAlternatives","onaudioend","onresult","speechResults","ev","speechResult","handle","transcript","setWakeWordActive","commandResult","currentSpeechRecognition","module","global","self","define","require","Error","d","getOwnPropertyNames","hasOwnProperty","arguments","N","splice","C","isArray","len","x","S","O","parent","_dependentProps","_dependentContexts","j","root","g","v","y","_","apply","values","off","toJSON","fromJSON","pop","reverse","shift","unshift","change","update","insert","match","rule","_get","addEventListener","nodeName","selects","parentNode","selectsUpdating","selectOptions","selected","selectOptionsContexts","radioGroupsUpdating","radioGroups","checked","setAttribute","removeAttribute","utemplate","_dereq_","createTextNode","data","createDocumentFragment","removeChild","previousSibling","childNodes","insertBefore","createComment","loader","node","block","fragment","model","template","anchor","anchorIndex","pos","chunkSize","size","arr","eval","count","del","val","render","func","child","childModel","__jtmpl__","nodeType","cloneNode","toString","attributes","slice","querySelector","RE_NODE_ID","replaceChild","compile","querySelectorAll","RE_ENDS_WITH_NODE_ID","plugins","freak","src","mixin","lastIndexOf","applyPlugins","plugin","evalObject","loadModel","DOMParser","parseFromString","loadTemplate","style","display","contentDocument","writeln","routes","matches","Element","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","reduce","encodeURIComponent","responseText","onreadystatechange","readyState","async","user","password"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;AC7DA;;;;;;;;IAEqBA,M;AAEjB,oBAAYC,OAAZ,EAAqB;AAAA;;AACjB,aAAKA,OAAL,GAAeA,OAAf;AACH;;;;+BAEkB;AAAA,gBAAdC,OAAc,uEAAJ,EAAI;;AACf,gBAAMC,WAAW;AACbC,qCAAqB,CADR;AAEbC,iCAAiB,EAFJ;AAGbC,sBAAM;AAHO,aAAjB;AAKAJ,sBAAUK,OAAOC,MAAP,CAAc,EAAd,EAAkBL,QAAlB,EAA4BD,OAA5B,CAAV;;AAEA,gBAAMO,WAAW,KAAKR,OAAL,CAAaS,UAAb,EAAjB;AACAD,qBAASE,IAAT,CAAcC,cAAd,CAA6B,EAA7B,EAAiC,KAAKX,OAAL,CAAaY,WAA9C;AACAJ,qBAASK,OAAT,CAAiB,KAAKb,OAAL,CAAac,WAA9B;;AAEA,gBAAMC,aAAa,KAAKf,OAAL,CAAagB,gBAAb,EAAnB;AACA,gBAAMC,YAAY,wBAAcC,oBAAd,CAAmCjB,QAAQI,IAA3C,CAAlB;AACAU,uBAAWE,SAAX,CAAqBN,cAArB,CAAoCM,SAApC,EAA+C,KAAKjB,OAAL,CAAaY,WAA5D;AACAG,uBAAWF,OAAX,CAAmBL,QAAnB;;AAEA,gBAAMW,YAAYlB,QAAQE,mBAAR,GAA8B,KAAKH,OAAL,CAAaY,WAA7D;AACAG,uBAAWK,KAAX,CAAiBD,SAAjB;AACAJ,uBAAWM,IAAX,CAAgBF,YAAYlB,QAAQG,eAApC;AACH;;;qCAEY;AACT,iBAAKkB,IAAL,CAAU,EAAEnB,qBAAqB,CAAvB,EAA0BC,iBAAiB,GAA3C,EAAV;AACA,iBAAKkB,IAAL,CAAU,EAAEnB,qBAAqB,EAAvB,EAA2BC,iBAAiB,GAA5C,EAAV;AACH;;;kCAES;AACN,gBAAMmB,iBAAiB,wBAAcL,oBAAd,CAAmC,GAAnC,CAAvB;AACA,gBAAMM,eAAe,wBAAcN,oBAAd,CAAmC,GAAnC,CAArB;AACA,gBAAMd,kBAAkB,EAAxB;;AAEA,gBAAMI,WAAW,KAAKR,OAAL,CAAaS,UAAb,EAAjB;AACAD,qBAASE,IAAT,CAAcC,cAAd,CAA6B,EAA7B,EAAiC,KAAKX,OAAL,CAAaY,WAA9C;AACAJ,qBAASK,OAAT,CAAiB,KAAKb,OAAL,CAAac,WAA9B;;AAEA,gBAAMC,aAAa,KAAKf,OAAL,CAAagB,gBAAb,EAAnB;AACAD,uBAAWF,OAAX,CAAmBL,QAAnB;;AAEAO,uBAAWE,SAAX,CAAqBN,cAArB,CAAoCY,cAApC,EAAoD,KAAKvB,OAAL,CAAaY,WAAjE;AACAG,uBAAWE,SAAX,CAAqBQ,eAArB,CAAqCD,YAArC,EAAmD,KAAKxB,OAAL,CAAaY,WAAhE,EAA6ER,eAA7E;AACAW,uBAAWK,KAAX;AACAL,uBAAWM,IAAX,CAAgB,KAAKrB,OAAL,CAAaY,WAAb,GAA2BR,eAA3C;AACH;;;;;;kBAjDgBL,M;;;;;;;;;;;;;;;;;ICFA2B,Q;AACjB,sBAAYC,GAAZ,EAAiBC,WAAjB,EAA8BC,aAA9B,EAA6C;AAAA;;AACzC,aAAKF,GAAL,GAAWA,GAAX;AACA,aAAKC,WAAL,GAAmBA,eAAe,CAAlC;AACA,aAAKC,aAAL,GAAqBA,iBAAiB,GAAtC;AACH;;;;mCAEiBC,I,EAAM;AACpB,mBAAO,IAAIJ,QAAJ,CAAaI,KAAKH,GAAlB,EAAuBG,KAAKF,WAA5B,EAAyCE,KAAKC,oBAAL,GAA4B,GAArE,CAAP;AACH;;;;;;kBATgBL,Q;;;;;;;;;;;;;;;;;;;ICAAM,a;AAEjB,2BAAYC,IAAZ,EAAkB;AAAA;;AAEd,aAAKC,QAAL,GAAgB,IAAIC,GAAJ,EAAhB;AACA,aAAKC,QAAL,GAAgB,IAAIC,KAAJ,EAAhB;;AAEA,YAAIJ,IAAJ,EAAU;AACN,iBAAK,IAAMK,GAAX,IAAkBL,KAAKC,QAAvB,EAAiC;AAC7B,qBAAKK,WAAL,CAAiBD,GAAjB,EAAsBL,KAAKC,QAAL,CAAcI,GAAd,CAAtB;AACH;AACD,iBAAK,IAAME,OAAX,IAAsBP,KAAKG,QAA3B,EAAqC;AACjC,qBAAKK,UAAL,CAAgBD,OAAhB,EAAyBP,KAAKG,QAAL,CAAcI,OAAd,CAAzB;AACH;AACJ;AACJ;;;;oCAmDWF,G,EAAKJ,Q,EAAU;AACvB,iBAAKA,QAAL,CAAcQ,GAAd,CAAkBJ,GAAlB,EAAuBJ,QAAvB;AACH;;;wCAEeM,O,EAAS;AAAA;AAAA;AAAA;;AAAA;AACrB,qCAAgB,KAAKN,QAArB,8HAA+B;AAAA,wBAApBS,CAAoB;;AAC3B,wBAAML,MAAMK,EAAE,CAAF,CAAZ;AACA;AACA,wBAAMC,cAAcD,EAAE,CAAF,EAAKE,MAAL,CAAYF,EAAE,CAAF,CAAZ,EAAkBG,GAAlB,CAAsB;AAAA,uCAAWH,CAAX;AAAA,qBAAtB,CAApB;AACA,wBAAMI,kBAAkB,MAAMH,YAAYI,IAAZ,CAAiB,GAAjB,CAAN,GAA8B,GAAtD;AACA;AACA,wBAAMC,YAAY,IAAIC,MAAJ,SAAiBZ,GAAjB,UAA2B,GAA3B,CAAlB;AACAE,8BAAUA,QAAQW,OAAR,CAAgBF,SAAhB,EAA2BF,eAA3B,CAAV;AACH;AAToB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAUrB,mBAAOP,OAAP;AACH;;;mCAEUA,O,EAASY,M,EAAQ;AACxB,gBAAMC,8BAA8B,KAAKC,eAAL,CAAqBd,OAArB,CAApC;AACA,iBAAKJ,QAAL,CAAcmB,IAAd,CAAmB;AACfC,wBAAQxB,cAAcyB,UAAd,CAAyBJ,2BAAzB,CADO;AAEfK,uBAAO1B,cAAc2B,SAAd,CAAwBN,2BAAxB,CAFQ;AAGfD,wBAAQA;AAHO,aAAnB;AAKH;;;8BAEKQ,S,EAAW;AAAA;AAAA;AAAA;;AAAA;AACb,sCAAsB,KAAKxB,QAA3B,mIAAqC;AAAA,wBAA1BI,OAA0B;;AACjC,wBAAMqB,UAAUrB,QAAQgB,MAAR,CAAeM,IAAf,CAAoBF,SAApB,CAAhB;AACA,wBAAIC,OAAJ,EAAa;AACT,4BAAI;AACA,gCAAME,OAAO,EAAb;AACA,iCAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIxB,QAAQkB,KAAR,CAAcO,MAAlC,EAA0CD,GAA1C,EAA+C;AAC3C,oCAAME,OAAO1B,QAAQkB,KAAR,CAAcM,CAAd,CAAb;AACA,oCAAMG,QAAQnC,cAAcoC,gBAAd,CAA+BF,IAA/B,EAAqCL,QAAQG,IAAI,CAAZ,CAArC,CAAd;AACAD,qCAAKR,IAAL,CAAUY,KAAV;AACH;AACD,mCAAO3B,QAAQY,MAAR,gBAAkBW,IAAlB,CAAP;AACH,yBARD,CASA,OAAOM,CAAP,EAAU;AACNC,oCAAQC,GAAR,CAAYF,CAAZ;AACH;AACJ;AACJ;AAjBY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBhB;;;mCA7FiB7B,O,EAAS;AACvB,gBAAMgC,UAAU,MAAMhC,QACjBW,OADiB,CACT,WADS,EACI,MADJ,EAEjBA,OAFiB,CAET,UAFS,EAEG,MAFH,CAAtB;AAGA,mBAAO,IAAID,MAAJ,CAAWsB,OAAX,EAAoB,GAApB,CAAP;AACH;;;kCACgBhC,O,EAAS;AACtB,gBAAMiC,eAAe,IAAItC,GAAJ,EAArB;AACA,gBAAMuC,YAAY,SAAZA,SAAY,CAACR,IAAD,EAAOV,MAAP,EAAkB;AAChC,oBAAImB,QAAQ,CAAZ;AACA,oBAAIC,MAAMpB,OAAOM,IAAP,CAAYtB,OAAZ,CAAV;AACA,uBAAOoC,GAAP,EAAY;AACRD,6BAASC,IAAID,KAAb;AACAF,iCAAa/B,GAAb,CAAiBiC,KAAjB,EAAwBT,IAAxB;AACA;AACAS,6BAASC,IAAI,CAAJ,EAAOX,MAAhB;AACAW,0BAAMpB,OAAOM,IAAP,CAAYtB,QAAQqC,SAAR,CAAkBF,KAAlB,CAAZ,CAAN;AACH;AACJ,aAVD;AAWAD,sBAAU,QAAV,EAAoB,SAApB;AACAA,sBAAU,QAAV,EAAoB,UAApB;AACAA,sBAAU,OAAV,EAAmB,SAAnB;;AAEA,mBAAO,6BAAID,aAAaK,OAAb,EAAJ,GACFC,IADE,CACG,UAACC,CAAD,EAAIC,CAAJ;AAAA,uBAAUD,EAAE,CAAF,IAAOC,EAAE,CAAF,CAAjB;AAAA,aADH,EAC0B;AAD1B,aAEFnC,GAFE,CAEE;AAAA,uBAAKkC,EAAE,CAAF,CAAL;AAAA,aAFF,CAAP,CAjBsB,CAmBD;AACxB;;;yCAEuBd,I,EAAMC,K,EAAO;AACjC,oBAAQD,IAAR;AACI,qBAAK,QAAL;AAAe;AACX,+BAAOC,KAAP;AACH;AACD,qBAAK,OAAL;AAAc;AACV,+BAAOA,KAAP;AACH;AACD,qBAAK,QAAL;AAAe;AACX,4BAAMe,gBAAgBC,OAAOC,QAAP,CAAgBjB,KAAhB,CAAtB;AACA,4BAAI,CAACgB,OAAOE,KAAP,CAAaH,aAAb,CAAD,IAAgCC,OAAOG,QAAP,CAAgBJ,aAAhB,CAApC,EAAoE;AAChE,mCAAOA,aAAP;AACH;AACD,qFAA0Df,KAA1D;AACH;AACD;AAAS;AACL,0DAAgCD,IAAhC;AACH;AAhBL;AAkBH;;;;;;kBAhEgBlC,a;;;;;;;;;ACArB;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAAuC;;AAEvC,IAAI,+BAAqBuD,kBAArB,EAAJ,EAA+C;AAC3CtD;AACH;;AAED,SAASuD,eAAT,CAAyBC,EAAzB,EAA6BC,KAA7B,EAAoCC,KAApC,EAA2C;AACvC,QAAIA,KAAJ,EAAW;AACPF,WAAGG,SAAH,CAAaC,GAAb,CAAiBH,KAAjB;AACH,KAFD,MAEO;AACHD,WAAGG,SAAH,CAAaE,MAAb,CAAoBJ,KAApB;AACH;AACJ;;AAED,SAASzD,IAAT,GAAgB;AACZ,QAAM8D,kBAAkBC,SAASC,cAAT,CAAwB,iBAAxB,CAAxB;AACA,QAAMC,qBAAqBF,SAASC,cAAT,CAAwB,oBAAxB,CAA3B;AACA,QAAME,aAAaH,SAASC,cAAT,CAAwB,OAAxB,CAAnB;AACA,QAAMG,gBAAgBJ,SAASC,cAAT,CAAwB,eAAxB,CAAtB;;AAEA,QAAMI,mBAAmBL,SAASC,cAAT,CAAwB,kBAAxB,CAAzB;AACA,QAAMK,qBAAqBN,SAASC,cAAT,CAAwB,oBAAxB,CAA3B;AACA,QAAMM,6BAA6BP,SAASQ,sBAAT,CAAgC,4BAAhC,CAAnC;AACA,QAAMC,uBAAuBT,SAASC,cAAT,CAAwB,iBAAxB,CAA7B;AACA,QAAMS,kBAAkBV,SAASC,cAAT,CAAwB,iBAAxB,CAAxB;AACA,QAAMU,qBAAqBX,SAASC,cAAT,CAAwB,eAAxB,CAA3B;AACA,QAAMW,mBAAmBZ,SAASC,cAAT,CAAwB,aAAxB,CAAzB;AACA,QAAMY,iBAAiBb,SAASC,cAAT,CAAwB,gBAAxB,CAAvB;;AAEA,QAAMa,yBAAyBd,SAASC,cAAT,CAAwB,wBAAxB,CAA/B;AACA,QAAMc,0BAA0Bf,SAASC,cAAT,CAAwB,yBAAxB,CAAhC;;AAEA,QAAMe,eAAehB,SAASC,cAAT,CAAwB,cAAxB,CAArB;;AAEA,QAAMgB,gBAAgB,4BAAkBjB,QAAlB,CAAtB;AACAiB,kBAAcC,OAAd,CAAsB,WAAtB;;AAEA,QAAMC,kBAAkB,8BAAoBnB,QAApB,CAAxB;;AAEA,QAAMhG,UAAU,KAAKoH,OAAOC,YAAP,IAAuBD,OAAOE,kBAAnC,GAAhB;;AAEA,QAAMC,cAAc,2BAApB;AACA,QAAMC,kBAAkB,8BAAoBxH,OAApB,CAAxB;AACA,QAAMyH,aAAa,EAAEC,UAAU,EAAZ,EAAnB;AACAC,UAAM,iBAAN,EAAyB,eAAzB,EAA0CF,UAA1C;;AAEA,QAAMG,aAAaD,MAAM,iBAAN,CAAnB;AACAC,eAAWC,EAAX,CAAc,QAAd,EAAwB,UAACC,IAAD,EAAU;AAC9B,YAAIA,SAAS,UAAb,EAAyB;AACrBP,wBAAYQ,eAAZ,CAA4BN,WAAWC,QAAvC;AACH;AACJ,KAJD;;AAMA,QAAIM,iBAAiB,KAArB;AACA,QAAMC,gBAAgB,SAAhBA,aAAgB,CAACC,QAAD,EAAc;AAChC,YAAMC,OAAOZ,YAAYa,iBAAZ,CAA8BF,SAASG,QAAvC,KAAoD,wBAAjE;AACA,YAAMC,YAAY;AACdC,kBAAML,SAASG,QADD;AAEd1G,iBAAKwG,KAAKxG,GAFI;AAGdC,yBAAauG,KAAKvG,WAHJ;AAIdG,kCAAsBoG,KAAKtG,aAAL,GAAqB,GAJ7B;AAKd2G,yBAAa,uBAAY;AAAE,uBAAO,KAAK,MAAL,EAAarF,OAAb,CAAqB,IAArB,EAA2B,MAA3B,CAAP;AAA4C;AALzD,SAAlB;;AAQAqE,wBAAgBiB,OAAhB,CAAwBP,SAASG,QAAjC,EAA2CH,SAASQ,QAApD;AACAjB,mBAAWC,QAAX,CAAoBnE,IAApB,CAAyB+E,SAAzB;AACAX,cAAM,iBAAN,EAAyBgB,OAAzB,CAAiC,QAAjC,EAA2C,UAA3C;;AAEA,YAAI,CAACX,cAAL,EAAqB;AACjB3B,6BAAiBT,SAAjB,CAA2BC,GAA3B,CAA+B,QAA/B;AACAS,+BAAmBV,SAAnB,CAA6BE,MAA7B,CAAoC,QAApC;AACAzD,kBAAMuG,IAAN,CAAWrC,0BAAX,EAAuCsC,OAAvC,CAA+C;AAAA,uBAAMpD,GAAGqD,SAAH,GAAeR,UAAUC,IAA/B;AAAA,aAA/C;AACAtB,0BAAcC,OAAd,CAAsB,UAAtB;AACAc,6BAAiB,IAAjB;AACH;AACJ,KArBD;;AAuBA,QAAMe,gBAAgB,SAAhBA,aAAgB,CAACC,GAAD,EAAS;AAC3B,8BAAYC,SAAZ,CAAsBD,GAAtB,EACKE,IADL,CACU,gBAAQ;AACV,gBAAMhB,WAAW,uBAAaiB,KAAKZ,IAAL,CAAUa,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAb,EAAsCD,KAAKE,QAA3C,CAAjB;AACApB,0BAAcC,QAAd;AACH,SAJL;AAKH,KAND;AAOAhC,uBAAmBoD,OAAnB,GAA6B,YAAM;AAC/B,YAAI,CAAC/B,YAAYa,iBAAZ,CAA8B,eAA9B,CAAL,EAAqD;AACjDb,wBAAYQ,eAAZ,CAA4B,CAAC,EAAEQ,MAAM,eAAR,EAAyB5G,KAAK,GAA9B,EAAD,CAA5B;AACH;AACDoH,sBAAc,yBAAd;AACH,KALD;;AAOA,QAAMQ,YAAY,SAAZA,SAAY,CAACC,KAAD,EAAW;AAAA;AAAA;AAAA;;AAAA;AACzB,iCAAgBA,KAAhB,8HAAuB;AAAA,oBAAZC,CAAY;;AACnB,sCAAYC,uBAAZ,CAAoCD,CAApC,EACKP,IADL,CACU,gBAAQ;AACV,wBAAMhB,WAAW,uBAAaiB,KAAKZ,IAAL,CAAUa,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAb,EAAsCD,KAAKE,QAA3C,CAAjB;AACApB,kCAAcC,QAAd;AACH,iBAJL;AAKH;AAPwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQ5B,KARD;AASA/B,eAAWwD,QAAX,GAAsB,UAACC,GAAD,EAAS;AAC3BL,kBAAUK,IAAIC,MAAJ,CAAWL,KAArB;AACH,KAFD;;AAIApD,kBAAc0D,UAAd,GAA2B,UAACF,GAAD,EAAS;AAChCA,YAAIG,YAAJ,CAAiBC,UAAjB,GAA8B,MAA9B;AACA5D,sBAAcR,SAAd,CAAwBC,GAAxB,CAA4B,WAA5B;AACA,eAAO,KAAP;AACH,KAJD;AAKAO,kBAAc6D,WAAd,GAA4B,YAAM;AAC9B7D,sBAAcR,SAAd,CAAwBE,MAAxB,CAA+B,WAA/B;AACH,KAFD;AAGAM,kBAAc8D,MAAd,GAAuB,UAACN,GAAD,EAAS;AAC5BxD,sBAAcR,SAAd,CAAwBE,MAAxB,CAA+B,WAA/B;AACAyD,kBAAUK,IAAIG,YAAJ,CAAiBP,KAA3B;AACA,eAAO,KAAP;AACH,KAJD;;AAMA;AACApC,WAAO+C,YAAP,GAAsB,oBAAY;AAC9B,YAAI;AACA,gBAAMC,WAAW7C,YAAYa,iBAAZ,CAA8BiC,QAA9B,CAAjB;AACA7C,4BAAgB8C,QAAhB,CAAyBD,QAAzB,EAAmCD,SAASzI,GAA5C,EAAiDyI,SAASxI,WAA1D,EAAuEwI,SAASvI,aAAhF;AACH,SAHD,CAIA,OAAOwC,CAAP,EAAU;AACNkG,kBAAMlG,CAAN;AACH;AACJ,KARD;AASAqC,oBAAgB4C,OAAhB,GAA0B,YAAM;AAC5B,YAAMkB,YAAYrF,OAAOC,QAAP,CAAgBqB,qBAAqBtC,KAArC,CAAlB;AACAgD,wBAAgBsD,IAAhB,UAA4BD,SAA5B;AACAhD,wBAAgBkD,SAAhB,CAA0BF,SAA1B;AACH,KAJD;AAKA3D,mBAAeyC,OAAf,GAAyB,YAAM;AAC3B9B,wBAAgBmD,QAAhB,CAAyBxF,OAAOC,QAAP,CAAgBuB,mBAAmBxC,KAAnC,CAAzB,EAAoEgB,OAAOC,QAAP,CAAgBwB,iBAAiBzC,KAAjC,CAApE;AACH,KAFD;;AAIA4B,oBAAgBuD,OAAhB,GAA0B,YAAM;AAC5B,YAAMsB,SAAS,qBAAW5K,OAAX,CAAf;AACA,YAAM6K,kBAAkB,+BAAxB;AACAA,wBAAgBC,UAAhB,GAA6B,UAACC,SAAD,EAAe;AACxC1I,kBAAMuG,IAAN,CAAW5C,SAASQ,sBAAT,CAAgC,qBAAhC,CAAX,EACKqC,OADL,CACa;AAAA,uBAAMrD,gBAAgBC,EAAhB,EAAoB,wBAApB,EAA8CsF,SAA9C,CAAN;AAAA,aADb;AAEA,gBAAIA,SAAJ,EAAe;AACXH,uBAAOI,OAAP;AACAxD,gCAAgByD,SAAhB,CAA0B,EAA1B;AACH,aAHD,MAIK;AACDzD,gCAAgByD,SAAhB,CAA0B,CAA1B;AACH;AACD,mBAAO,IAAP;AACH,SAXD;;AAaA,YAAMC,iBAAiB,8BAAvB;AACAA,uBAAeC,YAAf,GAA8B,UAACX,SAAD,EAAe;AACzCrD,4BAAgBsD,IAAhB,UAA4BD,SAA5B;AACAhD,4BAAgBkD,SAAhB,CAA0BF,SAA1B;AACA,2DAA6CA,SAA7C;AACH,SAJD;AAKAU,uBAAeE,gBAAf,GAAkC,UAACZ,SAAD,EAAe;AAC7ChD,4BAAgBmD,QAAhB,CAAyBH,SAAzB,EAAoCA,SAApC;AACA,+DAAiDA,SAAjD;AACH,SAHD;AAIAU,uBAAeG,iBAAf,GAAmC,UAACC,aAAD,EAAgBC,WAAhB,EAAgC;AAC/D/D,4BAAgBmD,QAAhB,CAAyBW,aAAzB,EAAwCC,WAAxC;AACA,oEAAsDD,aAAtD,sBAAoFC,WAApF;AACH,SAHD;AAIAL,uBAAeM,aAAf,GAA+B,UAACC,KAAD,EAAQ1J,oBAAR,EAA8BuJ,aAA9B,EAAgD;AAC3E,gBAAI;AACA,oBAAMjB,WAAW9C,YAAYmE,oBAAZ,CAAiCD,KAAjC,CAAjB;AACA,oBAAI,CAACpB,QAAL,EAAe;AACX,2BAAO,KAAP;AACH;;AAED,oBAAMD,WAAW7C,YAAYa,iBAAZ,CAA8BiC,QAA9B,CAAjB;AACA,oBAAI,CAACD,SAASzI,GAAd,EAAmB;AACf,0BAAM,wBAAwB0I,QAA9B;AACH;;AAED,oBAAMxI,gBAAiBE,uBAAuB,GAAxB,IAAgCqI,SAASvI,aAA/D;AACA2F,gCAAgB8C,QAAhB,CAAyBD,QAAzB,EAAmCD,SAASzI,GAA5C,EAAiDyI,SAASxI,WAA1D,EAAuEC,aAAvE,EAAsFyJ,aAAtF;AACA,4DAA0CG,KAA1C,+BAAyE1J,oBAAzE,wBAAgHuJ,aAAhH;AACH,aAdD,CAeA,OAAOjH,CAAP,EAAU;AACNkG,sBAAMlG,CAAN;AACA,uBAAO,KAAP;AACH;AACJ,SApBD;AAqBA6G,uBAAeS,aAAf,GAA+B,YAAM;AACjCnE,4BAAgBnG,IAAhB;AACA,mBAAO,sBAAP;AACH,SAHD;;AAKA,YAAMuK,SAAS,qBAAW5E,YAAX,CAAf;AACA,YAAM6E,uBAAuB,mCAAyBhB,eAAzB,EAA0CK,cAA1C,EAA0DU,MAA1D,CAA7B;AACAC,6BAAqBC,cAArB;;AAEAZ,uBAAea,sBAAf,GAAwC,YAAM;AAC1CF,iCAAqBG,aAArB;AACA,mBAAO,+BAAP;AACH,SAHD;;AAKAd,uBAAee,gBAAf,GAAkC,YAAM;AACpC;AACA,mBAAO,yBAAP;AACH,SAHD;AAIH,KArED;;AAuEAnF,2BAAuB6C,QAAvB,GAAkC,UAACC,GAAD,EAAS;AACvC,8BAAYsC,gBAAZ,CAA6BtC,IAAIC,MAAJ,CAAWL,KAAX,CAAiB,CAAjB,CAA7B,EACKN,IADL,CACU,gBAAQ;AACV3B,wBAAY4E,MAAZ,CAAmBhD,KAAKE,QAAxB;AACAkB,kBAAM,WAAN;AACH,SAJL;AAKH,KAND;AAOAxD,4BAAwBuC,OAAxB,GAAkC,YAAM;AACpC,YAAM8C,OAAO7E,YAAY8E,MAAZ,EAAb;AACA,8BAAYC,YAAZ,CAAyB,cAAzB,EAAyCF,IAAzC;AACH,KAHD;AAIH,C;;;;;;;;;;;;;;;;;ICvOoBG,a;;;;;;;6CACWlM,I,EAAM;AAC9B,mBAAO,MAAMmM,KAAKC,GAAL,CAAS,CAAT,EAAY,CAACpM,OAAO,EAAR,IAAc,EAA1B,CAAb;AACH;;;6CAC2BY,S,EAAW;AACnC,mBAAOuL,KAAKE,KAAL,CAAW,MAAMF,KAAKjI,GAAL,CAAStD,YAAY,GAArB,IAA4BuL,KAAKjI,GAAL,CAAS,CAAT,CAAlC,CAAX,IAA6D,EAApE;AACH;;;;;;kBANgBgI,a;;;;;;;;;;;;;;;;;ICAAI,W;;;;;;;kCAEA3D,G,EAAK;AAClB,mBAAO,IAAI4D,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAAA;;AAC1C,oBAAMC,UAAU,IAAIC,cAAJ,EAAhB;AACAD,wBAAQE,IAAR,CAAa,KAAb,EAAoBjE,GAApB;AACA+D,wBAAQG,YAAR,GAAuB,aAAvB;AACAH,wBAAQI,MAAR,GAAiB,YAAM;AACnB,wBAAMC,WAAWpE,IAAII,KAAJ,CAAU,GAAV,CAAjB;AACA,wBAAMiE,eAAeD,SAASA,SAASnJ,MAAT,GAAkB,CAA3B,CAArB;AACA4I,4BAAQ,EAAEtE,MAAM8E,YAAR,EAAsBhE,UAAU0D,QAAQO,QAAxC,EAAR;AACH,iBAJD;AAKAP,wBAAQQ,OAAR,GAAkB,YAAM;AACpBT,2BAAO;AACHU,gCAAQ,MAAKA,MADV;AAEHC,oCAAYV,QAAQU;AAFjB,qBAAP;AAIH,iBALD;AAMAV,wBAAQW,IAAR;AACH,aAhBM,CAAP;AAiBH;;;gDAE8BvE,I,EAAM;AACjC,mBAAO,IAAIyD,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC1C,oBAAMa,SAAS,IAAIC,UAAJ,EAAf;AACAD,uBAAOR,MAAP,GAAgB,UAACvD,GAAD,EAAS;AACrBiD,4BAAQ,EAAEtE,MAAMY,KAAKZ,IAAb,EAAmBc,UAAUO,IAAIC,MAAJ,CAAWgE,MAAxC,EAAR;AACH,iBAFD;AAGAF,uBAAOJ,OAAP,GAAiB;AAAA,2BAAMT,QAAN;AAAA,iBAAjB;AACAa,uBAAOG,iBAAP,CAAyB3E,IAAzB;AACH,aAPM,CAAP;AAQH;;;yCAEuBA,I,EAAM;AAC1B,mBAAO,IAAIyD,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC1C,oBAAMa,SAAS,IAAIC,UAAJ,EAAf;AACAD,uBAAOR,MAAP,GAAgB,UAACvD,GAAD,EAAS;AACrBiD,4BAAQ,EAAEtE,MAAMY,KAAKZ,IAAb,EAAmBc,UAAUO,IAAIC,MAAJ,CAAWgE,MAAxC,EAAR;AACH,iBAFD;AAGAF,uBAAOJ,OAAP,GAAiB;AAAA,2BAAMT,QAAN;AAAA,iBAAjB;AACAa,uBAAOI,UAAP,CAAkB5E,IAAlB;AACH,aAPM,CAAP;AAQH;;;qCAEmBZ,I,EAAMc,Q,EAAU;AAChC,gBAAM2E,OAAOhI,SAASiI,aAAT,CAAuB,GAAvB,CAAb;AACAD,iBAAKE,QAAL,GAAgB3F,IAAhB;AACAyF,iBAAKG,IAAL,GAAYC,IAAIC,eAAJ,CAAoB,IAAIC,IAAJ,CAAS,CAACjF,QAAD,CAAT,CAApB,CAAZ;AACA2E,iBAAKO,KAAL;AACH;;;;;;kBAjDgB5B,W;;;;;;;;;;;;;;;;;ICAA6B,M;AAEjB,oBAAYC,aAAZ,EAA2B;AAAA;;AACvB,aAAKA,aAAL,GAAqBA,aAArB;AACH;;;;4BAEGC,K,EAAOC,O,EAAS;AAChB,gBAAMlJ,KAAKO,SAASiI,aAAT,CAAuB,GAAvB,CAAX;AACAxI,eAAGG,SAAH,CAAaC,GAAb,CAAiB,KAAjB;AACAJ,eAAGG,SAAH,CAAaC,GAAb,CAAiB,SAAS6I,KAA1B;AACAjJ,eAAGqD,SAAH,GAAe6F,OAAf;AACA;AACA,iBAAKF,aAAL,CAAmBG,OAAnB,CAA2BnJ,EAA3B;AACH;;;;;;kBAbgB+I,M;;;;;;;;;;;;;;;ACArB;;;;AACA;;;;AACA;;;;;;;;IAEqBK,e;AAEjB,6BAAY7O,OAAZ,EAAqB;AAAA;;AACjB,aAAKA,OAAL,GAAeA,OAAf;AACA,aAAK4K,MAAL,GAAc,qBAAW5K,OAAX,CAAd;AACA,aAAK8O,aAAL,GAAqB,4BAAkB9O,OAAlB,CAArB;AACH;;;;gCAEOuI,I,EAAMG,Q,EAAU;AACpB,iBAAKoG,aAAL,CAAmBC,UAAnB,CAA8BxG,IAA9B,EAAoCG,QAApC,EACKQ,IADL,CACU,YAAM;AACR;AACH,aAHL;AAIH;;;iCAEQX,I,EAAM5G,G,EAAKC,W,EAAmD;AAAA;;AAAA,gBAAtCC,aAAsC,uEAAtB,CAAsB;AAAA,gBAAnByJ,aAAmB,uEAAH,CAAG;;AACnE,gBAAI0D,aAAa,EAAjB;AACA,gBAAMC,SAAS,KAAKH,aAAL,CAAmBI,SAAnB,CAA6B3G,IAA7B,EAAmC1G,aAAnC,EAAkD,EAAlD,EAAsD,aAAK;AACtEyC,wBAAQC,GAAR,CAAY,eAAZ,EAA6B4K,CAA7B;AACA,sBAAKvE,MAAL,CAAYtJ,IAAZ,CAAiB,EAAEjB,MAAM2O,YAAR,EAAjB;AACH,aAHc,CAAf;;AAKA,gBAAI,KAAKI,iBAAT,EAA4B;AACxB,qBAAKA,iBAAL,CAAuB/N,IAAvB;AACH;;AAED,iBAAKuJ,MAAL,CAAYtJ,IAAZ;AACA,iBAAK8N,iBAAL,GAAyB,yBAAe,KAAKpP,OAApB,EAA6BiP,MAA7B,EAAqCpN,aAArC,EAAoDF,GAApD,EAAyDC,WAAzD,CAAzB;AACA,iBAAKwN,iBAAL,CAAuBC,IAAvB,CAA4B/D,aAA5B;AACH;;;kCAESd,S,EAAW;AACjB,gBAAI,KAAK4E,iBAAT,EAA4B;AACxB,qBAAKxE,MAAL,CAAY0E,UAAZ;AACA,qBAAKF,iBAAL,CAAuBC,IAAvB,CAA4B7E,SAA5B;AACH;AACJ;;;iCAEQc,a,EAAeC,W,EAAa;AACjC,gBAAI,KAAK6D,iBAAT,EAA4B;AACxB,qBAAKxE,MAAL,CAAY0E,UAAZ;AACA,qBAAKF,iBAAL,CAAuBzE,QAAvB,CAAgCW,aAAhC,EAA+CC,WAA/C;AACH;AACJ;;;+BAEM;AACH,gBAAI,KAAK6D,iBAAT,EAA4B;AACxB,qBAAKA,iBAAL,CAAuB/N,IAAvB;AACH;AACJ;;;kCAESkO,M,EAAQ;AACd,gBAAI,KAAKH,iBAAT,EAA4B;AACxB,qBAAKA,iBAAL,CAAuBnE,SAAvB,CAAiCsE,MAAjC;AACH;AACJ;;;;;;kBAvDgBV,e;;;;;;;;;;;;;;;ACJrB;;;;AAAgC;;IAEXW,a;AAEjB,2BAAYxP,OAAZ,EAAqB;AAAA;;AACjB,aAAKA,OAAL,GAAeA,OAAf;AACA,aAAKyP,SAAL,GAAiB,IAAItN,GAAJ,EAAjB;AACH;;;;mCAEUkI,Q,EAAU3B,Q,EAAU;AAAA;;AAC3B,mBAAO,IAAIkE,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,sBAAK9M,OAAL,CAAa0P,eAAb,CAA6BhH,QAA7B,EAAuC,UAACuG,MAAD,EAAY;AAC/C;AACA,0BAAKQ,SAAL,CAAe/M,GAAf,CAAmB2H,WAAW,IAA9B,EAAoC4E,MAApC;AACApC;AACH,iBAJD,EAIG,UAACxI,CAAD,EAAO;AACNC,4BAAQqL,KAAR,CAActL,CAAd;AACAyI;AACH,iBAPD;AAQH,aATM,CAAP;AAUH;;;kCAESzC,Q,EAAuF;AAAA,gBAA7ExI,aAA6E,uEAA7D,CAA6D;AAAA,gBAA1D+N,qBAA0D,uEAAlC,EAAkC;AAAA,gBAA9BC,gBAA8B,uEAAXC,SAAW;;AAC7F,gBAAMC,YAAY1F,WAAW,GAAX,GAAiBxI,aAAnC;AACA,gBAAI,KAAK4N,SAAL,CAAeO,GAAf,CAAmBD,SAAnB,CAAJ,EAAmC;AAC/B,uBAAO,KAAKN,SAAL,CAAeQ,GAAf,CAAmBF,SAAnB,CAAP;AACH;;AAED;AACA,gBAAMG,iBAAiB,KAAKT,SAAL,CAAeQ,GAAf,CAAmB5F,WAAW,IAA9B,CAAvB;AACA,gBAAI,CAAC6F,cAAL,EAAqB;AACjB,sBAAM,sBAAsB7F,QAA5B;AACH;;AAED,gBAAM4E,SAASO,cAAcW,QAAd,CAAuB,KAAKnQ,OAA5B,EAAqCkQ,cAArC,EACXrO,aADW,EACI,CADJ,EACO,KADP,EACc+N,qBADd,EACqCC,gBADrC,CAAf;AAEA,iBAAKJ,SAAL,CAAe/M,GAAf,CAAmBqN,SAAnB,EAA8Bd,MAA9B;AACA,mBAAOA,MAAP;AACH;;;iCAEejP,O,EAASiP,M,EAAQpN,a,EAAeuO,W,EAAaC,W,EAAaT,qB,EAAuBC,gB,EAAkB;;AAE/G,gBAAIhO,kBAAkB,GAAtB,EAA2B;AACvB,uBAAOoN,MAAP;AACH;;AAED,gBAAIY,gBAAJ,EAAsB;AAClBA,iCAAiB,CAAjB;AACH;;AAED,gBAAMS,oBAAoB,OAAOF,WAAjC;AACA,gBAAMG,kBAAkBtB,OAAOuB,cAAP,CAAsB,CAAtB,EAAyBvM,MAAjD;AACA,gBAAMwM,mBAAmBjE,KAAKkE,KAAL,CAAWH,kBAAkB1O,aAA7B,IAA8C,CAAvE;;AAEA,gBAAM8O,oBAAoB3Q,QAAQ4Q,YAAR,CAAqBR,WAArB,EAAkCK,gBAAlC,EAAoDzQ,QAAQ6Q,UAA5D,CAA1B;;AAEA,gBAAIC,kBAAkB,CAAtB;AACA,gBAAMC,uBAAuBvE,KAAKkE,KAAL,CAAWD,mBAAmBL,WAAnB,GAAiCR,qBAA5C,CAA7B;;AAEA,iBAAK,IAAIoB,UAAU,CAAnB,EAAsBA,UAAUZ,WAAhC,EAA6CY,SAA7C,EAAwD;AACpD,oBAAMC,YAAYhC,OAAOuB,cAAP,CAAsBQ,OAAtB,CAAlB;;AAEA,oBAAME,OAAO,IAAIC,IAAJ,CAAS,CAAT,CAAb;AACAD,qBAAKE,KAAL,CAAWpR,QAAQ6Q,UAAnB,EAA+BhP,aAA/B,EAA8C,CAACwO,WAA/C;;AAEA,oBAAMgB,aAAa,IAAIC,YAAJ,CAAiBb,gBAAjB,CAAnB;;AAEA,oBAAIc,cAAc,CAAlB;AACA,oBAAIC,kBAAkB,CAAtB;AACA,oBAAIC,UAAU,KAAd;;AAEA,uBAAOD,kBAAkBH,WAAWpN,MAApC,EAA4C;AACxC,2BAAO4L,oBAAoBiB,mBAAmBC,oBAA9C,EAAoE;AAChElB,yCAAiB,CAAC2B,kBAAkBf,mBAAmBO,OAAtC,KAAkDP,mBAAmBL,WAArE,CAAjB;AACAU,2CAAmBC,oBAAnB;AACH;;AAED;AACA,wBAAMW,kBAAkBR,KAAKS,MAAL,CAAYN,WAAWO,QAAX,CAAoBJ,eAApB,EAAqChF,KAAKqF,GAAL,CAASL,kBAAkBlB,iBAA3B,EAA8Ce,WAAWpN,MAAzD,CAArC,CAAZ,CAAxB;AACAuN,uCAAmBE,eAAnB;AACAZ,uCAAmBY,eAAnB;;AAEA,wBAAIH,cAAcN,UAAUhN,MAA5B,EAAoC;AAChC;AACA,4BAAM6N,cAAcb,UAAUW,QAAV,CAAmBL,WAAnB,EAAgC/E,KAAKqF,GAAL,CAASN,cAAcjB,iBAAvB,EAA0CW,UAAUhN,MAApD,CAAhC,CAApB;AACAsN,uCAAeO,YAAY7N,MAA3B;;AAEAiN,6BAAKzF,KAAL,CAAWqG,WAAX;AACAZ,6BAAKa,OAAL;AACH,qBAPD,MAOO,IAAI,CAACN,OAAL,EAAc;AACjBP,6BAAKc,KAAL;AACAP,kCAAU,IAAV;AACH;AACJ;;AAEDd,kCAAkBH,cAAlB,CAAiCQ,OAAjC,EAA0CtO,GAA1C,CAA8C2O,UAA9C;AACH;;AAED,mBAAOV,iBAAP;AACH;;;;;;kBAjGgBnB,a;;;;;;;;;ACFrB,CAAC,UAASnL,CAAT,EAAW;AAAC,WAAS4N,CAAT,CAAWjO,CAAX,EAAa;AAAC,QAAGkO,EAAElO,CAAF,CAAH,EAAQ,OAAOkO,EAAElO,CAAF,EAAKmO,OAAZ,CAAoB,IAAIC,IAAEF,EAAElO,CAAF,IAAK,EAACmO,SAAQ,EAAT,EAAYE,IAAGrO,CAAf,EAAiBsO,QAAO,CAAC,CAAzB,EAAX,CAAuC,OAAOjO,EAAEL,CAAF,EAAKuO,IAAL,CAAUH,EAAED,OAAZ,EAAoBC,CAApB,EAAsBA,EAAED,OAAxB,EAAgCF,CAAhC,GAAmCG,EAAEE,MAAF,GAAS,CAAC,CAA7C,EAA+CF,EAAED,OAAxD;AAAgE,OAAID,IAAE,EAAN,CAAS,OAAOD,EAAEO,CAAF,GAAInO,CAAJ,EAAM4N,EAAEQ,CAAF,GAAIP,CAAV,EAAYD,EAAE9C,CAAF,GAAI,EAAhB,EAAmB8C,EAAE,CAAF,CAA1B;AAA+B,CAArM,CAAsM,CAAC,UAAS5N,CAAT,EAAW4N,CAAX,EAAaC,CAAb,EAAe;AAAC7N,IAAE8N,OAAF,GAAUD,EAAE,CAAF,CAAV;AAAe,CAAhC,EAAiC,UAAS7N,CAAT,EAAW4N,CAAX,EAAaC,CAAb,EAAe;AAAC,WAASlO,CAAT,CAAWK,CAAX,EAAa;AAAC,WAAOmI,KAAKkE,KAAL,CAAWrM,CAAX,CAAP;AAAqB,OAAI+N,IAAEF,EAAE,CAAF,CAAN;AAAA,MAAWvP,IAAE,YAAU;AAAC,aAAS0B,CAAT,GAAY;AAAC,WAAKqO,cAAL,GAAoB,CAAC,CAArB,EAAuB,KAAKC,WAAL,GAAiB,KAAxC,EAA8C,KAAKC,QAAL,GAAc,CAA5D,EAA8D,KAAKC,YAAL,GAAkB,CAAC,CAAjF,EAAmF,KAAKC,MAAL,GAAY,CAA/F,EAAiG,KAAKC,MAAL,GAAY,CAA7G,EAA+G,KAAKC,OAAL,GAAa,CAA5H,EAA8H,KAAKC,OAAL,GAAa,CAA3I,EAA6I,KAAKC,YAAL,GAAkB,CAA/J,EAAiK,KAAKC,UAAL,GAAgB,CAAjL,EAAmL,KAAKC,WAAL,GAAiB,CAApM,EAAsM,KAAKC,cAAL,GAAoB,CAA1N,EAA4N,KAAKC,UAAL,GAAgB,CAA5O;AAA8O,YAAOjP,CAAP;AAAS,GAA/Q,EAAb;AAAA,MAA+RkP,IAAE,YAAU;AAAC,aAASlP,CAAT,CAAWA,CAAX,EAAa;AAAC,UAAI4N,IAAE,IAAItP,CAAJ,EAAN,CAAYsP,EAAEW,QAAF,GAAWvO,CAAX,EAAa4N,EAAEuB,UAAF,GAAa,IAAIpB,CAAJ,CAAMd,YAAN,CAA1B,EAA8CW,EAAEwB,WAAF,GAAc,IAAIrB,CAAJ,CAAMd,YAAN,CAA5D,EAAgF,KAAKW,CAAL,GAAOA,CAAvF;AAAyF,YAAO5N,EAAEqP,SAAF,CAAYC,UAAZ,GAAuB,UAAStP,CAAT,EAAW4N,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAI,IAAIlO,IAAE,CAAN,EAAQoO,IAAE,CAAV,EAAYA,IAAE,CAAlB,EAAoBF,IAAEE,CAAtB,EAAwBA,GAAxB;AAA4BpO,aAAGwI,KAAKC,GAAL,CAASpI,EAAE+N,CAAF,IAAKH,EAAEG,CAAF,CAAd,EAAmB,CAAnB,CAAH;AAA5B,OAAqD,OAAOpO,CAAP;AAAS,KAArG,EAAsGK,EAAEqP,SAAF,CAAYE,2BAAZ,GAAwC,UAASvP,CAAT,EAAW4N,CAAX,EAAa;AAAC,UAAIC,CAAJ;AAAA,UAAMlO,CAAN;AAAA,UAAQoO,CAAR;AAAA,UAAUzP,IAAE0B,EAAEwP,WAAd;AAAA,UAA0BN,IAAElP,EAAE0O,MAAF,GAAS,CAAT,KAAa,CAAzC;AAAA,UAA2C/N,IAAE,EAA7C;AAAA,UAAgDmK,IAAEnL,IAAEK,EAAEwO,YAAF,GAAeU,CAAf,GAAiB,CAArE;AAAA,UAAuEO,IAAE,KAAKH,UAAL,CAAgB1B,EAAEL,QAAF,CAAWvN,EAAEuO,QAAF,GAAWzD,CAAtB,CAAhB,EAAyCxM,CAAzC,EAA2C0B,EAAEuO,QAAF,GAAWvO,EAAE4O,OAAxD,CAAzE;AAAA,UAA0IxJ,IAAE,CAA5I,CAA8I,IAAGpF,EAAEwO,YAAL,EAAkB;AAAC,WAAE;AAAC,eAAIpJ,IAAE,CAAC,CAAP,EAAS,KAAGA,CAAZ,EAAcA,KAAG,CAAjB;AAAmB,iBAAIyI,IAAE,CAAN,EAAQ,CAAC,IAAEA,CAAF,IAAK,MAAIlN,CAAV,MAAemK,IAAEoE,IAAE9J,IAAEyI,CAAF,GAAIlN,CAAR,EAAU,EAAE,IAAEmK,CAAF,IAAKA,KAAG9K,EAAE0O,MAAZ,CAAzB,CAAR,EAAsDb,GAAtD;AAA0DE,kBAAE,KAAKuB,UAAL,CAAgB1B,EAAEL,QAAF,CAAWvN,EAAEuO,QAAF,GAAWzD,CAAtB,CAAhB,EAAyCxM,CAAzC,EAA2C0B,EAAEuO,QAAF,GAAWvO,EAAE4O,OAAxD,CAAF,EAAmEa,IAAE1B,CAAF,KAAM0B,IAAE1B,CAAF,EAAIpO,IAAEmL,CAAZ,CAAnE;AAA1D;AAAnB,WAA+JoE,IAAEvP,CAAF;AAAI,SAAtK,QAA4KgB,OAAK,CAAjL;AAAoL,OAAvM,MAA4M,KAAImK,IAAE,CAAN,EAAQA,IAAE9K,EAAE0O,MAAZ,EAAmB5D,GAAnB;AAAuBiD,YAAE,KAAKuB,UAAL,CAAgB1B,EAAEL,QAAF,CAAWvN,EAAEuO,QAAF,GAAWzD,CAAtB,CAAhB,EAAyCxM,CAAzC,EAA2C0B,EAAEuO,QAAF,GAAWvO,EAAE4O,OAAxD,CAAF,EAAmEa,IAAE1B,CAAF,KAAM0B,IAAE1B,CAAF,EAAIpO,IAAEmL,CAAZ,CAAnE;AAAvB,OAAyG,OAAOnL,CAAP;AAAS,KAAxmB,EAAymBK,EAAEqP,SAAF,CAAYK,aAAZ,GAA0B,UAAS1P,CAAT,EAAW4N,CAAX,EAAaC,CAAb,EAAelO,CAAf,EAAiB;AAAC,UAAIoO,IAAE,CAAN;AAAA,UAAQzP,IAAE,CAAV;AAAA,UAAY4Q,IAAE,CAAd;AAAA,UAAgBvO,IAAE,IAAEX,EAAE4O,OAAtB,CAA8B,KAAIb,IAAE,CAAN,EAAQA,IAAE/N,EAAE4O,OAAZ,EAAoBb,GAApB,EAAwB;AAAC,YAAIjD,IAAEnK,IAAEoN,CAAR;AAAA,YAAU0B,IAAE,IAAE3E,CAAd,CAAgB,KAAIxM,IAAE,CAAN,EAAQA,IAAE0B,EAAEuO,QAAZ,EAAqBjQ,KAAI4Q,GAAzB;AAA6BvP,YAAEuP,CAAF,IAAKtB,EAAEsB,CAAF,IAAKO,CAAL,GAAO5B,EAAEqB,CAAF,IAAKpE,CAAjB;AAA7B;AAAgD;AAAC,KAA7wB,EAA8wB9K,EAAEqP,SAAF,CAAY3B,OAAZ,GAAoB,YAAU;AAAC,WAAI,IAAI1N,IAAE,KAAK4N,CAAf,EAAiB5N,EAAEmP,UAAF,CAAaQ,SAAb,MAA0B3P,EAAE6O,YAA7C,GAA2D;AAAC,YAAIjB,CAAJ,EAAMC,CAAN,CAAQ7N,EAAEgP,cAAF,IAAkBnB,IAAE,KAAK0B,2BAAL,CAAiCvP,CAAjC,EAAmCA,EAAEmP,UAAF,CAAaS,QAAb,CAAsB,CAAtB,CAAnC,CAAF,EAA+D,KAAKF,aAAL,CAAmB1P,CAAnB,EAAqBA,EAAEwP,WAAvB,EAAmCxP,EAAEmP,UAAF,CAAaS,QAAb,CAAsB5P,EAAEuO,QAAF,GAAWV,CAAjC,CAAnC,EAAuE7N,EAAEoP,WAAF,CAAcS,SAAd,CAAwB7P,EAAE4O,OAA1B,CAAvE,CAAjF,KAA8Lf,IAAE7N,EAAE0O,MAAF,GAAS,CAAX,EAAa1O,EAAEoP,WAAF,CAAcU,KAAd,CAAoB9P,EAAEmP,UAAF,CAAaS,QAAb,CAAsB5P,EAAEuO,QAAF,GAAWV,CAAjC,EAAmC7N,EAAE4O,OAArC,CAApB,EAAkE5O,EAAE4O,OAApE,CAA3M,GAAyR5O,EAAEoP,WAAF,CAAcU,KAAd,CAAoB9P,EAAEmP,UAAF,CAAaS,QAAb,CAAsB5P,EAAEuO,QAAF,IAAYV,IAAE7N,EAAE4O,OAAhB,CAAtB,CAApB,EAAoE5O,EAAE2O,OAAF,GAAU,IAAE3O,EAAE4O,OAAlF,CAAzR,CAAoX,IAAIb,IAAE/N,EAAEuO,QAAF,GAAWvO,EAAE4O,OAAnB,CAA2B5O,EAAEwP,WAAF,CAAcnR,GAAd,CAAkB2B,EAAEmP,UAAF,CAAaS,QAAb,CAAsB5P,EAAEuO,QAAF,IAAYV,IAAE7N,EAAE2O,OAAJ,GAAY3O,EAAE4O,OAA1B,CAAtB,EAA0DrB,QAA1D,CAAmE,CAAnE,EAAqEQ,CAArE,CAAlB,GAA2F/N,EAAEgP,cAAF,EAA3F,EAA8GpB,IAAEjO,EAAEK,EAAEyO,MAAF,IAAUzO,EAAE2O,OAAF,GAAU3O,EAAE4O,OAAtB,IAA+B,EAAjC,CAAhH,EAAqJ5O,EAAEmP,UAAF,CAAaY,IAAb,CAAkB,IAAlB,EAAuBnC,CAAvB,CAArJ;AAA+K;AAAC,KAAh7C,EAAi7C5N,EAAEqP,SAAF,CAAYjI,KAAZ,GAAkB,UAASpH,CAAT,EAAW4N,CAAX,EAAaC,CAAb,EAAe;AAAC,WAAK,CAAL,KAASD,CAAT,KAAaA,IAAE,IAAf,GAAqB,KAAK,CAAL,KAASC,CAAT,KAAaA,IAAE,CAAf,CAArB,EAAuC,QAAMD,CAAN,KAAUA,IAAE5N,EAAEJ,MAAd,CAAvC,CAA6D,IAAID,IAAE,KAAKiO,CAAX,CAAajO,EAAEmP,UAAF,IAAclB,CAAd,EAAgBjO,EAAEwP,UAAF,CAAaW,KAAb,CAAmB9P,CAAnB,EAAqB4N,CAArB,CAAhB;AAAwC,KAArkD,EAAskD5N,EAAEqP,SAAF,CAAY/B,MAAZ,GAAmB,UAAStN,CAAT,EAAW;AAAC,UAAI4N,IAAE,KAAKA,CAAX;AAAA,UAAaC,IAAE1F,KAAKqF,GAAL,CAASxN,EAAEJ,MAAX,EAAkBgO,EAAEwB,WAAF,CAAcO,SAAd,EAAlB,CAAf,CAA4D,OAAO/B,EAAEmB,WAAF,IAAelB,CAAf,EAAiBD,EAAEwB,WAAF,CAAcW,IAAd,CAAmB/P,CAAnB,EAAqB6N,CAArB,CAAjB,EAAyCA,CAAhD;AAAkD,KAAntD,EAAotD7N,EAAEqP,SAAF,CAAY1B,KAAZ,GAAkB,YAAU;AAAC,UAAI3N,IAAE,KAAK4N,CAAX;AAAA,UAAaA,IAAEjO,EAAEK,EAAE8O,UAAF,GAAa9O,EAAEyO,MAAf,GAAsB,EAAxB,CAAf;AAAA,UAA2CZ,IAAED,IAAE5N,EAAE+O,WAAJ,GAAgBnB,IAAE5N,EAAE+O,WAApB,GAAgC,CAA7E;AAAA,UAA+EhB,IAAE,IAAId,YAAJ,CAAiB,MAAIjN,EAAEuO,QAAvB,CAAjF,CAAkH,IAAGV,IAAE,CAAL,EAAO;AAAC,eAAK7N,EAAEoP,WAAF,CAAcO,SAAd,KAA0B9B,CAA/B;AAAkC,eAAKzG,KAAL,CAAW2G,CAAX,EAAa,GAAb,GAAkB,KAAKL,OAAL,EAAlB;AAAlC,SAAmE1N,EAAE8O,UAAF,GAAa,CAAb;AAAe;AAAC,KAA97D,EAA+7D9O,EAAEqP,SAAF,CAAYtC,KAAZ,GAAkB,UAASa,CAAT,EAAWC,CAAX,EAAaE,CAAb,EAAezP,CAAf,EAAiB4Q,CAAjB,EAAmBvO,CAAnB,EAAqB;AAAC,WAAK,CAAL,KAASoN,CAAT,KAAaA,IAAE,CAAC,CAAhB,GAAmB,KAAK,CAAL,KAASzP,CAAT,KAAaA,IAAE,IAAf,CAAnB,EAAwC,KAAK,CAAL,KAAS4Q,CAAT,KAAaA,IAAE,IAAf,CAAxC,EAA6D,KAAK,CAAL,KAASvO,CAAT,KAAaA,IAAE,IAAf,CAA7D,CAAkF,IAAImK,IAAE,CAAN;AAAA,UAAQ2E,IAAE,KAAK7B,CAAf,CAAiB6B,EAAEnB,WAAF,GAAcV,CAAd,EAAgB,QAAMtP,CAAN,KAAUA,IAAE6J,KAAK6H,GAAL,CAAS,EAAT,EAAYhQ,EAAEiQ,WAAF,CAAcnF,CAAd,IAAiB3C,KAAK6H,GAAL,CAAS7H,KAAKC,GAAL,CAASyF,CAAT,EAAW7N,EAAEkQ,YAAF,CAAepF,CAAf,CAAX,CAAT,EAAuC,CAAvC,CAA7B,CAAZ,CAAhB,EAAqG,QAAMoE,CAAN,KAAUA,IAAE5Q,IAAE0B,EAAEmQ,YAAF,CAAerF,CAAf,CAAd,CAArG,EAAsI,QAAMnK,CAAN,KAAUA,IAAErC,IAAE0B,EAAEoQ,YAAF,CAAetF,CAAf,CAAd,CAAtI,CAAuK,IAAI1F,CAAJ,CAAM,IAAGqK,EAAEjB,YAAF,GAAeT,CAAf,EAAiB0B,EAAEhB,MAAF,GAASZ,CAA1B,EAA4B4B,EAAEd,OAAF,GAAUhP,EAAEiO,IAAEtP,CAAF,GAAI,GAAJ,GAAQ,EAAV,CAAtC,EAAoDmR,EAAEf,MAAF,GAAS/O,EAAEiO,IAAEsB,CAAF,GAAI,GAAJ,GAAQ,EAAV,CAA7D,EAA2EO,EAAEb,OAAF,GAAUzG,KAAK6H,GAAL,CAASrQ,EAAEiO,IAAEjN,CAAF,GAAI,GAAJ,GAAQ,GAAV,CAAT,EAAwB,EAAxB,CAArF,EAAiH,IAAE8O,EAAEb,OAAJ,GAAYa,EAAEd,OAAd,KAAwBc,EAAEb,OAAF,IAAW,CAAnC,CAAjH,EAAuJa,EAAEpB,cAA5J,EAA2K;AAAC,YAAIgC,IAAE,IAAIpD,YAAJ,CAAiBwC,EAAEb,OAAF,GAAUa,EAAElB,QAA7B,CAAN;AAAA,YAA6C+B,IAAE,CAA/C,CAAiDb,EAAEb,OAAF,GAAUa,EAAElB,QAAZ,GAAqBkB,EAAED,WAAF,CAAc5P,MAAnC,KAA4C0Q,IAAEb,EAAED,WAAF,CAAc5P,MAAd,GAAqB6P,EAAEb,OAAF,GAAUa,EAAElB,QAA/E,GAAyF8B,EAAEhS,GAAF,CAAMoR,EAAED,WAAF,CAAcjC,QAAd,CAAuB+C,CAAvB,EAAyBb,EAAED,WAAF,CAAc5P,MAAvC,CAAN,CAAzF,EAA+I6P,EAAED,WAAF,GAAca,CAA7J;AAA+J,OAA5X,MAAiYZ,EAAED,WAAF,GAAc,IAAIvC,YAAJ,CAAiBwC,EAAEb,OAAF,GAAUa,EAAElB,QAA7B,CAAd,CAAqDnJ,IAAEzF,EAAEwI,KAAKoI,IAAL,CAAU1C,KAAG4B,EAAEd,OAAF,GAAUc,EAAEb,OAAf,CAAV,CAAF,CAAF,EAAwCa,EAAEZ,YAAF,GAAe1G,KAAK6H,GAAL,CAAS5K,IAAEqK,EAAEb,OAAb,EAAqBa,EAAEd,OAAvB,IAAgCc,EAAEf,MAAzF,EAAgGe,EAAEpB,cAAF,IAAkBoB,EAAEN,UAAF,CAAaqB,OAAb,CAAqB7Q,EAAE8P,EAAEf,MAAF,GAAS,CAAX,CAArB,CAAlH,EAAsJe,EAAEpB,cAAF,GAAiB,CAAC,CAAxK;AAA0K,KAAv1F,EAAw1FrO,EAAEqP,SAAF,CAAYoB,QAAZ,GAAqB,UAASzQ,CAAT,EAAW;AAAC,UAAI4N,IAAE,KAAKA,CAAX,CAAa,KAAKb,KAAL,CAAWa,EAAEU,WAAb,EAAyBtO,CAAzB,EAA2B4N,EAAEY,YAA7B;AAA2C,KAAj7F,EAAk7FxO,EAAEiQ,WAAF,GAAc,CAAC,EAAD,EAAI,EAAJ,EAAO,EAAP,EAAU,EAAV,CAAh8F,EAA88FjQ,EAAEkQ,YAAF,GAAe,CAAC,CAAD,EAAG,CAAH,EAAK,GAAL,EAAS,CAAT,CAA79F,EAAy+FlQ,EAAEoQ,YAAF,GAAe,CAAC,KAAD,EAAO,CAAP,EAAS,GAAT,EAAa,CAAb,CAAx/F,EAAwgGpQ,EAAEmQ,YAAF,GAAe,CAAC,KAAD,EAAO,CAAP,EAAS,IAAT,EAAc,CAAd,CAAvhG,EAAwiGnQ,CAA/iG;AAAijG,GAA/qG,EAAjS,CAAm9G+C,WAASA,OAAO+J,IAAP,GAAYoC,CAArB,GAAwBlP,EAAE8N,OAAF,GAAUoB,CAAlC;AAAoC,CAA3kH,EAA4kH,UAASlP,CAAT,EAAW4N,CAAX,EAAa;AAAC,MAAIC,IAAE,YAAU;AAAC,aAAS7N,CAAT,CAAWA,CAAX,EAAa;AAAC,WAAK0Q,KAAL,GAAW,CAAX,EAAa,KAAKC,GAAL,GAAS,CAAtB,EAAwB,KAAKC,qBAAL,GAA2B5Q,CAAnD,EAAqD,KAAK4K,MAAL,GAAY,IAAI5K,CAAJ,CAAM,KAAN,CAAjE;AAA8E,YAAOA,EAAEqP,SAAF,CAAYwB,KAAZ,GAAkB,YAAU;AAAC,WAAKH,KAAL,GAAW,KAAKC,GAAL,GAAS,CAApB;AAAsB,KAAnD,EAAoD3Q,EAAEqP,SAAF,CAAYmB,OAAZ,GAAoB,UAASxQ,CAAT,EAAW;AAAC,WAAI,KAAK0Q,KAAL,IAAY,KAAKC,GAAjB,IAAsB,KAAKE,KAAL,EAA1B,IAAyC;AAAC,YAAG,KAAKF,GAAL,GAAS3Q,CAAT,GAAW,KAAK4K,MAAL,CAAYhL,MAA1B,EAAiC;AAAC,cAAIgO,IAAE,KAAK+C,GAAX,CAAe,OAAO,KAAKA,GAAL,IAAU3Q,CAAV,EAAY4N,CAAnB;AAAqB,aAAG,KAAK8C,KAAL,GAAW,KAAd,EAAoB,KAAK9F,MAAL,CAAYvM,GAAZ,CAAgB,KAAKuM,MAAL,CAAY2C,QAAZ,CAAqB,KAAKmD,KAA1B,EAAgC,KAAKC,GAArC,CAAhB,GAA2D,KAAKA,GAAL,IAAU,KAAKD,KAA1E,EAAgF,KAAKA,KAAL,GAAW,CAA3F,CAApB,KAAqH;AAAC,cAAI7C,IAAE,IAAI,KAAK+C,qBAAT,CAA+B,KAAKhG,MAAL,CAAYhL,MAAZ,GAAmBI,CAAlD,CAAN,CAA2D6N,EAAExP,GAAF,CAAM,KAAKuM,MAAX,GAAmB,KAAKA,MAAL,GAAYiD,CAA/B;AAAiC;AAAC;AAAC,KAAxZ,EAAyZ7N,EAAEqP,SAAF,CAAYS,KAAZ,GAAkB,UAAS9P,CAAT,EAAW4N,CAAX,EAAa;AAAC,UAAIC,IAAE,KAAK2C,OAAL,CAAa5C,CAAb,CAAN,CAAsB,KAAKhD,MAAL,CAAYvM,GAAZ,CAAgB2B,EAAEuN,QAAF,CAAW,CAAX,EAAaK,CAAb,CAAhB,EAAgCC,CAAhC;AAAmC,KAAlf,EAAmf7N,EAAEqP,SAAF,CAAYQ,SAAZ,GAAsB,UAAS7P,CAAT,EAAW;AAAC,UAAI4N,IAAE,KAAK4C,OAAL,CAAaxQ,CAAb,CAAN,CAAsB,OAAO,KAAK4K,MAAL,CAAY2C,QAAZ,CAAqBK,CAArB,EAAuBA,IAAE5N,CAAzB,CAAP;AAAmC,KAA9kB,EAA+kBA,EAAEqP,SAAF,CAAYU,IAAZ,GAAiB,UAAS/P,CAAT,EAAW4N,CAAX,EAAa;AAACA,UAAE,KAAK8C,KAAP,GAAa,KAAKC,GAAlB,IAAuB1Q,QAAQqL,KAAR,CAAc,oBAAd,EAAmCsC,CAAnC,EAAqC,KAAK+C,GAA1C,EAA8C,KAAKD,KAAnD,CAAvB,EAAiF,QAAM1Q,CAAN,IAASA,EAAE3B,GAAF,CAAM,KAAKuM,MAAL,CAAY2C,QAAZ,CAAqB,KAAKmD,KAA1B,EAAgC,KAAKA,KAAL,GAAW9C,CAA3C,CAAN,CAA1F,EAA+I,KAAK8C,KAAL,IAAY9C,CAA3J;AAA6J,KAA3wB,EAA4wB5N,EAAEqP,SAAF,CAAYO,QAAZ,GAAqB,UAAS5P,CAAT,EAAW4N,CAAX,EAAa;AAAC,aAAO,KAAK,CAAL,KAASA,CAAT,KAAaA,IAAE,CAAC,CAAhB,GAAmBA,IAAE,KAAK+B,SAAL,EAAF,IAAoB1P,QAAQqL,KAAR,CAAc,4BAAd,EAA2CsC,CAA3C,CAAvC,EAAqF,IAAEA,CAAF,KAAMA,IAAE,KAAK+B,SAAL,EAAR,CAArF,EAA+G,KAAK/E,MAAL,CAAY2C,QAAZ,CAAqB,KAAKmD,KAAL,GAAW1Q,CAAhC,EAAkC,KAAK0Q,KAAL,GAAW9C,CAA7C,CAAtH;AAAsK,KAAr9B,EAAs9B5N,EAAEqP,SAAF,CAAYM,SAAZ,GAAsB,YAAU;AAAC,aAAO,KAAKgB,GAAL,GAAS,KAAKD,KAArB;AAA2B,KAAlhC,EAAmhC1Q,CAA1hC;AAA4hC,GAAnoC,EAAN,CAA4oCA,EAAE8N,OAAF,GAAUD,CAAV;AAAY,CAAlvJ,CAAtM,CAAD,C;;;;;;;;;;;;;;;;;ICAqBiD,U;AAEjB,wBAAYnV,OAAZ,EAAqBiP,MAArB,EAA6BmG,UAA7B,EAAyCzT,GAAzC,EAA8CC,WAA9C,EAA2D;AAAA;;AACvD,aAAK5B,OAAL,GAAeA,OAAf;AACA,aAAKiP,MAAL,GAAcA,MAAd;AACA,aAAKtN,GAAL,GAAWA,GAAX;AACA,aAAKC,WAAL,GAAmBA,WAAnB;AACA,aAAKyT,aAAL,GAAqB,KAAKzT,WAAL,GAAmB,EAAnB,IAAyBwT,aAAazT,GAAtC,CAArB;AACH;;;;6BAEI6I,S,EAAW;AACZ,iBAAKnJ,IAAL;;AAEA,gBAAMb,WAAW,KAAKR,OAAL,CAAaS,UAAb,EAAjB;AACAD,qBAASE,IAAT,CAAcyD,KAAd,GAAsB,CAAtB;AACA3D,qBAASK,OAAT,CAAiB,KAAKb,OAAL,CAAac,WAA9B;AACA,iBAAKN,QAAL,GAAgBA,QAAhB;;AAEA,gBAAM8U,SAAS,KAAKtV,OAAL,CAAauV,kBAAb,EAAf;AACAD,mBAAOrG,MAAP,GAAgB,KAAKA,MAArB;AACAqG,mBAAOzU,OAAP,CAAeL,QAAf;;AAEA,gBAAMgV,YAAY,KAAKC,qBAAL,CAA2BjL,aAAa,CAAxC,CAAlB;AACA8K,mBAAOlU,KAAP,CAAa,CAAb,EAAgBoU,SAAhB;AACA,iBAAKE,aAAL,GAAqBJ,MAArB;AACH;;;iCAEQhK,a,EAAeC,W,EAAa;AACjC,iBAAKlK,IAAL;AACA,gBAAMiU,SAAS,KAAKtV,OAAL,CAAauV,kBAAb,EAAf;AACAD,mBAAOrG,MAAP,GAAgB,KAAKA,MAArB;AACAqG,mBAAOzU,OAAP,CAAe,KAAKb,OAAL,CAAac,WAA5B;AACAwU,mBAAOK,IAAP,GAAc,IAAd;AACAL,mBAAOM,SAAP,GAAmB,KAAKH,qBAAL,CAA2BnK,aAA3B,CAAnB;AACA;AACAgK,mBAAOO,OAAP,GAAiB,KAAKJ,qBAAL,CAA2BlK,cAAc,CAAzC,CAAjB;AACA+J,mBAAOlU,KAAP,CAAa,CAAb,EAAgBkU,OAAOM,SAAvB;AACA,iBAAKF,aAAL,GAAqBJ,MAArB;AACH;;;kCAES/F,M,EAAQ;AACd,gBAAI,KAAK/O,QAAT,EAAmB;AACf,qBAAKA,QAAL,CAAcE,IAAd,CAAmByD,KAAnB,GAA2BoL,MAA3B;AACH;AACJ;;;+BAEM;AACH,gBAAI,KAAKmG,aAAT,EAAwB;AACpB,qBAAKA,aAAL,CAAmBrU,IAAnB;AACH;AACJ;;;8CAEqBmJ,S,EAAW;AAC7B,gBAAMsL,qBAAsB,CAACtL,YAAY,CAAb,IAAkB,KAAK6K,aAAnD;AACA,mBAAO7I,KAAK6H,GAAL,CAAS,CAAT,EAAYyB,kBAAZ,CAAP;AACH;;;;;;kBAvDgBX,U;;;;;;;;;;;;;;;ICAAY,Q,GACjB,kBAAY1N,QAAZ,EAAsBK,QAAtB,EAAgC;AAAA;;AAC5B,SAAKL,QAAL,GAAgBA,QAAhB;AACA,SAAKK,QAAL,GAAgBA,QAAhB;AACH,C;;kBAJgBqN,Q;;;;;;;;;;;;;;;ACArB;;;;;;;;;;IAEqBC,W;AAEjB,2BAAc;AAAA;;AACV,aAAKC,SAAL,GAAiB,KAAKC,mBAAL,EAAjB;AACH;;;;6CAEoBzK,K,EAAO;AACxB,gBAAIA,MAAM0K,IAAN,GAAalS,MAAb,KAAwB,CAA5B,EAA+B;AAC3B,uBAAO,IAAP;AACH;AACD;AACA,gBAAI,KAAKgS,SAAL,CAAejG,GAAf,CAAmBvE,KAAnB,CAAJ,EAA+B;AAC3B,uBAAOA,KAAP;AACH;AACD;AACAA,oBAAQA,MAAM2K,WAAN,EAAR;AATwB;AAAA;AAAA;;AAAA;AAUxB,qCAAkB,KAAKH,SAAL,CAAeI,IAAf,EAAlB,8HAAyC;AAAA,wBAA9B/T,GAA8B;;AACrC,wBAAIA,IAAI8T,WAAJ,GAAkBE,OAAlB,CAA0B7K,KAA1B,KAAoC,CAAxC,EAA2C;AACvC,+BAAOnJ,GAAP;AACH;AACJ;AACD;AAfwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAgBxB,mBAAO,IAAP;AACH;;;0CAEiBiG,I,EAAM;AACpB,mBAAO,KAAK0N,SAAL,CAAehG,GAAf,CAAmB1H,IAAnB,CAAP;AACH;;;wCAEegO,K,EAAO;AACnB,iBAAK,IAAIvS,IAAI,CAAb,EAAgBA,IAAIuS,MAAMtS,MAA1B,EAAkCD,GAAlC,EAAuC;AACnC;AACA,qBAAKiS,SAAL,CAAevT,GAAf,CAAmB6T,MAAMvS,CAAN,EAASuE,IAA5B,EAAkC,mBAASiO,UAAT,CAAoBD,MAAMvS,CAAN,CAApB,CAAlC;AACH;AACD,iBAAKyS,gBAAL;AACH;;;2CAEkB;AACf;AACA,gBAAMrK,OAAOsK,KAAKC,SAAL,8BAAoB,KAAKV,SAAzB,GAAb;AACAW,yBAAaC,OAAb,CAAqB,cAArB,EAAqCzK,IAArC;AACH;;;8CAEqB;AAClB,gBAAM0K,kBAAkBF,aAAaG,OAAb,CAAqB,cAArB,CAAxB;AACA,mBAAO,IAAI5U,GAAJ,CAAQuU,KAAKM,KAAL,CAAWF,eAAX,CAAR,CAAP;AACH;;;gCAEM1K,I,EAAM;AACT,gBAAM6K,gBAAgB,IAAI9U,GAAJ,CAAQuU,KAAKM,KAAL,CAAW5K,IAAX,CAAR,CAAtB;AACA,iBAAK6J,SAAL,GAAiB,IAAI9T,GAAJ,8BAAa,KAAK8T,SAAlB,sBAAgCgB,aAAhC,GAAjB;AACA,iBAAKR,gBAAL;AACH;;;kCAEQ;AACL,mBAAOG,aAAaG,OAAb,CAAqB,cAArB,CAAP;AACH;;;;;;kBAxDgBf,W;;;;;;;;;;;;;;;;;ICFAkB,a;AAEjB,2BAAYlR,QAAZ,EAAsB;AAAA;;AAAA;;AAClB,aAAKmR,QAAL,GAAgB9U,MAAMuG,IAAN,CAAW5C,SAASQ,sBAAT,CAAgC,UAAhC,CAAX,CAAhB;AACA,aAAK4Q,QAAL,GAAgB/U,MAAMuG,IAAN,CAAW5C,SAASQ,sBAAT,CAAgC,UAAhC,CAAX,CAAhB;;AAEA,aAAK2Q,QAAL,CAActO,OAAd,CACI,mBAAW;AACPwO,oBAAQ/N,OAAR,GAAkB,YAAM;AAAE,sBAAKpC,OAAL,CAAagQ,cAAcI,eAAd,CAA8BD,OAA9B,CAAb;AAAuD,aAAjF;AACH,SAHL;AAIH;;;;gCAMOE,W,EAAa;AACjB,gBAAMC,eAAe,SAAfA,YAAe,CAACC,KAAD,EAAQhS,EAAR,EAAe;AAChC,oBAAIgS,UAAUF,WAAd,EAA2B;AACvB9R,uBAAGG,SAAH,CAAaC,GAAb,CAAiB,QAAjB;AACH,iBAFD,MAEO;AACHJ,uBAAGG,SAAH,CAAaE,MAAb,CAAoB,QAApB;AACH;AACJ,aAND;AAOA,iBAAKqR,QAAL,CAActO,OAAd,CACI,mBAAW;AACP2O,6BAAaN,cAAcI,eAAd,CAA8BD,OAA9B,CAAb,EAAqDA,OAArD;AACH,aAHL;AAIA,iBAAKD,QAAL,CAAcvO,OAAd,CACI,uBAAe;AACX2O,6BAAaE,YAAYrF,EAAzB,EAA6BqF,WAA7B;AACH,aAHL;AAIH;;;wCApBsBL,O,EAAS;AAC5B,mBAAOA,QAAQM,YAAR,CAAqB,MAArB,EAA6B9S,SAA7B,CAAuC,CAAvC,CAAP;AACH;;;;;;kBAdgBqS,a;;;;;;;;;;;;;;;;;ICAAU,e;AAEjB,6BAAY5R,QAAZ,EAAsB;AAAA;;AAClB,YAAM6R,eAAe7R,SAASiI,aAAT,CAAuB,KAAvB,CAArB;AACA4J,qBAAajS,SAAb,CAAuBC,GAAvB,CAA2B,OAA3B;AACAG,iBAAS8R,IAAT,CAAcC,WAAd,CAA0BF,YAA1B;AACA,aAAKA,YAAL,GAAoBA,YAApB;AACH;;;;6BAEIlJ,O,EAAsC;AAAA;;AAAA,gBAA7BqJ,oBAA6B,uEAAN,IAAM;;AACvC,iBAAKH,YAAL,CAAkBI,SAAlB,GAA8BtJ,OAA9B;AACA,iBAAKkJ,YAAL,CAAkBjS,SAAlB,CAA4BC,GAA5B,CAAgC,MAAhC;AACAqS,uBAAW,YAAM;AAAE,sBAAKL,YAAL,CAAkBjS,SAAlB,CAA4BE,MAA5B,CAAmC,MAAnC;AAA6C,aAAhE,EAAkEkS,oBAAlE;AACH;;;;;;kBAbgBJ,e;;;;;;;;;;;;;;;ACArB;;;;;;;;IAEqBO,c;AAEjB,8BAAc;AAAA;;AAAA;;AACV,aAAKC,aAAL,GAAqB,4BAAkB;AACnClW,sBAAU;AACN,uBAAO,CAAC,IAAD,EAAO,MAAP,CADD;AAEN,wBAAQ,CAAC,MAAD,EAAS,MAAT,EAAiB,OAAjB;AAFF,aADyB;AAKnCE,sBAAU;AACN,iEACA,wCAACiI,QAAD,EAAWtI,oBAAX,EAAiCwR,CAAjC,EAAoC/I,SAApC;AAAA,2BAAkD,MAAKgB,aAAL,CAAmBnB,QAAnB,EAA6BtI,oBAA7B,EAAmDyI,SAAnD,CAAlD;AAAA,iBAFM;AAGN,iEACA,wCAACH,QAAD,EAAWkJ,CAAX,EAAc/I,SAAd,EAAyBzI,oBAAzB;AAAA,2BAAkD,MAAKyJ,aAAL,CAAmBnB,QAAnB,EAA6BtI,oBAA7B,EAAmDyI,SAAnD,CAAlD;AAAA,iBAJM;AAKN,oDACA,gCAACH,QAAD,EAAWkJ,CAAX,EAAc/I,SAAd;AAAA,2BAA4B,MAAKgB,aAAL,CAAmBnB,QAAnB,EAA6B,GAA7B,EAAkCG,SAAlC,CAA5B;AAAA,iBANM;AAON,6CACA,2BAACH,QAAD,EAAWtI,oBAAX;AAAA,2BAAoC,MAAKyJ,aAAL,CAAmBnB,QAAnB,EAA6BtI,oBAA7B,CAApC;AAAA,iBARM;AASN,gCACA,mBAACsI,QAAD;AAAA,2BAAc,MAAKmB,aAAL,CAAmBnB,QAAnB,CAAd;AAAA,iBAVM;AAWN,kCACA;AAAA,2BAAM,MAAK0B,sBAAL,EAAN;AAAA,iBAZM;AAaN,wBACA;AAAA,2BAAM,MAAKJ,aAAL,EAAN;AAAA,iBAdM;AAeN,kCACA,mBAAC0M,UAAD,EAAa7N,UAAb;AAAA,2BAA2B,MAAKW,YAAL,CAAkBX,UAAlB,CAA3B;AAAA,iBAhBM;AAiBN,wEACA,6CAAC8N,WAAD,EAAcC,WAAd,EAA2BjN,aAA3B,EAA0CkN,WAA1C,EAAuDjN,WAAvD;AAAA,2BAAuE,MAAKF,iBAAL,CAAuBC,aAAvB,EAAsCC,WAAtC,CAAvE;AAAA,iBAlBM;AAmBN,yCACA,uBAAC+M,WAAD,EAAcD,UAAd,EAA0B7N,SAA1B;AAAA,2BAAwC,MAAKY,gBAAL,CAAsBZ,SAAtB,CAAxC;AAAA,iBApBM;AAqBN,2BACA;AAAA,2BAAM,MAAKyB,gBAAL,EAAN;AAAA;AAtBM;AALyB,SAAlB,CAArB;AA8BH;;;;+BAEMrI,S,EAAW;AACd;AACAA,wBAAYA,UAAUT,OAAV,CAAkB,QAAlB,EAA4B,KAA5B,EAAmCgT,IAAnC,EAAZ;AACA;AACAvS,wBAAYA,UAAUT,OAAV,CAAkB,aAAlB,EAAiC,GAAjC,EAAsCgT,IAAtC,EAAZ;AACA,mBAAO,KAAKiC,aAAL,CAAmBpB,KAAnB,CAAyBpT,SAAzB,CAAP;AACH;;;;;;kBAzCgBuU,c;;;;;;;;;;;;;;;ACFrB;;;;;;;;IAEqBM,e;AAEjB,+BAAc;AAAA;;AAAA;;AACV,aAAKL,aAAL,GAAqB,4BAAkB;AACnClW,sBAAU;AACN,2BAAW,CAAC,UAAD,EAAa,OAAb,EAAsB,SAAtB,EAAiC,OAAjC,EAA0C,QAA1C,EAAoD,QAApD,EAA8D,OAA9D,EAAuE,SAAvE,EAAkF,QAAlF,EAA4F,MAA5F;AADL,aADyB;AAInCE,sBAAU;AACN,6BAAa;AAAA,2BAAM,MAAK0I,UAAL,CAAgB,IAAhB,CAAN;AAAA,iBADP;AAEN,qCAAqB;AAAA,2BAAM,MAAKA,UAAL,CAAgB,IAAhB,CAAN;AAAA;AAFf;AAJyB,SAAlB,CAArB;AASH;;;;+BAEMlH,S,EAAW;AACd,mBAAO,KAAKwU,aAAL,CAAmBpB,KAAnB,CAAyBpT,SAAzB,CAAP;AACH;;;;;;kBAhBgB6U,e;;;;;;;;;;;;;;;;;ICFAC,oB;;;6CAEW;AACxB,gBAAI,EAAEtR,OAAOuR,iBAAP,IAA4BvR,OAAOwR,uBAArC,CAAJ,EAAmE;AAC/DrO,sBAAM,iFAAN;AACA,uBAAO,KAAP;AACH;AACD,gBAAMsO,cAAcC,SAASC,IAAT,CAAcC,UAAd,CAAyB,WAAzB,CAApB;AACA,gBAAIH,WAAJ,EAAiB;AACb,uBAAO,IAAP;AACH;AACD,gBAAMI,WAAW,SAASC,IAAT,CAAcC,UAAUC,SAAxB,KAAsC,aAAaF,IAAb,CAAkBC,UAAUE,MAA5B,CAAvD;AACA,gBAAIJ,YAAYH,SAASQ,QAAT,KAAsB,QAAtC,EAAgD;AAC5C/O,sBAAM,+DAAN;AACAuO,yBAASQ,QAAT,GAAoB,QAApB;AACA,uBAAO,KAAP;AACH;AACD,mBAAO,IAAP;AACH;;;AAED,kCAAYzO,eAAZ,EAA6BK,cAA7B,EAA6CU,MAA7C,EAAqD;AAAA;;AACjD,aAAKf,eAAL,GAAuBA,eAAvB;AACA,aAAKK,cAAL,GAAsBA,cAAtB;AACA,aAAKU,MAAL,GAAcA,MAAd;AACA,aAAK2N,OAAL,GAAe,KAAf;AACH;;;;0CAEiBC,M,EAAQ;AACtB,gBAAIA,MAAJ,EAAY;AACR,qBAAK5N,MAAL,CAAYrH,GAAZ,CAAgB,MAAhB,EAAwB,qBAAxB;AACA,qBAAKkV,cAAL,GAAsB,IAAtB;AACA,qBAAKC,mBAAL,GAA2B,IAAIC,IAAJ,EAA3B;AACH,aAJD,MAIO;AACH,qBAAK/N,MAAL,CAAYrH,GAAZ,CAAgB,MAAhB,EAAwB,uBAAxB;AACA,qBAAKkV,cAAL,GAAsB,KAAtB;AACA,qBAAK5O,eAAL,CAAqBC,UAArB,CAAgC,KAAhC;AACH;AACJ;;;yCAEgB;AAAA;;AACb,gBAAM8O,cAAc,KAAKxS,OAAOuR,iBAAP,IAA4BvR,OAAOwR,uBAAxC,GAApB;AACA;AACA;AACAgB,wBAAYC,IAAZ,GAAmB,OAAnB;AACAD,wBAAYE,cAAZ,GAA6B,KAA7B;AACAF,wBAAYG,eAAZ,GAA8B,CAA9B;AACAH,wBAAYxY,KAAZ;;AAEAwY,wBAAYI,UAAZ,GAAyB,YAAM;AAC3B;AACA,oBAAI,CAAC,MAAKT,OAAV,EAAmB;AACf,0BAAKzN,cAAL;AACH;AACJ,aALD;;AAOA8N,wBAAYK,QAAZ,GAAuB,cAAM;AACzB,oBAAMC,gBAAgBC,GAAGtW,OAAH,CAAW,CAAX,CAAtB;AADyB;AAAA;AAAA;;AAAA;AAEzB,yCAA2BqW,aAA3B,8HAA0C;AAAA,4BAA/BE,YAA+B;;;AAEtC,4BAAI,CAAC,MAAKX,cAAV,EAA0B;AACtB,gCAAI,MAAK5O,eAAL,CAAqBwP,MAArB,CAA4BD,aAAaE,UAAzC,CAAJ,EAA0D;AACtD,sCAAKC,iBAAL,CAAuB,IAAvB;AACAX,4CAAYvY,IAAZ;AACA,sCAAKyK,cAAL;AACA;AACH;AACJ,yBAPD,MAOO;AACH,gCAAM0O,gBAAgB,MAAKtP,cAAL,CAAoBmP,MAApB,CAA2BD,aAAaE,UAAxC,CAAtB;AACA,gCAAIE,aAAJ,EAAmB;AACf,sCAAK5O,MAAL,CAAYrH,GAAZ,CAAgB,SAAhB,iBAAwC6V,aAAaE,UAArD,oBAA8EE,aAA9E;AACA,sCAAKD,iBAAL,CAAuB,KAAvB;AACA;AACH;;AAED,kCAAK3O,MAAL,CAAYrH,GAAZ,CAAgB,OAAhB,8BAAmD6V,aAAaE,UAAhE;AACH;AACJ;AArBwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsB5B,aAtBD;;AAwBA,iBAAKG,wBAAL,GAAgCb,WAAhC;AACH;;;wCAEe;AACZ,iBAAKL,OAAL,GAAe,IAAf;AACA,gBAAI,KAAKkB,wBAAT,EAAmC;AAC/B,qBAAKA,wBAAL,CAA8BpZ,IAA9B;AACH;AACJ;;;;;;kBAvFgBqX,oB;;;;;;;;;;;ACArB,CAAC,UAASrU,CAAT,EAAW;AAAC,MAAG,4CAAiB8N,OAAjB,MAA0B,eAAa,OAAOuI,MAAjD,EAAwDA,OAAOvI,OAAP,GAAe9N,GAAf,CAAxD,KAAgF,IAAG,IAAH,EAAyC,iCAAO,EAAP,oCAAUA,CAAV;AAAA;AAAA;AAAA,qGAAzC,KAA0D;AAAC,QAAI4N,CAAJ,CAAM,eAAa,OAAO7K,MAApB,GAA2B6K,IAAE7K,MAA7B,GAAoC,eAAa,OAAOuT,MAApB,GAA2B1I,IAAE0I,MAA7B,GAAoC,eAAa,OAAOC,IAApB,KAA2B3I,IAAE2I,IAA7B,CAAxE,EAA2G3I,EAAEtK,KAAF,GAAQtD,GAAnH;AAAuH;AAAC,CAArR,CAAsR,YAAU;AAAC,MAAIwW,MAAJ,EAAWH,MAAX,EAAkBvI,OAAlB,CAA0B,OAAO,SAAS9N,CAAT,CAAW4N,CAAX,EAAaG,CAAb,EAAeF,CAAf,EAAiB;AAAC,aAASqB,CAAT,CAAWvP,CAAX,EAAa2Q,CAAb,EAAe;AAAC,UAAG,CAACvC,EAAEpO,CAAF,CAAJ,EAAS;AAAC,YAAG,CAACiO,EAAEjO,CAAF,CAAJ,EAAS;AAAC,cAAIyO,IAAE,cAAY,OAAOqI,OAAnB,IAA4BA,OAAlC,CAA0C,IAAG,CAACnG,CAAD,IAAIlC,CAAP,EAAS,OAAO,OAAAA,CAAEzO,CAAF,EAAI,CAAC,CAAL,CAAP,CAAe,IAAGgB,CAAH,EAAK,OAAOA,EAAEhB,CAAF,EAAI,CAAC,CAAL,CAAP,CAAe,MAAM,IAAI+W,KAAJ,CAAU,yBAAuB/W,CAAvB,GAAyB,GAAnC,CAAN;AAA8C,aAAIgX,IAAE5I,EAAEpO,CAAF,IAAK,EAACmO,SAAQ,EAAT,EAAX,CAAwBF,EAAEjO,CAAF,EAAK,CAAL,EAAQuO,IAAR,CAAayI,EAAE7I,OAAf,EAAuB,UAAS9N,CAAT,EAAW;AAAC,cAAI+N,IAAEH,EAAEjO,CAAF,EAAK,CAAL,EAAQK,CAAR,CAAN,CAAiB,OAAOkP,EAAEnB,IAAEA,CAAF,GAAI/N,CAAN,CAAP;AAAgB,SAApE,EAAqE2W,CAArE,EAAuEA,EAAE7I,OAAzE,EAAiF9N,CAAjF,EAAmF4N,CAAnF,EAAqFG,CAArF,EAAuFF,CAAvF;AAA0F,cAAOE,EAAEpO,CAAF,EAAKmO,OAAZ;AAAoB,UAAI,IAAInN,IAAE,cAAY,OAAO8V,OAAnB,IAA4BA,OAAlC,EAA0C9W,IAAE,CAAhD,EAAkDA,IAAEkO,EAAEjO,MAAtD,EAA6DD,GAA7D;AAAiEuP,QAAErB,EAAElO,CAAF,CAAF;AAAjE,KAAyE,OAAOuP,CAAP;AAAS,GAAlZ,CAAmZ,EAAC,GAAE,CAAC,UAASlP,CAAT,EAAW4N,CAAX,EAAa;AAAC;AAAa,eAASG,CAAT,CAAW/N,CAAX,EAAa4N,CAAb,EAAeC,CAAf,EAAiBqB,CAAjB,EAAmB;AAAC,iBAASvO,CAAT,CAAWX,CAAX,EAAa4N,CAAb,EAAe;AAAC,cAAG,CAAC5N,CAAJ,EAAM,MAAM4N,KAAG,kBAAT;AAA4B,kBAASjO,CAAT,CAAWK,CAAX,EAAa4N,CAAb,EAAe;AAAC,eAAI,IAAIG,IAAE,CAAN,EAAQF,IAAE5R,OAAO2a,mBAAP,CAA2BhJ,CAA3B,CAAV,EAAwCsB,IAAErB,EAAEjO,MAAhD,EAAuDsP,IAAEnB,CAAzD,EAA2DA,GAA3D;AAA+D/N,cAAE6N,EAAEE,CAAF,CAAF,IAAQH,EAAEC,EAAEE,CAAF,CAAF,CAAR;AAA/D;AAA+E,kBAASuC,CAAT,CAAWtQ,CAAX,EAAa4N,CAAb,EAAe;AAAC,cAAG,oBAAiB5N,CAAjB,yCAAiBA,CAAjB,MAAoB,SAAOA,CAA3B,IAA8B,oBAAiB4N,CAAjB,yCAAiBA,CAAjB,EAA9B,IAAkD,SAAOA,CAA5D,EAA8D;AAAC,gBAAG3R,OAAO+V,IAAP,CAAYhS,CAAZ,EAAeJ,MAAf,KAAwB3D,OAAO+V,IAAP,CAAYpE,CAAZ,EAAehO,MAA1C,EAAiD,OAAM,CAAC,CAAP,CAAS,KAAI,IAAImO,CAAR,IAAa/N,CAAb;AAAe,kBAAGA,EAAE6W,cAAF,CAAiB9I,CAAjB,CAAH,EAAuB;AAAC,oBAAG,CAACH,EAAEiJ,cAAF,CAAiB9I,CAAjB,CAAJ,EAAwB,OAAM,CAAC,CAAP,CAAS,IAAG,CAACuC,EAAEtQ,EAAE+N,CAAF,CAAF,EAAOH,EAAEG,CAAF,CAAP,CAAJ,EAAiB,OAAM,CAAC,CAAP;AAAS;AAAlG,aAAkG,OAAM,CAAC,CAAP;AAAS,kBAAO/N,MAAI4N,CAAJ,GAAM,CAAC,CAAP,GAAS,CAAC,CAAjB;AAAmB,kBAASQ,CAAT,GAAY;AAAC,cAAIpO,IAAE8W,UAAU,CAAV,CAAN;AAAA,cAAmBlJ,IAAE,CAAC,QAAD,EAAU,QAAV,EAAoBqE,OAApB,SAAmC6E,UAAU,CAAV,CAAnC,KAAiD,CAAC,CAAlD,GAAoDA,UAAU,CAAV,CAApD,GAAiE,IAAtF;AAAA,cAA2F/I,IAAE,cAAY,OAAO+I,UAAU,CAAV,CAAnB,GAAgCA,UAAU,CAAV,CAAhC,GAA6C,cAAY,OAAOA,UAAU,CAAV,CAAnB,GAAgCA,UAAU,CAAV,CAAhC,GAA6C,IAAvL,CAA4LnW,EAAE,CAAC,QAAD,EAAU,QAAV,EAAmB,QAAnB,EAA4B,QAA5B,EAAsCsR,OAAtC,CAA8CjS,CAA9C,IAAiD,CAAC,CAApD,GAAuDW,EAAE,CAAC,QAAD,EAAWsR,OAAX,CAAmBjS,CAAnB,IAAsB,CAAC,CAAvB,IAA0B,SAAO4N,CAAjC,IAAoC,CAAC,QAAD,EAAU,QAAV,EAAmB,QAAnB,EAA6BqE,OAA7B,CAAqCjS,CAArC,IAAwC,CAAC,CAAzC,IAA4C,SAAO4N,CAAzF,CAAvD,EAAmJmJ,EAAE/W,CAAF,EAAK4N,CAAL,MAAUmJ,EAAE/W,CAAF,EAAK4N,CAAL,IAAQ,EAAlB,CAAnJ,EAAyK,CAAC,CAAD,KAAKmJ,EAAE/W,CAAF,EAAK4N,CAAL,EAAQqE,OAAR,CAAgBlE,CAAhB,CAAL,IAAyBgJ,EAAE/W,CAAF,EAAK4N,CAAL,EAAQ1O,IAAR,CAAa6O,CAAb,CAAlM;AAAkN,kBAAS4I,CAAT,GAAY;AAAC,cAAI3W,CAAJ;AAAA,cAAM4N,IAAEkJ,UAAU,CAAV,CAAR;AAAA,cAAqB/I,IAAE,YAAU,OAAO+I,UAAU,CAAV,CAAjB,GAA8BA,UAAU,CAAV,CAA9B,GAA2C,IAAlE;AAAA,cAAuEjJ,IAAE,cAAY,OAAOiJ,UAAU,CAAV,CAAnB,GAAgCA,UAAU,CAAV,CAAhC,GAA6C,cAAY,OAAOA,UAAU,CAAV,CAAnB,GAAgCA,UAAU,CAAV,CAAhC,GAA6C,IAAnK,CAAwKC,EAAEnJ,CAAF,EAAKG,CAAL,MAAUF,KAAG7N,IAAE+W,EAAEnJ,CAAF,EAAKG,CAAL,EAAQkE,OAAR,CAAgBpE,CAAhB,CAAF,EAAqB7N,IAAE,CAAC,CAAH,IAAM+W,EAAEnJ,CAAF,EAAKG,CAAL,EAAQiJ,MAAR,CAAehX,CAAf,EAAiB,CAAjB,CAA9B,IAAmD+W,EAAEnJ,CAAF,EAAKG,CAAL,IAAQ,EAArE;AAAyE,kBAAS0B,CAAT,CAAWzP,CAAX,EAAa4N,CAAb,EAAeG,CAAf,EAAiB;AAAC,cAAIF,CAAJ;AAAA,cAAMqB,IAAE6H,EAAE/W,CAAF,EAAK,CAAC,QAAD,EAAWiS,OAAX,CAAmBjS,CAAnB,IAAsB,CAAC,CAAvB,GAAyB4N,CAAzB,GAA2B,IAAhC,KAAuC,EAA/C;AAAA,cAAkDjN,IAAEuO,EAAEtP,MAAtD,CAA6D,KAAIiO,IAAE,CAAN,EAAQlN,IAAEkN,CAAV,EAAYA,GAAZ;AAAgBqB,cAAErB,CAAF,EAAKK,IAAL,CAAU+I,CAAV,EAAYrJ,CAAZ,EAAcG,CAAd;AAAhB;AAAiC,kBAASjD,CAAT,GAAY;AAAC,mBAAS8C,CAAT,CAAW5N,CAAX,EAAa;AAAC,gBAAI+N,CAAJ;AAAA,gBAAMF,IAAE7P,MAAMkZ,OAAN,CAAclX,CAAd,IAAiB,EAAjB,GAAoB,EAA5B,CAA+B,KAAI+N,CAAJ,IAAS/N,CAAT;AAAW,kCAAiBA,EAAE+N,CAAF,CAAjB,IAAsBF,EAAEE,CAAF,IAAKH,EAAE5N,EAAE+N,CAAF,CAAF,CAA3B,GAAmC,cAAY,OAAO/N,EAAE+N,CAAF,CAAnB,IAAyB,QAAMA,EAAE,CAAF,CAA/B,KAAsCF,EAAEE,CAAF,IAAK/N,EAAE+N,CAAF,CAA3C,CAAnC;AAAX,aAA+F,OAAOF,CAAP;AAAS,kBAAOwE,KAAKC,SAAL,CAAe1E,EAAE5N,CAAF,CAAf,CAAP;AAA4B,kBAAS1B,CAAT,CAAWsP,CAAX,EAAa;AAAC,cAAIG,CAAJ,CAAM,YAAU,OAAOH,CAAjB,KAAqBA,IAAEyE,KAAKM,KAAL,CAAW/E,CAAX,CAAvB,EAAsC,KAAIG,CAAJ,IAASH,CAAT;AAAWqJ,cAAElJ,CAAF,EAAIH,EAAEG,CAAF,CAAJ,GAAU0B,EAAE,QAAF,EAAW1B,CAAX,CAAV;AAAX,WAAmCkJ,EAAEE,GAAF,GAAMnX,EAAEJ,MAAR;AAAe,kBAASwF,CAAT,CAAWpF,CAAX,EAAa;AAACsQ,YAAE1P,EAAEZ,CAAF,CAAF,EAAOqQ,EAAErQ,CAAF,EAAI,YAAU,CAAE,CAAhB,EAAiB,CAAC,CAAlB,CAAP,KAA8ByP,EAAE,QAAF,EAAWzP,CAAX,CAA9B,CAA4C,KAAI,IAAI4N,IAAE,CAAN,EAAQG,IAAEqJ,EAAEpX,CAAF,KAAM,EAAhB,EAAmB6N,IAAEE,EAAEnO,MAA3B,EAAkCiO,IAAED,CAApC,EAAsCA,GAAtC;AAA0C,mBAAOyJ,EAAEtJ,EAAEH,CAAF,CAAF,CAAP,EAAe0J,EAAEtX,CAAF,EAAK4N,CAAL,EAAQtJ,OAAR,CAAgB,QAAhB,EAAyByJ,EAAEH,CAAF,CAAzB,CAAf;AAA1C,WAAwFqJ,EAAEM,MAAF,IAAUN,EAAEM,MAAF,CAASjT,OAAT,CAAiB,QAAjB,EAA0B2S,EAAExT,IAA5B,CAAV;AAA4C,kBAAS0K,CAAT,CAAWnO,CAAX,EAAa;AAAC,mBAAS+N,CAAT,CAAWH,CAAX,EAAa;AAAC,mBAAO,UAASG,CAAT,EAAWF,CAAX,EAAa;AAAC,qBAAOD,EAAE4J,eAAF,CAAkBzJ,CAAlB,MAAuBH,EAAE4J,eAAF,CAAkBzJ,CAAlB,IAAqB,EAArB,EAAwBH,EAAE6J,kBAAF,CAAqB1J,CAArB,IAAwB,EAAvE,GAA2E,CAAC,CAAD,KAAKH,EAAE4J,eAAF,CAAkBzJ,CAAlB,EAAqBkE,OAArB,CAA6BjS,CAA7B,CAAL,KAAuC4N,EAAE4J,eAAF,CAAkBzJ,CAAlB,EAAqB7O,IAArB,CAA0Bc,CAA1B,GAA6B4N,EAAE6J,kBAAF,CAAqB1J,CAArB,EAAwB7O,IAAxB,CAA6B+X,CAA7B,CAApE,CAA3E,EAAgLrJ,EAAEG,CAAF,EAAIF,CAAJ,EAAM,CAAC,CAAP,CAAvL;AAAiM,aAAtN;AAAuN,eAAIqB,IAAEnB,EAAEkJ,CAAF,CAAN,CAAW,OAAOS,EAAExI,CAAF,GAAKrB,MAAIqB,EAAEqI,MAAF,GAASxJ,EAAEF,CAAF,CAAb,CAAL,EAAwBqB,EAAEyI,IAAF,GAAO5J,EAAEH,KAAGqJ,CAAL,CAA/B,EAAuC/H,CAA9C;AAAgD,kBAAS0I,CAAT,CAAW5X,CAAX,EAAa;AAAC,cAAI4N,CAAJ,EAAMG,CAAN,CAAQ,IAAG/N,KAAG,oBAAiBA,CAAjB,yCAAiBA,CAAjB,EAAN,EAAyB;AAAC+N,gBAAE,EAAF,CAAK,KAAIH,CAAJ,IAAS5N,CAAT;AAAW+N,gBAAEH,CAAF,IAAK5N,EAAE4N,CAAF,CAAL;AAAX;AAAqB,WAApD,MAAyDG,IAAE/N,CAAF,CAAI,OAAO+N,CAAP;AAAS,kBAASsC,CAAT,CAAWzC,CAAX,EAAaG,CAAb,EAAeF,CAAf,EAAiB;AAAC,cAAIqB,IAAElP,EAAE4N,CAAF,CAAN,CAAW,OAAM,cAAY,OAAOsB,CAAnB,IAAsBA,IAAEA,EAAEhB,IAAF,CAAOC,EAAEP,CAAF,CAAP,EAAYG,CAAZ,CAAF,EAAiBF,MAAIjN,EAAEgN,CAAF,IAAK,KAAK,CAAL,KAASsB,CAAT,GAAWA,CAAX,GAAa0I,EAAE1I,CAAF,CAAtB,CAAvC,IAAoErB,MAAIjN,EAAEgN,CAAF,IAAKsB,CAAT,CAApE,EAAgFA,CAAtF;AAAwF,kBAAS2I,CAAT,CAAW7X,CAAX,EAAa6N,CAAb,EAAeqB,CAAf,EAAiB;AAAC,cAAIvO,IAAE0P,EAAErQ,CAAF,EAAI6N,CAAJ,EAAMqB,CAAN,CAAN,CAAe,OAAOvO,KAAG,oBAAiBA,CAAjB,yCAAiBA,CAAjB,EAAH,GAAsB0W,EAAErX,CAAF,IAAKqX,EAAErX,CAAF,CAAL,GAAUqX,EAAErX,CAAF,IAAK+N,EAAEpN,CAAF,EAAIiN,KAAGqJ,CAAP,EAASA,CAAT,EAAWjX,CAAX,CAArC,GAAmDW,CAA1D;AAA4D,kBAASmX,CAAT,CAAWlK,CAAX,EAAaG,CAAb,EAAe;AAAC,cAAIF,IAAEwC,EAAEzC,CAAF,CAAN,CAAW,cAAY,OAAO5N,EAAE4N,CAAF,CAAnB,GAAwB5N,EAAE4N,CAAF,EAAKM,IAAL,CAAUC,EAAEP,CAAF,CAAV,EAAeG,CAAf,CAAxB,IAA2C/N,EAAE4N,CAAF,IAAKG,CAAL,EAAOA,KAAG,oBAAiBA,CAAjB,yCAAiBA,CAAjB,EAAH,KAAwB,OAAOnN,EAAEgN,CAAF,CAAP,EAAY,OAAOyJ,EAAEzJ,CAAF,CAA3C,CAAlD,GAAoGC,MAAIE,CAAJ,IAAO0B,EAAE,QAAF,EAAW7B,CAAX,CAA3G;AAAyH,kBAASmK,CAAT,CAAW/X,CAAX,EAAa4N,CAAb,EAAeG,CAAf,EAAiB;AAAC,iBAAM,CAAC,KAAK,CAAL,KAASH,CAAT,IAAY,cAAY,OAAOA,CAA/B,GAAiCiK,CAAjC,GAAmCC,CAApC,EAAuC9X,CAAvC,EAAyC4N,CAAzC,EAA2CG,CAA3C,CAAN;AAAoD,kBAAS2J,CAAT,CAAW3J,CAAX,EAAa;AAAC,mBAASpN,CAAT,CAAWiN,CAAX,EAAaC,CAAb,EAAe;AAAC,mBAAO,YAAU;AAAC,kBAAIqB,IAAE,GAAGtB,CAAH,EAAMoK,KAAN,CAAYhY,CAAZ,EAAc8W,SAAd,CAAN,CAA+B,OAAO,KAAKK,GAAL,GAAS,KAAKc,MAAL,CAAYrY,MAArB,EAA4BgB,IAAE,EAA9B,EAAiCyW,IAAE,EAAnC,EAAsCxJ,EAAEmK,KAAF,CAAQ,IAAR,EAAalB,SAAb,CAAtC,EAA8D/I,EAAEwJ,MAAF,CAASjT,OAAT,CAAiB,QAAjB,EAA0ByJ,EAAEtK,IAA5B,CAA9D,EAAgGyL,CAAvG;AAAyG,aAA1J;AAA2J,aAAEnB,CAAF,EAAI,EAACkK,QAAOjY,CAAR,EAAUuX,QAAO1J,KAAG,IAApB,EAAyB8J,MAAK/J,KAAGG,CAAjC,EAAmCtK,MAAK,KAAK,CAAL,KAASyL,CAAT,GAAW,IAAX,GAAgBA,CAAxD,EAA0D1L,IAAG4K,CAA7D,EAA+D8J,KAAIvB,CAAnE,EAAqErS,SAAQmL,CAA7E,EAA+E0I,QAAOrN,CAAtF,EAAwFsN,UAAS9Z,CAAjG,EAAmGkZ,iBAAgBJ,CAAnH,EAAqHK,oBAAmBH,CAAxI,EAAJ,GAAgJtZ,MAAMkZ,OAAN,CAAclX,CAAd,KAAkBL,EAAEoO,CAAF,EAAI,EAACoJ,KAAInX,EAAEJ,MAAP,EAAcyY,KAAI1X,EAAE,KAAF,EAAQ,YAAU;AAAC8O,gBAAE,QAAF,EAAW,KAAK0H,GAAhB,EAAoB,CAApB;AAAuB,aAA1C,CAAlB,EAA8DjY,MAAKyB,EAAE,MAAF,EAAS,YAAU;AAAC8O,gBAAE,QAAF,EAAW,KAAK0H,GAAL,GAAS,CAApB,EAAsB,CAAtB;AAAyB,aAA7C,CAAnE,EAAkHmB,SAAQ3X,EAAE,SAAF,EAAY,YAAU;AAAC8O,gBAAE,QAAF,EAAW,CAAX,EAAa,KAAK0H,GAAlB,GAAuB1H,EAAE,QAAF,EAAW,CAAX,EAAa,KAAK0H,GAAlB,CAAvB;AAA8C,aAArE,CAA1H,EAAiMoB,OAAM5X,EAAE,OAAF,EAAU,YAAU;AAAC8O,gBAAE,QAAF,EAAW,CAAX,EAAa,CAAb;AAAgB,aAArC,CAAvM,EAA8O+I,SAAQ7X,EAAE,SAAF,EAAY,YAAU;AAAC8O,gBAAE,QAAF,EAAW,CAAX,EAAa,CAAb;AAAgB,aAAvC,CAAtP,EAA+R/O,MAAKC,EAAE,MAAF,EAAS,YAAU;AAAC8O,gBAAE,QAAF,EAAW,CAAX,EAAa,KAAK0H,GAAlB,GAAuB1H,EAAE,QAAF,EAAW,CAAX,EAAa,KAAK0H,GAAlB,CAAvB;AAA8C,aAAlE,CAApS,EAAwWH,QAAOrW,EAAE,QAAF,EAAW,YAAU;AAACmW,wBAAU,CAAV,KAAcrH,EAAE,QAAF,EAAWqH,UAAU,CAAV,CAAX,EAAwBA,UAAU,CAAV,CAAxB,CAAd,EAAoDA,UAAUlX,MAAV,GAAiB,CAAjB,IAAoB6P,EAAE,QAAF,EAAWqH,UAAU,CAAV,CAAX,EAAwBA,UAAUlX,MAAV,GAAiB,CAAzC,CAAxE;AAAoH,aAA1I,CAA/W,EAAJ,CAAlK;AAAmqB,aAAImX,IAAE,EAAC0B,QAAO,EAAR,EAAWC,QAAO,EAAlB,EAAqBC,QAAO,EAA5B,EAA+B,UAAS,EAAxC,EAAN;AAAA,YAAkDvB,IAAE,EAApD;AAAA,YAAuDE,IAAE,EAAzD;AAAA,YAA4D1W,IAAE,EAA9D;AAAA,YAAiEyW,IAAE,EAAnE,CAAsEjJ,EAAE,QAAF,EAAWhJ,CAAX,EAAc,IAAI6R,IAAE,SAAFA,CAAE,GAAU;AAAC,iBAAOc,EAAEC,KAAF,CAAQ,IAAR,EAAalB,SAAb,CAAP;AAA+B,SAAhD,CAAiD,OAAOY,EAAET,CAAF,GAAKA,CAAZ;AAAc,2BAAiBrJ,CAAjB,yCAAiBA,CAAjB,OAAqBA,EAAEE,OAAF,GAAUC,CAA/B;AAAkC,KAAhgH,EAAigH,EAAjgH,CAAH,EAAwgH,GAAE,CAAC,UAAS/N,CAAT,EAAW4N,CAAX,EAAa;AAAC,UAAIG,IAAE,uBAAN,CAA8BH,EAAEE,OAAF,GAAU,CAAC,UAAS9N,CAAT,EAAW4N,CAAX,EAAa;AAAC,YAAIC,IAAE7N,EAAEsT,YAAF,CAAe1F,CAAf,EAAkBgL,KAAlB,CAAwB7K,CAAxB,CAAN,CAAiC,OAAM,YAAUH,CAAV,IAAaC,CAAb,GAAe,EAACpK,MAAKoK,EAAE,CAAF,CAAN,EAAWgL,MAAK,cAAS7Y,CAAT,EAAW4N,CAAX,EAAaG,CAAb,EAAeF,CAAf,EAAiB;AAAC,qBAASqB,CAAT,GAAY;AAAC,kBAAIA,IAAE5L,MAAMwV,IAAN,CAAW/K,CAAX,EAAaF,CAAb,CAAN,CAAsB7N,EAAE4N,CAAF,MAAOsB,CAAP,KAAWlP,EAAE4N,CAAF,IAAKsB,KAAG,EAAnB;AAAuB,iBAAIvO,IAAE,CAAC,MAAD,EAAQ,UAAR,EAAoBsR,OAApB,CAA4BjS,EAAEH,IAA9B,IAAoC,CAAC,CAArC,GAAuC,OAAvC,GAA+C,QAArD,CAA8DG,EAAE+Y,gBAAF,CAAmBpY,CAAnB,EAAqB,YAAU;AAACoN,gBAAEF,CAAF,EAAI7N,EAAE4N,CAAF,CAAJ;AAAU,aAA1C,GAA4CG,EAAEvK,EAAF,CAAK,QAAL,EAAcqK,CAAd,EAAgBqB,CAAhB,CAA5C,EAA+DA,GAA/D;AAAmE,WAA7N,EAAf,GAA8O,KAAK,CAAzP;AAA2P,OAA3S,EAA4S,UAASlP,CAAT,EAAW4N,CAAX,EAAa;AAAC,YAAIC,IAAE7N,EAAEsT,YAAF,CAAe1F,CAAf,EAAkBgL,KAAlB,CAAwB7K,CAAxB,CAAN,CAAiC,OAAM,qBAAmBH,CAAnB,IAAsBC,CAAtB,GAAwB,EAACpK,MAAKoK,EAAE,CAAF,CAAN,EAAWgL,MAAK,cAAS7Y,CAAT,EAAW4N,CAAX,EAAaG,CAAb,EAAeF,CAAf,EAAiB;AAAC,qBAASqB,CAAT,GAAY;AAAC,kBAAG,aAAWlP,EAAEgZ,QAAhB,EAAyB;AAAC,oBAAIpL,IAAEqL,QAAQhH,OAAR,CAAgBjS,EAAEkZ,UAAlB,CAAN,CAAoC,IAAGC,gBAAgBvL,CAAhB,CAAH,EAAsB,OAAO,KAAI,IAAIsB,IAAE,CAAN,EAAQvO,IAAEyY,cAAcxL,CAAd,EAAiBhO,MAA/B,EAAsCe,IAAEuO,CAAxC,EAA0CA,GAA1C;AAA8CkK,gCAAcxL,CAAd,EAAiBsB,CAAjB,EAAoBmK,QAApB,GAA6BC,sBAAsB1L,CAAtB,EAAyBsB,CAAzB,EAA4BrB,CAA5B,CAA7B;AAA9C;AAA0G,eAArM,MAA0M7N,EAAEqZ,QAAF,GAAWtL,EAAEF,CAAF,CAAX;AAAgB,0BAAW7N,EAAEgZ,QAAb,GAAsBnF,WAAW,YAAU;AAAC,kBAAIjG,IAAEqL,QAAQhH,OAAR,CAAgBjS,EAAEkZ,UAAlB,CAAN,CAAoC,CAAC,CAAD,KAAKtL,CAAL,KAASA,IAAEqL,QAAQ/Z,IAAR,CAAac,EAAEkZ,UAAf,IAA2B,CAA7B,EAA+BE,cAAcla,IAAd,CAAmB,EAAnB,CAA/B,EAAsDoa,sBAAsBpa,IAAtB,CAA2B,EAA3B,CAAtD,EAAqFc,EAAEkZ,UAAF,CAAaH,gBAAb,CAA8B,QAA9B,EAAuC,YAAU;AAACI,gCAAgBvL,CAAhB,IAAmB,CAAC,CAApB,CAAsB,KAAI,IAAI5N,IAAE,CAAN,EAAQ+N,IAAEqL,cAAcxL,CAAd,EAAiBhO,MAA/B,EAAsCmO,IAAE/N,CAAxC,EAA0CA,GAA1C;AAA8CsZ,wCAAsB1L,CAAtB,EAAyB5N,CAAzB,EAA4B6N,CAA5B,EAA8BuL,cAAcxL,CAAd,EAAiB5N,CAAjB,EAAoBqZ,QAAlD;AAA9C,iBAA0GF,gBAAgBvL,CAAhB,IAAmB,CAAC,CAApB;AAAsB,eAAxM,CAA9F,GAAySwL,cAAcxL,CAAd,EAAiB1O,IAAjB,CAAsBc,CAAtB,CAAzS,EAAkUsZ,sBAAsB1L,CAAtB,EAAyB1O,IAAzB,CAA8B6O,CAA9B,CAAlU;AAAmW,aAA7Z,EAA8Z,CAA9Z,CAAtB,GAAub/N,EAAE+Y,gBAAF,CAAmB,QAAnB,EAA4B,YAAU;AAAChL,gBAAEF,CAAF,EAAI,KAAKwL,QAAT;AAAmB,aAA1D,CAAvb,EAAmftL,EAAEvK,EAAF,CAAK,QAAL,EAAcqK,CAAd,EAAgBqB,CAAhB,CAAnf,EAAsgB2E,WAAW3E,CAAX,CAAtgB;AAAohB,WAA7xB,EAAxB,GAAuzB,KAAK,CAAl0B;AAAo0B,OAA/pC,EAAgqC,UAASlP,CAAT,EAAW4N,CAAX,EAAa;AAAC,YAAIC,IAAE7N,EAAEsT,YAAF,CAAe1F,CAAf,EAAkBgL,KAAlB,CAAwB7K,CAAxB,CAAN,CAAiC,OAAM,oBAAkBH,CAAlB,IAAqBC,CAArB,GAAuB,EAACpK,MAAKoK,EAAE,CAAF,CAAN,EAAWgL,MAAK,cAAS7Y,CAAT,EAAW4N,CAAX,EAAaG,CAAb,EAAeF,CAAf,EAAiB;AAAC,qBAASqB,CAAT,GAAY;AAAC,kBAAGlP,EAAEkE,IAAL,EAAU;AAAC,oBAAGqV,oBAAoBvZ,EAAEkE,IAAtB,CAAH,EAA+B,OAAO,KAAI,IAAI0J,IAAE,CAAN,EAAQsB,IAAEsK,YAAYxZ,EAAEkE,IAAd,EAAoB,CAApB,EAAuBtE,MAArC,EAA4CsP,IAAEtB,CAA9C,EAAgDA,GAAhD;AAAoD4L,8BAAYxZ,EAAEkE,IAAd,EAAoB,CAApB,EAAuB0J,CAAvB,EAA0B6L,OAA1B,GAAkCD,YAAYxZ,EAAEkE,IAAd,EAAoB,CAApB,EAAuB0J,CAAvB,EAA0BC,CAA1B,CAAlC;AAApD;AAAmH,eAApK,MAAyK7N,EAAEyZ,OAAF,GAAU1L,EAAEF,CAAF,CAAV;AAAe,sBAASlN,CAAT,GAAY;AAAC,0BAAUX,EAAEH,IAAZ,IAAkBG,EAAEkE,IAApB,KAA2BsV,YAAYxZ,EAAEkE,IAAd,MAAsBsV,YAAYxZ,EAAEkE,IAAd,IAAoB,CAAC,EAAD,EAAI,EAAJ,CAA1C,GAAmDsV,YAAYxZ,EAAEkE,IAAd,EAAoB,CAApB,EAAuBhF,IAAvB,CAA4Bc,CAA5B,CAAnD,EAAkFwZ,YAAYxZ,EAAEkE,IAAd,EAAoB,CAApB,EAAuBhF,IAAvB,CAA4B6O,CAA5B,CAA7G,GAA6I/N,EAAE+Y,gBAAF,CAAmB,OAAnB,EAA2B,YAAU;AAAC,oBAAG,YAAU/Y,EAAEH,IAAZ,IAAkBG,EAAEkE,IAAvB,EAA4B;AAACqV,sCAAoBvZ,EAAEkE,IAAtB,IAA4B,CAAC,CAA7B,CAA+B,KAAI,IAAI0J,IAAE,CAAN,EAAQsB,IAAEsK,YAAYxZ,EAAEkE,IAAd,EAAoB,CAApB,EAAuBtE,MAArC,EAA4CsP,IAAEtB,CAA9C,EAAgDA,GAAhD;AAAoD4L,gCAAYxZ,EAAEkE,IAAd,EAAoB,CAApB,EAAuB0J,CAAvB,EAA0BC,CAA1B,EAA4B2L,YAAYxZ,EAAEkE,IAAd,EAAoB,CAApB,EAAuB0J,CAAvB,EAA0B6L,OAAtD;AAApD,mBAAmHF,oBAAoBvZ,EAAEkE,IAAtB,IAA4B,CAAC,CAA7B;AAA+B,iBAA9M,MAAmN6J,EAAEF,CAAF,EAAI7N,EAAEyZ,OAAN;AAAe,eAAxQ,CAA7I,EAAuZ1L,EAAEvK,EAAF,CAAK,QAAL,EAAcqK,CAAd,EAAgBqB,CAAhB,CAAvZ,EAA0a2E,WAAW3E,CAAX,CAA1a;AAAwb,wBAAWvO,CAAX;AAAc,WAA1rB,EAAvB,GAAmtB,KAAK,CAA9tB;AAAguB,OAA/6D,EAAg7D,UAASX,CAAT,EAAW4N,CAAX,EAAa;AAAC,YAAIC,IAAE7N,EAAEsT,YAAF,CAAe1F,CAAf,EAAkBgL,KAAlB,CAAwB7K,CAAxB,CAAN,CAAiC,OAAOF,IAAE,EAACpK,MAAKoK,EAAE,CAAF,CAAN,EAAWgL,MAAK,cAAS7Y,CAAT,EAAW4N,CAAX,EAAaG,CAAb,EAAeF,CAAf,EAAiB;AAAC,qBAASqB,CAAT,GAAY;AAAC,kBAAIA,IAAE5L,MAAMwV,IAAN,CAAW/K,CAAX,EAAaF,CAAb,CAAN,CAAsB,OAAOqB,IAAElP,EAAE0Z,YAAF,CAAe9L,CAAf,EAAiBsB,CAAjB,CAAF,GAAsBlP,EAAE2Z,eAAF,CAAkB/L,CAAlB,CAA7B;AAAkD,eAAEpK,EAAF,CAAK,QAAL,EAAcqK,CAAd,EAAgBqB,CAAhB,GAAmBA,GAAnB;AAAuB,WAA9I,EAAF,GAAkJ,KAAK,CAA9J;AAAgK,OAA/nE,EAAgoE,UAASlP,CAAT,EAAW4N,CAAX,EAAa;AAAC,eAAM,EAACnK,MAAKzD,EAAEsT,YAAF,CAAe1F,CAAf,CAAN,EAAwBiL,MAAK,cAAS7Y,CAAT,EAAW4N,CAAX,EAAaG,CAAb,EAAeF,CAAf,EAAiB;AAAC,qBAASqB,CAAT,GAAY;AAAClP,gBAAE0Z,YAAF,CAAe/Y,CAAf,EAAiB2C,MAAMsW,SAAN,CAAgB/L,CAAhB,EAAkBE,CAAlB,EAAoBmB,CAApB,CAAjB;AAAyC,iBAAIvO,IAAEiN,EAAE9O,OAAF,CAAU,QAAV,EAAmB,EAAnB,CAAN,CAA6BoQ;AAAI,WAAtI,EAAN;AAA8I,OAA5xE,CAAV;AAAwyE,KAAr1E,EAAs1E,EAAt1E,CAA1gH,EAAo2L,GAAE,CAAC,UAAS2K,OAAT,EAAiBxD,MAAjB,EAAwBvI,OAAxB,EAAgC;AAACuI,aAAOvI,OAAP,GAAe,CAAC,UAAS9N,CAAT,EAAW;AAAC,eAAOA,EAAE4T,SAAF,CAAYgF,KAAZ,CAAkB,aAAlB,IAAiC,EAACnV,MAAKzD,EAAE4T,SAAR,EAAkBiF,MAAK,cAAS7Y,CAAT,EAAW4N,CAAX,EAAaG,CAAb,EAAe;AAAC,gBAAIF,IAAElM,SAASmY,cAAT,CAAwBxW,MAAMwV,IAAN,CAAWlL,CAAX,EAAaG,CAAb,KAAiB,EAAzC,CAAN,CAAmD/N,EAAE0T,WAAF,CAAc7F,CAAd,GAAiBD,EAAEpK,EAAF,CAAK,QAAL,EAAcuK,CAAd,EAAgB,YAAU;AAACF,gBAAEkM,IAAF,GAAOzW,MAAMwV,IAAN,CAAWlL,CAAX,EAAaG,CAAb,KAAiB,EAAxB;AAA2B,aAAtD,CAAjB;AAAyE,WAAnK,EAAjC,GAAsM,KAAK,CAAlN;AAAoN,OAAjO,EAAkO,UAAS/N,CAAT,EAAW;AAAC,YAAI4N,IAAE5N,EAAE4T,SAAF,CAAYgF,KAAZ,CAAkB,gBAAlB,CAAN,CAA0C,OAAOhL,IAAE,EAACnK,MAAKmK,EAAE,CAAF,CAAN,EAAWiL,MAAK,cAAS7Y,CAAT,EAAW4N,CAAX,EAAaG,CAAb,EAAe;AAAC,qBAASF,CAAT,GAAY;AAAC,mBAAI,IAAI7N,CAAJ,EAAM6N,IAAElM,SAASqY,sBAAT,EAAR,EAA0Cra,IAAEgC,SAASiI,aAAT,CAAuB,MAAvB,CAAhD,EAA+EjJ,CAA/E;AAAkFuO,kBAAEgK,UAAF,CAAae,WAAb,CAAyB/K,EAAEgL,eAA3B,GAA4CvZ,GAA5C;AAAlF,eAAkI,KAAIhB,EAAEiU,SAAF,GAAYhG,EAAEG,CAAF,KAAM,EAAlB,EAAqBpN,IAAEhB,EAAEwa,UAAF,CAAava,MAApC,EAA2CI,IAAE,CAAjD,EAAmDW,IAAEX,CAArD,EAAuDA,GAAvD;AAA2D6N,kBAAE6F,WAAF,CAAc/T,EAAEwa,UAAF,CAAa,CAAb,CAAd;AAA3D,eAA0FjL,EAAEgK,UAAF,CAAakB,YAAb,CAA0BvM,CAA1B,EAA4BqB,CAA5B;AAA+B,iBAAIA,IAAEvN,SAAS0Y,aAAT,CAAuB,EAAvB,CAAN;AAAA,gBAAiC1Z,IAAE,CAAnC,CAAqCX,EAAE0T,WAAF,CAAcxE,CAAd,GAAiBtB,EAAEpK,EAAF,CAAK,QAAL,EAAcuK,CAAd,EAAgBF,CAAhB,CAAjB,EAAoCA,GAApC;AAAwC,WAArX,EAAF,GAAyX,KAAK,CAArY;AAAuY,OAA/pB,EAAgqB,UAAS7N,CAAT,EAAW;AAAC,YAAI4N,IAAE5N,EAAE4T,SAAF,CAAYgF,KAAZ,CAAkB,oCAAlB,CAAN,CAA8D,OAAOhL,IAAE,EAACnK,MAAKmK,CAAN,EAAQiL,MAAK,cAAS7Y,CAAT,EAAW4N,CAAX,EAAaG,CAAb,EAAe;AAAC,qBAASF,CAAT,GAAY;AAACqB,oBAAIA,IAAEvO,EAAEuY,UAAR,GAAoB5V,MAAMgX,MAAN,CAAapL,CAAb,EAAenB,EAAE,CAAF,IAAKH,EAAEG,EAAE,CAAF,CAAF,CAAL,GAAaA,EAAE,CAAF,KAAMA,EAAE,CAAF,CAAlC,EAAuCH,CAAvC,CAApB;AAA8D,iBAAIsB,CAAJ;AAAA,gBAAMvO,IAAEgB,SAAS0Y,aAAT,CAAuB,EAAvB,CAAR,CAAmCtM,EAAE,CAAF,KAAMH,EAAEpK,EAAF,CAAK,QAAL,EAAcuK,EAAE,CAAF,CAAd,EAAmBF,CAAnB,CAAN,EAA4B7N,EAAE0T,WAAF,CAAc/S,CAAd,CAA5B,EAA6CkT,WAAWhG,CAAX,CAA7C;AAA2D,WAAtM,EAAF,GAA0M,KAAK,CAAtN;AAAwN,OAAl8B,EAAm8B,UAAS0M,IAAT,EAAc;AAAC,YAAI3B,QAAM2B,KAAK3G,SAAL,CAAegF,KAAf,CAAqB,gBAArB,CAAV,CAAiD,OAAOA,QAAM,EAAC4B,OAAM5B,MAAM,CAAN,CAAP,EAAgBC,MAAK,cAAS4B,QAAT,EAAkBC,KAAlB,EAAwBjX,IAAxB,EAA6BkX,QAA7B,EAAsC;AAAC,qBAASjC,MAAT,CAAgB/Y,CAAhB,EAAkB;AAAC,qBAAO,YAAU;AAAC,qBAAI,IAAI4X,SAAOqD,OAAO1B,UAAlB,EAA6B2B,cAAY,GAAG5I,OAAH,CAAW/D,IAAX,CAAgBqJ,OAAO4C,UAAvB,EAAkCS,MAAlC,CAAzC,EAAmFE,MAAID,cAAYjb,MAAZ,GAAmBD,IAAEob,SAA5G,EAAsHC,OAAKD,SAA3H,EAAqIE,MAAI,QAAMxX,IAAN,GAAWiX,KAAX,GAAiBA,MAAMjX,IAAN,CAA9J,EAA0KuX,MAA1K;AAAkLzD,yBAAO0C,WAAP,CAAmB1C,OAAO4C,UAAP,CAAkBW,GAAlB,CAAnB;AAAlL,iBAA6NvD,OAAO6C,YAAP,CAAoBc,KAAKP,WAAS,UAAd,CAApB,EAA8CpD,OAAO4C,UAAP,CAAkBW,GAAlB,CAA9C;AAAsE,eAArT;AAAsT,sBAASnC,MAAT,CAAgBrY,KAAhB,EAAsB6a,KAAtB,EAA4B;AAAC,kBAAI5D,SAAOqD,OAAO1B,UAAlB;AAAA,kBAA6B2B,cAAY,GAAG5I,OAAH,CAAW/D,IAAX,CAAgBqJ,OAAO4C,UAAvB,EAAkCS,MAAlC,CAAzC;AAAA,kBAAmFE,MAAID,cAAYjb,MAAZ,GAAmBU,QAAMya,SAAhH;AAAA,kBAA0HC,OAAKG,QAAMJ,SAArI;AAAA,kBAA+Ipb,CAA/I;AAAA,kBAAiJ8a,QAAjJ;AAAA,kBAA0JQ,MAAI,QAAMxX,IAAN,GAAWiX,KAAX,GAAiBA,MAAMjX,IAAN,CAA/K,CAA2L,KAAI9D,IAAE,CAAF,EAAI8a,WAAS9Y,SAASqY,sBAAT,EAAjB,EAAmDmB,QAAMxb,CAAzD,EAA2DA,GAA3D;AAA+D8a,yBAAS/G,WAAT,CAAqBwH,KAAKP,WAAS,kBAAd,CAArB;AAA/D,eAAuHpD,OAAO6C,YAAP,CAAoBK,QAApB,EAA6BlD,OAAO4C,UAAP,CAAkBW,GAAlB,CAA7B,GAAqDlb,UAAQob,IAA7D;AAAkE,sBAASI,GAAT,CAAapb,CAAb,EAAe4N,CAAf,EAAiB;AAAC,kBAAIG,IAAE6M,OAAO1B,UAAb;AAAA,kBAAwBrL,IAAE,GAAGoE,OAAH,CAAW/D,IAAX,CAAgBH,EAAEoM,UAAlB,EAA6BS,MAA7B,CAA1B;AAAA,kBAA+D1L,IAAErB,IAAEjO,MAAF,GAASI,IAAE+a,SAA5E;AAAA,kBAAsFpa,IAAEiN,IAAEmN,SAA1F,CAAoG,KAAInb,UAAQe,CAAZ,EAAcA,GAAd;AAAmBoN,kBAAEkM,WAAF,CAAclM,EAAEoM,UAAF,CAAajL,CAAb,CAAd;AAAnB;AAAkD,sBAASuJ,MAAT,GAAiB;AAAC,mBAAI,IAAI4C,MAAI,QAAM5X,IAAN,GAAWiX,KAAX,GAAiBA,MAAMjX,IAAN,CAAzB,EAAqC9D,CAArC,EAAuCwX,GAAvC,EAA2CmE,MAA/C,EAAsD1b,MAAtD;AAA8Dgb,uBAAO1B,UAAP,CAAkBe,WAAlB,CAA8BW,OAAOV,eAArC,GAAsDta,QAAtD;AAA9D,eAA6H,IAAG,cAAY,OAAOyb,GAAnB,IAAwB,KAAK,CAAL,KAASA,IAAIlE,GAAxC,EAA4C;AAACkE,oBAAI7X,EAAJ,CAAO,QAAP,EAAgBmV,MAAhB,GAAwB0C,IAAI7X,EAAJ,CAAO,QAAP,EAAgB4X,GAAhB,CAAxB,EAA6CE,SAAO3Z,SAASqY,sBAAT,EAApD,CAAsF,IAAIuB,OAAKL,KAAKP,QAAL,CAAT;AAAA,oBAAwBa,KAAxB;AAAA,oBAA8BC,UAA9B,CAAyC,KAAI9b,IAAE,CAAF,EAAIwX,MAAIkE,IAAIpD,MAAJ,CAAWrY,MAAvB,EAA8BuX,MAAIxX,CAAlC,EAAoCA,GAApC;AAAwC0b,sBAAI7X,EAAJ,CAAO,QAAP,EAAgB7D,CAAhB,EAAkB+Y,OAAO/Y,CAAP,CAAlB,GAA6B8b,aAAWJ,IAAI1b,CAAJ,CAAxC,EAA+C6b,QAAMD,KAAKE,UAAL,CAArD,EAAsED,MAAME,SAAN,GAAgBD,UAAtF,EAAiGH,OAAO5H,WAAP,CAAmB8H,KAAnB,CAAjG;AAAxC,iBAAmK5b,SAAO0b,OAAOnB,UAAP,CAAkBva,MAAzB,EAAgCmb,YAAU,CAAC,EAAEnb,SAAOuX,GAAT,CAA3C,EAAyDyD,OAAO1B,UAAP,CAAkBkB,YAAlB,CAA+BkB,MAA/B,EAAsCV,MAAtC,CAAzD;AAAuG,eAAtb,MAA0b,cAAY,OAAOS,GAAnB,IAAwB,KAAK,CAAL,KAASA,IAAIlE,GAArC,IAA0CmE,SAAOJ,KAAKP,WAAS,OAAd,CAAP,EAA8B/a,SAAO0b,OAAOnB,UAAP,CAAkBva,MAAvD,EAA8Dmb,YAAUnb,MAAxE,EAA+Egb,OAAO1B,UAAP,CAAkBkB,YAAlB,CAA+BkB,MAA/B,EAAsCV,MAAtC,CAA/E,EAA6HA,OAAO1B,UAAP,CAAkBwC,SAAlB,GAA4BhB,KAAnM,IAA0MW,QAAMC,SAAOJ,KAAKP,WAAS,SAAd,CAAP,EAAgC/a,SAAO0b,OAAOnB,UAAP,CAAkBva,MAAzD,EAAgEmb,YAAUnb,MAA1E,EAAiFgb,OAAO1B,UAAP,CAAkBkB,YAAlB,CAA+BkB,MAA/B,EAAsCV,MAAtC,CAAvF,CAA1M;AAAgV,iBAAIA,SAAOjZ,SAAS0Y,aAAT,CAAuB,EAAvB,CAAX;AAAA,gBAAsCza,SAAO,CAA7C;AAAA,gBAA+Cmb,SAA/C,CAAyDN,SAAS/G,WAAT,CAAqBkH,MAArB,GAA6BnC,QAA7B,EAAsCiC,MAAMlX,EAAN,CAAS,QAAT,EAAkBC,IAAlB,EAAuBgV,MAAvB,CAAtC;AAAqE,WAAr9D,EAAN,GAA69D,KAAK,CAAz+D;AAA2+D,OAA9+F,EAA++F,UAAS8B,IAAT,EAAc;AAAC,YAAI3B,QAAM2B,KAAK3G,SAAL,CAAegF,KAAf,CAAqB,iBAArB,CAAV,CAAkD,OAAOA,QAAM,EAAC4B,OAAM5B,MAAM,CAAN,CAAP,EAAgBC,MAAK,cAAS4B,QAAT,EAAkBC,KAAlB,EAAwBjX,IAAxB,EAA6BkX,QAA7B,EAAsC;AAAC,qBAASlC,MAAT,GAAiB;AAAC,mBAAI,IAAI4C,MAAI,QAAM5X,IAAN,GAAWiX,KAAX,GAAiBA,MAAMjX,IAAN,CAAzB,EAAqC9D,CAArC,EAAuCwX,GAAvC,EAA2CmE,MAA/C,EAAsD1b,MAAtD;AAA8Dgb,uBAAO1B,UAAP,CAAkBe,WAAlB,CAA8BW,OAAOV,eAArC,GAAsDta,QAAtD;AAA9D,eAA6H,cAAY,OAAOyb,GAAnB,IAAwB,KAAK,CAAL,KAASA,IAAIlE,GAArC,IAA0CkE,IAAI7X,EAAJ,CAAO,QAAP,EAAgBiV,MAAhB,GAAwB4C,IAAI7X,EAAJ,CAAO,QAAP,EAAgBiV,MAAhB,CAAxB,EAAgD6C,SAAO3Z,SAASqY,sBAAT,EAAvD,EAAyF,MAAIqB,IAAIlE,GAAR,IAAamE,OAAO5H,WAAP,CAAmBwH,KAAKP,WAAS,UAAd,CAAnB,CAAtG,EAAoJ/a,SAAO0b,OAAOnB,UAAP,CAAkBva,MAA7K,EAAoLgb,OAAO1B,UAAP,CAAkBkB,YAAlB,CAA+BkB,MAA/B,EAAsCV,MAAtC,CAA9N,IAA6QS,QAAMC,SAAOJ,KAAKP,WAAS,SAAd,CAAP,EAAgC/a,SAAO0b,OAAOnB,UAAP,CAAkBva,MAAzD,EAAgEgb,OAAO1B,UAAP,CAAkBkB,YAAlB,CAA+BkB,MAA/B,EAAsCV,MAAtC,CAAtE,CAA7Q;AAAkY,iBAAIA,SAAOjZ,SAAS0Y,aAAT,CAAuB,EAAvB,CAAX;AAAA,gBAAsCza,SAAO,CAA7C,CAA+C6a,SAAS/G,WAAT,CAAqBkH,MAArB,GAA6BnC,QAA7B,EAAsCiC,MAAMlX,EAAN,CAAS,QAAT,EAAkBC,IAAlB,EAAuBgV,MAAvB,CAAtC;AAAqE,WAAjsB,EAAN,GAAysB,KAAK,CAArtB;AAAutB,OAAvwH,EAAwwH,YAAU;AAAC,eAAM,EAACI,MAAK,cAAS7Y,CAAT,EAAW;AAACA,cAAE0T,WAAF,CAAc/R,SAASmY,cAAT,CAAwB,eAAxB,CAAd;AAAwD,WAA1E,EAAN;AAAkF,OAAr2H,CAAf;AAAs3H,KAAx5H,EAAy5H,EAAz5H,CAAt2L,EAAmwT,GAAE,CAAC,UAAS9Z,CAAT,EAAW4N,CAAX,EAAa;AAAC,eAASG,CAAT,CAAWH,CAAX,EAAasB,CAAb,EAAevO,CAAf,EAAiB;AAAC,YAAIhB,CAAJ;AAAA,YAAM2Q,CAAN;AAAA,YAAQlC,CAAR;AAAA,YAAUuI,CAAV;AAAA,YAAYlH,CAAZ;AAAA,YAAc3E,IAAE,6EAAhB,CAA8FnK,MAAImK,KAAG,kKAAP,GAA2KA,KAAG,gHAA9K,CAA+R,KAAI,IAAIxM,CAAJ,EAAM8G,IAAE,CAAR,EAAU+I,IAAEP,EAAEuM,UAAd,EAAyBvC,IAAEzJ,EAAEvO,MAAjC,EAAwCgY,IAAExS,CAA1C,EAA4CA,GAA5C;AAAgD,kBAAO9G,IAAE6P,EAAE/I,CAAF,CAAF,EAAO9G,EAAEqd,QAAhB,GAA0B,KAAK,CAAL;AAAO,kBAAG,aAAWrd,EAAE0a,QAAb,IAAuB,qBAAmB1a,EAAEuB,IAA/C,EAAoD;AAAC,qBAAIF,IAAE,CAAF,EAAI2Q,IAAEtQ,EAAE,sBAAF,CAAN,EAAgCoO,IAAEkC,EAAE1Q,MAAxC,EAA+CwO,IAAEzO,CAAjD,EAAmDA,GAAnD;AAAuD,sBAAGgX,IAAErG,EAAE3Q,CAAF,EAAKrB,CAAL,CAAL,EAAa;AAAC,wBAAGqY,EAAE6D,KAAL,EAAW;AAAC,2BAAI/K,IAAE9N,SAASqY,sBAAT,EAAF,EAAoC5U,GAAxC,EAA4CwS,IAAExS,CAAF,IAAK,CAACyI,EAAE8I,EAAE6D,KAAJ,EAAUrM,EAAE/I,CAAF,EAAKwO,SAAL,IAAgB,EAA1B,CAAlD,EAAgFxO,GAAhF;AAAoFqK,0BAAEiE,WAAF,CAAcvF,EAAE/I,CAAF,EAAKwW,SAAL,CAAe,CAAC,CAAhB,CAAd;AAApF,uBAAsH,IAAGxW,MAAIwS,CAAP,EAAS,MAAK,qBAAmBjB,EAAE6D,KAA1B,CAAgC1P,KAAG,MAAI6L,EAAEkC,IAAF,CAAOgD,QAAP,EAAJ,GAAsB,iBAAtB,GAAwCxJ,KAAKC,SAAL,CAAeqE,EAAE6D,KAAjB,CAAxC,GAAgE,IAAhE,GAAqEnI,KAAKC,SAAL,CAAevE,EAAE0B,CAAF,EAAIP,KAAGA,IAAE,GAAF,GAAM5Q,EAAEsV,SAAR,GAAkB,GAAlB,GAAsBxO,CAAtB,GAAwB,GAA/B,EAAmC,CAACzE,KAAG,CAAJ,IAAO,CAA1C,CAAf,CAArE,GAAkI,IAArI;AAA0I,qBAArT,MAA0TmK,KAAG,MAAI6L,EAAEkC,IAAF,CAAOgD,QAAP,EAAJ,GAAsB,iBAAtB,GAAwCxJ,KAAKC,SAAL,CAAeqE,EAAElT,IAAjB,CAAxC,GAA+D,MAAlE,CAAyE;AAAM;AAA9c;AAA+c,eAApgB,MAAwgB;AAACqH,qBAAG,oCAAkCxM,EAAE0a,QAApC,GAA6C,OAAhD,CAAwD,KAAI,IAAI3I,IAAE,CAAN,EAAQwH,IAAEvZ,EAAEwd,UAAZ,EAAuBhE,IAAED,EAAEjY,MAA/B,EAAsCkY,IAAEzH,CAAxC,EAA0CA,GAA1C;AAA8C,uBAAI1Q,IAAE,CAAF,EAAI2Q,IAAEtQ,EAAE,sBAAF,CAAN,EAAgCoO,IAAEkC,EAAE1Q,MAAxC,EAA+CwO,IAAEzO,CAAjD,EAAmDA,GAAnD;AAAuD,wBAAGgX,IAAErG,EAAE3Q,CAAF,EAAKrB,CAAL,EAAOuZ,EAAExH,CAAF,EAAKnM,IAAL,CAAU6N,WAAV,EAAP,CAAL,EAAqC;AAACjH,2BAAG,MAAI6L,EAAEkC,IAAF,CAAOgD,QAAP,EAAJ,GAAsB,UAAtB,GAAiCxJ,KAAKC,SAAL,CAAeuF,EAAExH,CAAF,EAAKnM,IAApB,CAAjC,GAA2D,WAA3D,GAAuEmO,KAAKC,SAAL,CAAeqE,EAAElT,IAAjB,CAAvE,GAA8F,MAAjG,CAAwG;AAAM;AAA3M;AAA9C,iBAAyP,YAAUnF,EAAE0a,QAAZ,KAAuBlO,KAAG,sBAAoBiD,EAAEzP,CAAF,EAAI4Q,KAAGA,IAAE,GAAF,GAAM5Q,EAAE0a,QAAR,GAAiB,GAAjB,GAAqB5T,CAArB,GAAuB,GAA9B,EAAkC,CAACzE,KAAG,CAAJ,IAAO,CAAzC,CAApB,GAAgE,aAA1F,GAAyGmK,KAAG,2BAA5G;AAAwI,qBAAM,KAAK,CAAL;AAAOA,mBAAG,8CAA4CuH,KAAKC,SAAL,CAAehU,EAAEyb,IAAjB,CAA5C,GAAmE,OAAtE,CAA8E,MAAM,KAAK,CAAL;AAAOjP,mBAAG,6CAA2CuH,KAAKC,SAAL,CAAehU,EAAEyb,IAAjB,CAA3C,GAAkE,OAArE,CAA3kC;AAAhD,SAAwsC,OAAOjP,KAAG,iBAAH,EAAqBA,KAAGoE,IAAE,qBAAmBA,CAAnB,GAAqB,kBAArB,GAAwCA,CAAxC,GAA0C,IAA5C,GAAiD,EAAhF;AAAmF,gBAASrB,CAAT,CAAW7N,CAAX,EAAa4N,CAAb,EAAe;AAAC,YAAIG,IAAEH,EAAEgL,KAAF,CAAQ,kBAAR,CAAN,CAAkC,OAAO7K,IAAE,OAAK/N,CAAL,IAAQ,CAAC+N,EAAE,CAAF,CAAT,IAAeA,EAAE,CAAF,MAAO/N,CAAxB,GAA0B,CAAC,CAAlC;AAAoC,SAAE8N,OAAF,GAAUC,CAAV;AAAY,KAA3xD,EAA4xD,EAAC,wBAAuB,CAAxB,EAA0B,wBAAuB,CAAjD,EAA5xD,CAArwT,EAAslX,GAAE,CAAC,UAAS8L,OAAT,EAAiBxD,MAAjB,EAAwBvI,OAAxB,EAAgC;AAAC,eAASxK,KAAT,GAAgB;AAAC,YAAI5D,OAAK,GAAGqc,KAAH,CAAS7N,IAAT,CAAc4I,SAAd,CAAT;AAAA,YAAkCtR,MAAlC;AAAA,YAAyCoI,CAAzC;AAAA,YAA2C+M,QAA3C;AAAA,YAAoDD,KAApD,CAA0D,OAAM,CAAC,KAAD,EAAO,MAAP,EAAezI,OAAf,CAAuBvS,KAAK,CAAL,CAAvB,IAAgC,CAAC,CAAjC,GAAmCma,QAAQ,OAAR,EAAiB7B,KAAjB,CAAuB,IAAvB,EAA4BtY,IAA5B,CAAnC,GAAqE,MAAIA,KAAKE,MAAT,IAAiB,oBAAiBF,KAAK,CAAL,CAAjB,CAAjB,GAA0Cma,QAAQ,OAAR,EAAiBna,KAAK,CAAL,CAAjB,CAA1C,GAAoE,MAAIA,KAAKE,MAAT,IAAiB,YAAU,OAAOF,KAAK,CAAL,CAAlC,GAA0CiC,SAASqa,aAAT,CAAuBtc,KAAK,CAAL,CAAvB,EAAgCgc,SAA1E,GAAoF,MAAK,CAAChc,KAAK,CAAL,KAASA,KAAK,CAAL,EAAQic,QAAjB,IAA2B,YAAU,OAAOjc,KAAK,CAAL,CAA7C,MAAwDA,KAAK,CAAL,KAAS,cAAY,OAAOA,KAAK,CAAL,EAAQgU,WAApC,IAAiD,YAAU,OAAOhU,KAAK,CAAL,CAA1H,KAAoI,KAAK,CAAL,KAASA,KAAK,CAAL,CAA7I,KAAuJ8F,SAAO9F,KAAK,CAAL,KAASA,KAAK,CAAL,EAAQic,QAAjB,GAA0Bjc,KAAK,CAAL,CAA1B,GAAkCiC,SAASqa,aAAT,CAAuBtc,KAAK,CAAL,CAAvB,CAAzC,EAAyEib,WAASjb,KAAK,CAAL,EAAQkZ,KAAR,CAActV,MAAM2Y,UAApB,IAAgCta,SAASqa,aAAT,CAAuBtc,KAAK,CAAL,CAAvB,EAAgCkU,SAAhE,GAA0ElU,KAAK,CAAL,CAA5J,EAAoKgb,QAAM,cAAY,OAAOhb,KAAK,CAAL,CAAnB,GAA2BA,KAAK,CAAL,CAA3B,GAAmC4D,MAAM,oBAAiB5D,KAAK,CAAL,CAAjB,IAAyBA,KAAK,CAAL,CAAzB,GAAiC,YAAU,OAAOA,KAAK,CAAL,CAAjB,IAA0BA,KAAK,CAAL,EAAQkZ,KAAR,CAActV,MAAM2Y,UAApB,CAA1B,GAA0DpC,QAAQ,UAAR,EAAoBlY,SAASqa,aAAT,CAAuBtc,KAAK,CAAL,CAAvB,EAAgCkU,SAApD,CAA1D,GAAyH,EAAC,KAAIlU,KAAK,CAAL,CAAL,EAAhK,CAA7M,EAA4X,aAAW8F,OAAOwT,QAAlB,KAA6BpL,IAAEjM,SAASiI,aAAT,CAAuB,KAAvB,CAAF,EAAgCgE,EAAEI,EAAF,GAAKxI,OAAOwI,EAA5C,EAA+CxI,OAAO0T,UAAP,CAAkBgD,YAAlB,CAA+BtO,CAA/B,EAAiCpI,MAAjC,CAA/C,EAAwFA,SAAOoI,CAA5H,CAA5X,EAA2fpI,OAAOkW,SAAP,GAAiBhB,KAA5gB,EAAkhBlV,OAAOoO,SAAP,GAAiB,EAAniB,EAAsiBpO,OAAOkO,WAAP,CAAmBwH,KAAK5X,MAAM6Y,OAAN,CAAc7Y,MAAMqP,KAAN,CAAYgI,QAAZ,CAAd,EAAoCnV,OAAO8N,YAAP,CAAoB,YAApB,CAApC,IAAuE,SAA5E,CAAnB,CAA7rB,CAAL,CAAnO;AAAkhC,cAAOyF,gBAAP,CAAwB,kBAAxB,EAA2C,YAAU;AAAC,aAAI,IAAI/Y,IAAE6Z,QAAQ,UAAR,CAAN,EAA0BjM,IAAEjM,SAASya,gBAAT,CAA0B,cAA1B,CAA5B,EAAsErO,IAAE,CAAxE,EAA0EF,IAAED,EAAEhO,MAAlF,EAAyFiO,IAAEE,CAA3F,EAA6FA,GAA7F;AAAiG/N,YAAE4N,EAAEG,CAAF,CAAF,EAAOH,EAAEG,CAAF,EAAKuF,YAAL,CAAkB,YAAlB,CAAP;AAAjG;AAAyI,OAA/L,GAAiMhQ,MAAM2Y,UAAN,GAAiB,cAAlN,EAAiO3Y,MAAM+Y,oBAAN,GAA2B,iBAA5P,EAA8Q/Y,MAAMqP,KAAN,GAAYkH,QAAQ,SAAR,CAA1R,EAA6SvW,MAAM6Y,OAAN,GAActC,QAAQ,WAAR,CAA3T,EAAgVvW,MAAMgX,MAAN,GAAaT,QAAQ,UAAR,CAA7V,EAAiXvW,MAAMsW,SAAN,GAAgBC,QAAQ,aAAR,CAAjY,EAAwZvW,MAAMwV,IAAN,GAAW,UAAS9Y,CAAT,EAAW4N,CAAX,EAAa;AAAC,YAAIG,IAAE/N,EAAE4N,CAAF,CAAN,CAAW,OAAM,cAAY,OAAOG,CAAnB,GAAqBsE,KAAKC,SAAL,CAAevE,EAAEkK,MAAjB,CAArB,GAA8ClK,CAApD;AAAsD,OAAlf,EAAmf8L,QAAQ,qBAAR,CAAnf,EAAkhBvW,MAAMgZ,OAAN,GAAczC,QAAQ,WAAR,CAAhiB,EAAqjBxD,OAAOvI,OAAP,GAAexK,KAApkB,EAA0kB,eAAa,OAAOP,MAApB,KAA6BA,OAAOO,KAAP,GAAaA,KAA1C,CAA1kB;AAA2nB,KAA1vD,EAA2vD,EAAC,aAAY,CAAb,EAAe,YAAW,CAA1B,EAA4B,WAAU,CAAtC,EAAwC,aAAY,CAApD,EAAsD,uBAAsB,EAA5E,EAA+E,eAAc,EAA7F,EAAgG,SAAQ,EAAxG,EAA2GiZ,OAAM,CAAjH,EAA3vD,CAAxlX,EAAw8a,GAAE,CAAC,UAAS1C,OAAT,EAAiBxD,MAAjB,EAAwBvI,OAAxB,EAAgC;AAACuI,aAAOvI,OAAP,GAAe,UAAStI,MAAT,EAAgBgX,GAAhB,EAAoB9B,KAApB,EAA0B;AAAC,iBAAS+B,KAAT,CAAezc,CAAf,EAAiB4N,CAAjB,EAAmB;AAAC,eAAI,IAAIG,CAAR,IAAaH,CAAb;AAAe,kBAAIG,EAAEkE,OAAF,CAAU,IAAV,CAAJ,IAAqBlE,EAAE2O,WAAF,CAAc,IAAd,MAAsB3O,EAAEnO,MAAF,GAAS,CAApD,IAAuD,cAAY,OAAOgO,EAAEG,CAAF,CAA1E,GAA+E,KAAK,CAAL,KAAS/N,EAAEiY,MAAF,CAASlK,CAAT,CAAT,KAAuB/N,EAAEiY,MAAF,CAASlK,CAAT,IAAYH,EAAEG,CAAF,CAAnC,CAA/E,GAAwH,KAAK,CAAL,KAAS/N,EAAE+N,CAAF,CAAT,IAAe/N,EAAE+N,CAAF,EAAIH,EAAEG,CAAF,CAAJ,CAAvI;AAAf;AAAgK,kBAAS4O,YAAT,GAAuB;AAAC,cAAI3c,CAAJ,EAAM4N,CAAN,CAAQ,KAAI5N,CAAJ,IAASsD,MAAMgZ,OAAf;AAAuBM,qBAAOtZ,MAAMgZ,OAAN,CAActc,CAAd,CAAP,EAAwB4N,IAAE8M,MAAMzC,MAAN,CAAa,OAAKjY,CAAL,GAAO,IAApB,CAA1B,EAAoD,cAAY,OAAO4c,MAAnB,IAA2B,KAAK,CAAL,KAAShP,CAApC,IAAuCgP,OAAO1O,IAAP,CAAYwM,KAAZ,EAAkB9M,CAAlB,EAAoBpI,MAApB,CAA3F;AAAvB;AAA8I,kBAASqX,UAAT,CAAoBpJ,IAApB,EAAyB+I,GAAzB,EAA6B;AAAC,cAAIhT,MAAJ;AAAA,cAAW6M,SAAO,EAACvI,SAAQ,EAAT,EAAlB,CAA+B,OAAO0O,MAAIA,MAAI,qBAAmBA,GAAnB,GAAuB,kBAAvB,GAA0CA,GAA9C,GAAkD,EAAtD,EAAyD/I,KAAKmF,KAAL,CAAW,mBAAX,IAAgCsC,KAAK,YAAUzH,IAAV,GAAe+I,GAApB,CAAhC,IAA0DtB,KAAKzH,OAAK+I,GAAV,GAAenG,OAAOvI,OAAhF,CAAhE;AAAyJ,kBAASgP,SAAT,CAAmB9c,CAAnB,EAAqB4N,CAArB,EAAuBG,CAAvB,EAAyB;AAAC,cAAIF,CAAJ,CAAM,IAAG7N,CAAH;AAAK,gBAAGA,EAAE4Y,KAAF,CAAQtV,MAAM2Y,UAAd,CAAH,EAA6B;AAAC,kBAAI/M,IAAEnB,EAAEiO,aAAF,CAAgBhc,CAAhB,CAAN,CAAyByc,MAAM/B,KAAN,EAAYmC,WAAW3N,EAAE0E,SAAb,EAAuB5T,CAAvB,CAAZ,GAAuC2c,cAAvC,EAAsDrZ,MAAMkC,MAAN,EAAaoI,CAAb,EAAe8M,KAAf,CAAtD;AAA4E,aAAnI,MAAwI7M,IAAE7N,EAAEiS,OAAF,CAAU,GAAV,CAAF,EAAiB3O,MAAM,KAAN,EAAYuK,IAAE,CAAC,CAAH,GAAK7N,EAAEQ,SAAF,CAAY,CAAZ,EAAcqN,CAAd,CAAL,GAAsB7N,CAAlC,EAAoC,UAAS+N,CAAT,EAAW;AAAC,kBAAIF,IAAE7N,EAAE4Y,KAAF,CAAQtV,MAAM+Y,oBAAd,CAAN;AAAA,kBAA0CnN,IAAErB,KAAI,IAAIkP,SAAJ,EAAD,CAAgBC,eAAhB,CAAgCjP,CAAhC,EAAkC,WAAlC,EAA+CiO,aAA/C,CAA6DnO,EAAE,CAAF,CAA7D,CAA/C,CAAkH4O,MAAM/B,KAAN,EAAYmC,WAAWhP,IAAEqB,EAAE0E,SAAJ,GAAc7F,CAAzB,EAA2B/N,CAA3B,CAAZ,GAA2C2c,cAA3C,EAA0DrZ,MAAMkC,MAAN,EAAaoI,CAAb,EAAe8M,KAAf,CAA1D;AAAgF,aAAlP,CAAjB;AAA7I,iBAAuZpX,MAAMkC,MAAN,EAAaoI,CAAb,EAAe8M,KAAf;AAAsB,kBAASuC,YAAT,GAAuB;AAAC,cAAIjd,CAAJ,CAAM,IAAGwc,GAAH,EAAO,IAAGA,IAAI5D,KAAJ,CAAUtV,MAAM2Y,UAAhB,CAAH,EAA+B;AAAC,gBAAIrO,IAAEjM,SAASqa,aAAT,CAAuBQ,GAAvB,CAAN,CAAkCM,UAAUlP,EAAE0F,YAAF,CAAe,YAAf,CAAV,EAAuC1F,EAAEgG,SAAzC,EAAmDjS,QAAnD;AAA6D,WAA/H,MAAoI3B,IAAEwc,IAAIvK,OAAJ,CAAY,GAAZ,CAAF,EAAmB3O,MAAM,KAAN,EAAYtD,IAAE,CAAC,CAAH,GAAKwc,IAAIhc,SAAJ,CAAc,CAAd,EAAgBR,CAAhB,CAAL,GAAwBwc,GAApC,EAAwC,UAASxc,CAAT,EAAW;AAAC,gBAAI4N,CAAJ;AAAA,gBAAMG,CAAN;AAAA,gBAAQF,IAAE2O,IAAI5D,KAAJ,CAAUtV,MAAM+Y,oBAAhB,CAAV,CAAgDxO,KAAGD,IAAEjM,SAASiI,aAAT,CAAuB,QAAvB,CAAF,EAAmCgE,EAAEsP,KAAF,CAAQC,OAAR,GAAgB,MAAnD,EAA0Dxb,SAAS8R,IAAT,CAAcC,WAAd,CAA0B9F,CAA1B,CAA1D,EAAuFG,IAAEH,EAAEwP,eAA3F,EAA2GrP,EAAEsP,OAAF,CAAUrd,CAAV,CAA3G,EAAwH2B,SAAS8R,IAAT,CAAcwG,WAAd,CAA0BrM,CAA1B,CAA3H,IAAyJG,IAAEpM,QAA3J,CAAoK,IAAIuN,IAAErB,KAAGE,EAAEiO,aAAF,CAAgBnO,EAAE,CAAF,CAAhB,CAAT,CAA+BiP,UAAUjP,IAAEqB,EAAEoE,YAAF,CAAe,YAAf,CAAF,GAA+B,EAAzC,EAA4CzF,IAAEqB,EAAE0E,SAAJ,GAAc5T,CAA1D,EAA4D+N,CAA5D;AAA+D,WAAtW,CAAnB;AAA2X,iBAAM2M,SAAO,EAAb,EAAgB,cAAY,OAAOA,KAAnB,KAA2BA,QAAMpX,MAAMoX,KAAN,CAAjC,CAAhB,EAA+DuC,cAA/D;AAA8E,OAAjqD;AAAkqD,KAApsD,EAAqsD,EAArsD,CAA18a,EAAmpe,GAAE,CAAC,UAASjd,CAAT,EAAW4N,CAAX,EAAa;AAAC,eAASG,CAAT,CAAW/N,CAAX,EAAa;AAAC,iBAAS4N,CAAT,CAAW5N,CAAX,EAAa;AAAC,iBAAOA,IAAEA,EAAElB,OAAF,CAAU,yBAAV,EAAoC,SAApC,CAAF,EAAiDkB,IAAEA,EAAElB,OAAF,CAAU,qBAAV,EAAgC,UAAS8O,CAAT,EAAWG,CAAX,EAAaF,CAAb,EAAe;AAAC,gBAAIqB,IAAElP,EAAE+b,KAAF,CAAQ,CAAR,EAAUlO,CAAV,CAAN;AAAA,gBAAmBlN,IAAE,CAAC,CAACuO,EAAE0J,KAAF,CAAQ,iBAAR,CAAvB;AAAA,gBAAkDjZ,IAAEuP,EAAE0J,KAAF,CAAQ,mBAAR,CAApD;AAAA,gBAAiFtI,IAAEpB,EAAE0J,KAAF,CAAQ,qBAAR,CAAnF;AAAA,gBAAkHxK,IAAE,CAACzO,KAAGA,EAAEC,MAAL,IAAa,CAAd,KAAkB0Q,KAAGA,EAAE1Q,MAAL,IAAa,CAA/B,CAApH;AAAA,gBAAsJ+W,IAAE,CAAC,CAACzH,EAAE0J,KAAF,CAAQ,UAAR,CAA1J;AAAA,gBAA8KnJ,IAAE,MAAI1B,EAAEkE,OAAF,CAAU,GAAV,CAApL,CAAmM,OAAOtR,KAAGgW,CAAH,GAAKlH,IAAE,EAAF,GAAK7B,CAAV,GAAYQ,IAAER,CAAF,GAAI,mCAAiCG,EAAE+D,IAAF,EAAjC,GAA0C,WAAjE;AAA6E,WAAhU,CAAnD,EAAqX9R,IAAEA,EAAElB,OAAF,CAAU,mDAAV,EAA8D,mBAA9D,CAAvX,EAA0ckB,IAAEA,EAAElB,OAAF,CAAU,+CAAV,EAA0D,kBAA1D,CAAnd;AAAiiB,aAAIiP,CAAJ,EAAMF,CAAN,CAAQ,OAAO7N,IAAE4N,EAAE5N,CAAF,CAAF,EAAO+N,IAAEpM,SAASiI,aAAT,CAAuB,QAAvB,CAAT,EAA0CmE,EAAEmP,KAAF,CAAQC,OAAR,GAAgB,MAA1D,EAAiExb,SAAS8R,IAAT,CAAcC,WAAd,CAA0B3F,CAA1B,CAAjE,EAA8FA,EAAEqP,eAAF,CAAkBC,OAAlB,CAA0B,kCAAgCrd,CAAhC,GAAkC,gBAA5D,CAA9F,EAA4K6N,IAAEE,EAAEqP,eAAF,CAAkB3J,IAAhM,EAAqM9R,SAAS8R,IAAT,CAAcwG,WAAd,CAA0BlM,CAA1B,CAArM,EAAkOF,CAAzO;AAA2O,SAAEC,OAAF,GAAUC,CAAV;AAAY,KAA30B,EAA40B,EAA50B,CAArpe,EAAq+f,GAAE,CAAC,UAAS/N,CAAT,EAAW4N,CAAX,EAAa;AAACA,QAAEE,OAAF,GAAU,EAAClQ,MAAKoC,EAAE,gBAAF,CAAN,EAA0BwD,IAAGxD,EAAE,cAAF,CAA7B,EAA+Csd,QAAOtd,EAAE,kBAAF,CAAtD,EAAV;AAAuF,KAAtG,EAAuG,EAAC,kBAAiB,CAAlB,EAAoB,gBAAe,EAAnC,EAAsC,oBAAmB,EAAzD,EAAvG,CAAv+f,EAA4ogB,GAAE,CAAC,UAASA,CAAT,EAAW4N,CAAX,EAAa;AAACA,QAAEE,OAAF,GAAU,UAAS9N,CAAT,EAAW;AAAC,YAAG,cAAY,OAAOA,CAAtB,EAAwB;AAAC,cAAI4N,IAAE,IAAN,CAAWiG,WAAW,YAAU;AAAC7T,cAAEkO,IAAF,CAAON,CAAP;AAAU,WAAhC;AAAkC;AAAC,OAA7F;AAA8F,KAA7G,EAA8G,EAA9G,CAA9ogB,EAAgwgB,IAAG,CAAC,UAAS5N,CAAT,EAAW4N,CAAX,EAAa;AAACA,QAAEE,OAAF,GAAU,UAAS9N,CAAT,EAAW4N,CAAX,EAAa;AAAC,iBAASG,CAAT,CAAWA,CAAX,EAAa;AAACH,YAAEmL,gBAAF,CAAmBhL,CAAnB,EAAqB,UAASH,CAAT,EAAW;AAAC,iBAAI,IAAIC,CAAR,IAAa7N,EAAE+N,CAAF,CAAb;AAAkB,kBAAGH,EAAEpI,MAAF,CAAS+X,OAAT,CAAiB1P,CAAjB,CAAH,EAAuB;AAAC,qBAAI,IAAIqB,IAAEtB,EAAEpI,MAAZ,EAAmB,CAAC0J,EAAEwM,SAAH,IAAcxM,EAAEgK,UAAnC;AAA+ChK,sBAAEA,EAAEgK,UAAJ;AAA/C,iBAA8DlZ,EAAE+N,CAAF,EAAKF,CAAL,EAAQK,IAAR,CAAagB,EAAEwM,SAAf,EAAyB9N,CAAzB;AAA4B;AAApI;AAAqI,WAAtK;AAAwK,cAAI,IAAIC,CAAR,IAAa7N,CAAb;AAAe+N,YAAEF,CAAF;AAAf;AAAoB,OAAlO;AAAmO,KAAlP,EAAmP,EAAnP,CAAnwgB,EAA0/gB,IAAG,CAAC,UAAS7N,CAAT,EAAW4N,CAAX,EAAa;AAACA,QAAEE,OAAF,GAAU,YAAU,CAAE,CAAtB;AAAuB,KAAtC,EAAuC,EAAvC,CAA7/gB,EAAwihB,IAAG,CAAC,YAAU;AAAC,qBAAa,OAAO0P,OAApB,IAA6B,UAASxd,CAAT,EAAW;AAACA,UAAEud,OAAF,GAAUvd,EAAEud,OAAF,IAAWvd,EAAEyd,kBAAb,IAAiCzd,EAAE0d,iBAAnC,IAAsD1d,EAAE2d,gBAAxD,IAA0E3d,EAAE4d,qBAA5E,IAAmG,UAAS5d,CAAT,EAAW;AAAC,eAAI,IAAI4N,IAAE,IAAN,EAAWG,IAAE,CAACH,EAAEsL,UAAF,IAActL,EAAEjM,QAAjB,EAA2Bya,gBAA3B,CAA4Cpc,CAA5C,CAAb,EAA4D6N,IAAE,CAAC,CAAnE,EAAqEE,EAAE,EAAEF,CAAJ,KAAQE,EAAEF,CAAF,KAAMD,CAAnF,KAAuF,OAAM,CAAC,CAACG,EAAEF,CAAF,CAAR;AAAa,SAA7N;AAA8N,OAA1O,CAA2O2P,QAAQnO,SAAnP,CAA7B;AAA2R,KAAvS,EAAwS,EAAxS,CAA3ihB,EAAu1hB,IAAG,CAAC,UAASrP,CAAT,EAAW4N,CAAX,EAAa;AAAC,eAASG,CAAT,CAAW/N,CAAX,EAAa4N,CAAb,EAAeC,CAAf,EAAiB;AAAC,eAAO7N,EAAElB,OAAF,CAAU,kDAAV,EAA6D,UAASkB,CAAT,EAAWkP,CAAX,EAAavO,CAAb,EAAehB,CAAf,EAAiB;AAAC,cAAG,OAAKA,CAAL,IAAQA,MAAIuP,CAAf,EAAiB,MAAK,qBAAmBA,CAAxB,CAA0B,cAAY,OAAOrB,CAAnB,IAAsBD,EAAEpK,EAAF,CAAK,QAAL,EAAc0L,CAAd,EAAgBrB,CAAhB,CAAtB,CAAyC,IAAIyC,IAAE,QAAMpB,CAAN,GAAQtB,CAAR,GAAUA,EAAEsB,CAAF,CAAhB,CAAqB,OAAM,cAAY,OAAOoB,CAAnB,IAAsB,KAAK,CAAL,KAASA,EAAE6G,GAAjC,GAAqC7G,EAAE6G,GAAF,GAAM,CAAN,GAAQ7G,EAAE2H,MAAF,CAASxZ,GAAT,CAAa,UAASuB,CAAT,EAAW4N,CAAX,EAAa;AAAC,mBAAOG,EAAEpN,EAAE7B,OAAF,CAAU,aAAV,EAAwB,OAAK8O,CAAL,GAAO,IAA/B,CAAF,EAAuC0C,CAAvC,EAAyCzC,CAAzC,CAAP;AAAmD,WAA9E,EAAgFlP,IAAhF,CAAqF,EAArF,CAAR,GAAiG,EAAtI,GAAyI,cAAY,OAAO2R,CAAnB,IAAsB,KAAK,CAAL,KAASA,EAAE6G,GAAjC,GAAqCpJ,EAAEpN,CAAF,EAAI2P,CAAJ,EAAMzC,CAAN,CAArC,GAA8CyC,IAAEvC,EAAEpN,CAAF,EAAIiN,CAAJ,EAAMC,CAAN,CAAF,GAAW,EAAxM;AAA2M,SAAnY,EAAqY/O,OAArY,CAA6Y,mDAA7Y,EAAic,UAASkB,CAAT,EAAWkP,CAAX,EAAavO,CAAb,EAAehB,CAAf,EAAiB;AAAC,cAAG,OAAKA,CAAL,IAAQA,MAAIuP,CAAf,EAAiB,MAAK,qBAAmBA,CAAxB,CAA0B,cAAY,OAAOrB,CAAnB,IAAsBD,EAAEpK,EAAF,CAAK,QAAL,EAAc0L,CAAd,EAAgBrB,CAAhB,CAAtB,CAAyC,IAAIyC,IAAE,QAAMpB,CAAN,GAAQtB,CAAR,GAAUA,EAAEsB,CAAF,CAAhB,CAAqB,OAAM,cAAY,OAAOoB,CAAnB,IAAsB,KAAK,CAAL,KAASA,EAAE6G,GAAjC,GAAqC,MAAI7G,EAAE6G,GAAN,GAAUpJ,EAAEpN,CAAF,EAAIiN,CAAJ,EAAMC,CAAN,CAAV,GAAmB,EAAxD,GAA2DyC,IAAE,EAAF,GAAKvC,EAAEpN,CAAF,EAAIiN,CAAJ,EAAMC,CAAN,CAAtE;AAA+E,SAA3oB,EAA6oB/O,OAA7oB,CAAqpB,sBAArpB,EAA4qB,UAASkB,CAAT,EAAW+N,CAAX,EAAa;AAAC,iBAAM,cAAY,OAAOF,CAAnB,IAAsBD,EAAEpK,EAAF,CAAK,QAAL,EAAcuK,CAAd,EAAgBF,CAAhB,CAAtB,EAAyC,KAAK,CAAL,KAASD,EAAEG,CAAF,CAAT,GAAc,EAAd,GAAiBH,EAAEG,CAAF,IAAK,EAArE;AAAwE,SAAlwB,CAAP;AAA2wB,SAAED,OAAF,GAAUC,CAAV;AAAY,KAAxzB,EAAyzB,EAAzzB,CAA11hB,EAAupjB,IAAG,CAAC,UAAS/N,CAAT,EAAW4N,CAAX,EAAa;AAACA,QAAEE,OAAF,GAAU,YAAU;AAAC,YAAI9N,CAAJ;AAAA,YAAM4N,CAAN;AAAA,YAAQG,CAAR;AAAA,YAAUF,CAAV;AAAA,YAAYqB,CAAZ;AAAA,YAAcvO,IAAE,GAAGob,KAAH,CAAS7N,IAAT,CAAc4I,SAAd,CAAhB;AAAA,YAAyCnX,IAAE,IAAIgJ,cAAJ,EAA3C;AAAA,YAA8D2H,IAAE3P,EAAEkd,MAAF,CAAS,UAAS7d,CAAT,EAAW4N,CAAX,EAAa;AAAC,iBAAM,cAAY,OAAOA,CAAnB,GAAqBA,CAArB,GAAuB5N,CAA7B;AAA+B,SAAtD,EAAuD,IAAvD,CAAhE;AAAA,YAA6HoO,IAAEzN,EAAEA,EAAEf,MAAF,GAAS,CAAX,CAA/H,CAA6I,KAAI,oBAAiBwO,CAAjB,yCAAiBA,CAAjB,OAAqBA,IAAE,EAAvB,GAA2BpO,IAAE,CAA7B,EAA+B6N,IAAE5R,OAAO2a,mBAAP,CAA2BxI,CAA3B,CAAjC,EAA+DR,IAAEC,EAAEjO,MAAvE,EAA8EgO,IAAE5N,CAAhF,EAAkFA,GAAlF;AAAsF+N,cAAEF,EAAE7N,CAAF,CAAF,EAAOL,EAAEoO,CAAF,IAAKK,EAAEL,CAAF,CAAZ;AAAtF,SAAuGmB,IAAE,YAAU,OAAOvO,EAAE,CAAF,CAAjB,GAAsBA,EAAE,CAAF,CAAtB,GAA2B,oBAAiBA,EAAE,CAAF,CAAjB,IAAsB1E,OAAO+V,IAAP,CAAYrR,EAAE,CAAF,CAAZ,EAAkBlC,GAAlB,CAAsB,UAASuB,CAAT,EAAW;AAAC,iBAAOA,IAAE,GAAF,GAAM8d,mBAAmBnd,EAAE,CAAF,EAAKX,CAAL,CAAnB,CAAb;AAAyC,SAA3E,EAA6ErB,IAA7E,CAAkF,GAAlF,CAAtB,GAA6G,EAA1I,CAA6I,IAAIgY,IAAE,SAAFA,CAAE,CAAS3W,CAAT,EAAW;AAAC,cAAI4N,CAAJ,CAAM,IAAG0C,CAAH,EAAK;AAAC,gBAAG;AAAC1C,kBAAEyE,KAAKM,KAAL,CAAW,KAAKoL,YAAhB,CAAF;AAAgC,aAApC,CAAoC,OAAMhQ,CAAN,EAAQ;AAACH,kBAAE,KAAKmQ,YAAP;AAAoB,eAAE7P,IAAF,CAAO,IAAP,EAAYN,CAAZ,EAAc5N,CAAd;AAAiB;AAAC,SAAjH,CAAkH,OAAOL,EAAEqe,kBAAF,GAAqB,YAAU;AAAC,gBAAIre,EAAEse,UAAN,KAAmBte,EAAEwJ,MAAF,IAAU,GAAV,IAAexJ,EAAEwJ,MAAF,GAAS,GAAxB,GAA4BwN,EAAEzI,IAAF,CAAO,IAAP,EAAY,MAAZ,CAA5B,GAAgDjO,QAAQC,GAAR,CAAY,sBAAoB,KAAK6d,YAArC,CAAnE;AAAuH,SAAvJ,EAAwJpe,EAAEiJ,IAAF,CAAOjI,EAAE,CAAF,CAAP,EAAYA,EAAE,CAAF,CAAZ,EAAiB,KAAK,CAAL,KAASyN,EAAE8P,KAAX,GAAiB9P,EAAE8P,KAAnB,GAAyB,CAAC,CAA3C,EAA6C9P,EAAE+P,IAA/C,EAAoD/P,EAAEgQ,QAAtD,CAAxJ,EAAwNze,EAAE0J,IAAF,CAAO6F,CAAP,CAAxN,EAAkOvP,CAAzO;AAA2O,OAAnvB;AAAovB,KAAnwB,EAAowB,EAApwB,CAA1pjB,EAAnZ,EAAszlB,EAAtzlB,EAAyzlB,CAAC,CAAD,CAAzzlB,EAA8zlB,CAA9zlB,CAAP;AAAw0lB,CAAnomB,CAAD,C","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6e96ca568f92004aa9a2","import NoteConverter from './note-converter';\r\n\r\nexport default class Beeper {\r\n\r\n    constructor(context) {\r\n        this.context = context;\r\n    }\r\n\r\n    beep(options = {}) {\r\n        const defaults = {\r\n            startSecondsFromNow: 0,\r\n            durationSeconds: .1,\r\n            note: 108\r\n        };\r\n        options = Object.assign({}, defaults, options);\r\n\r\n        const gainNode = this.context.createGain();\r\n        gainNode.gain.setValueAtTime(.1, this.context.currentTime);\r\n        gainNode.connect(this.context.destination);\r\n\r\n        const oscillator = this.context.createOscillator();\r\n        const frequency = NoteConverter.getFrequencyFromNote(options.note);\r\n        oscillator.frequency.setValueAtTime(frequency, this.context.currentTime);\r\n        oscillator.connect(gainNode);\r\n\r\n        const startWhen = options.startSecondsFromNow + this.context.currentTime;\r\n        oscillator.start(startWhen);\r\n        oscillator.stop(startWhen + options.durationSeconds);\r\n    }\r\n\r\n    doubleBeep() {\r\n        this.beep({ startSecondsFromNow: 0, durationSeconds: .05 });\r\n        this.beep({ startSecondsFromNow: .1, durationSeconds: .05 });\r\n    }\r\n\r\n    respond() {\r\n        const startFrequency = NoteConverter.getFrequencyFromNote(101);\r\n        const endFrequency = NoteConverter.getFrequencyFromNote(108);\r\n        const durationSeconds = .3;\r\n\r\n        const gainNode = this.context.createGain();\r\n        gainNode.gain.setValueAtTime(.1, this.context.currentTime);\r\n        gainNode.connect(this.context.destination);\r\n\r\n        const oscillator = this.context.createOscillator();\r\n        oscillator.connect(gainNode);\r\n\r\n        oscillator.frequency.setValueAtTime(startFrequency, this.context.currentTime);\r\n        oscillator.frequency.setTargetAtTime(endFrequency, this.context.currentTime, durationSeconds);\r\n        oscillator.start();\r\n        oscillator.stop(this.context.currentTime + durationSeconds);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/beeper.js","export default class SongInfo {\r\n    constructor(bpm, beatsPerBar, playbackSpeed) {\r\n        this.bpm = bpm;\r\n        this.beatsPerBar = beatsPerBar || 4;\r\n        this.playbackSpeed = playbackSpeed || 1.0;\r\n    }\r\n\r\n    static fromObject(song) {\r\n        return new SongInfo(song.bpm, song.beatsPerBar, song.playbackSpeedPercent / 100);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/song-info.js","export default class CommandParser {\r\n\r\n    constructor(init) {\r\n\r\n        this.synonyms = new Map();\r\n        this.commands = new Array();\r\n\r\n        if (init) {\r\n            for (const key in init.synonyms) {\r\n                this.addSynonyms(key, init.synonyms[key]);\r\n            }\r\n            for (const command in init.commands) {\r\n                this.addCommand(command, init.commands[command]);\r\n            }\r\n        }\r\n    }\r\n\r\n    static _getRegExp(command) {\r\n        const pattern = '^' + command\r\n            .replace(/{number}/g, '(.*)')\r\n            .replace(/{words}/g, '(.*)');\r\n        return new RegExp(pattern, 'i');\r\n    }\r\n    static _getTypes(command) {\r\n        const indexedTypes = new Map();\r\n        const indexType = (type, regexp) => {\r\n            let index = 0;\r\n            let res = regexp.exec(command);\r\n            while (res) {\r\n                index += res.index;\r\n                indexedTypes.set(index, type);\r\n                // skip over the matched result\r\n                index += res[0].length;\r\n                res = regexp.exec(command.substring(index));\r\n            }\r\n        };\r\n        indexType('option', /\\(.+?\\)/);\r\n        indexType('number', /{number}/);\r\n        indexType('words', /{words}/);\r\n\r\n        return [...indexedTypes.entries()]\r\n            .sort((a, b) => a[0] - b[0]) // order by index\r\n            .map(a => a[1]); // select values\r\n    }\r\n\r\n    static _getValueForType(type, value) {\r\n        switch (type) {\r\n            case 'option': {\r\n                return value;\r\n            }\r\n            case 'words': {\r\n                return value;\r\n            }\r\n            case 'number': {\r\n                const valueAsNumber = Number.parseInt(value);\r\n                if (!Number.isNaN(valueAsNumber) && Number.isFinite(valueAsNumber)) {\r\n                    return valueAsNumber;\r\n                }\r\n                throw `Expected a number but couldn't parse the value: \"${value}\"`;\r\n            }\r\n            default: {\r\n                throw `Unknown command type: \"${type}\"`;\r\n            }\r\n        }\r\n    }\r\n\r\n    addSynonyms(key, synonyms) {\r\n        this.synonyms.set(key, synonyms);\r\n    }\r\n\r\n    _expandSynonyms(command) {\r\n        for (const s of this.synonyms) {\r\n            const key = s[0];\r\n            // use \\b (escaped) to identify word boundaries\r\n            const allSynonyms = s[1].concat(s[0]).map(s => `\\\\b${s}\\\\b`);\r\n            const synonymsPattern = '(' + allSynonyms.join('|') + ')';\r\n            // escape the square brackets from the regex, 'g' to replace all\r\n            const keyRegexp = new RegExp(`\\\\[${key}\\\\]`, 'g');\r\n            command = command.replace(keyRegexp, synonymsPattern);\r\n        }\r\n        return command;\r\n    }\r\n\r\n    addCommand(command, action) {\r\n        const commandWithSynonymsExpanded = this._expandSynonyms(command);\r\n        this.commands.push({\r\n            regexp: CommandParser._getRegExp(commandWithSynonymsExpanded),\r\n            types: CommandParser._getTypes(commandWithSynonymsExpanded),\r\n            action: action\r\n        });\r\n    }\r\n\r\n    parse(statement) {\r\n        for (const command of this.commands) {\r\n            const results = command.regexp.exec(statement);\r\n            if (results) {\r\n                try {\r\n                    const args = [];\r\n                    for (let i = 0; i < command.types.length; i++) {\r\n                        const type = command.types[i];\r\n                        const value = CommandParser._getValueForType(type, results[i + 1]);\r\n                        args.push(value);\r\n                    }\r\n                    return command.action(...args);\r\n                }\r\n                catch (e) {\r\n                    console.log(e);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/voice-handlers/command-parser.js","import Beeper from './beeper';\r\nimport FileHelpers from './file-helpers';\r\nimport Logger from './ui/logger';\r\nimport PlaylistManager from './playlist-manager';\r\nimport SongFile from './song-file';\r\nimport SongInfo from './song-info';\r\nimport SongLibrary from './song-library';\r\nimport TabController from './ui/tab-controller';\r\nimport ToastController from './ui/toast-controller';\r\nimport CommandHandler from './voice-handlers/command-handler';\r\nimport WakeWordHandler from './voice-handlers/wake-word-handler';\r\nimport VoiceCommandListener from './voice-command-listener';\r\nimport '../vendor/jtmpl-1.1.0.min.js'; /* global jtmpl */\r\n\r\nif (VoiceCommandListener.checkCompatibility()) {\r\n    init();\r\n}\r\n\r\nfunction setElementClass(el, klass, isSet) {\r\n    if (isSet) {\r\n        el.classList.add(klass);\r\n    } else {\r\n        el.classList.remove(klass);\r\n    }\r\n}\r\n\r\nfunction init() {\r\n    const enableMicButton = document.getElementById('enableMicButton');\r\n    const loadDemoSongButton = document.getElementById('loadDemoSongButton');\r\n    const filesInput = document.getElementById('files');\r\n    const filesDropArea = document.getElementById('filesDropArea');\r\n\r\n    const noSongsContainer = document.getElementById('noSongsContainer');\r\n    const someSongsContainer = document.getElementById('someSongsContainer');\r\n    const sampleVoiceCommandSongName = document.getElementsByClassName('sampleVoiceCommandSongName');\r\n    const jumpToBarNumberInput = document.getElementById('jumpToBarNumber');\r\n    const jumpToBarButton = document.getElementById('jumpToBarButton');\r\n    const fromBarNumberInput = document.getElementById('fromBarNumber');\r\n    const toBarNumberInput = document.getElementById('toBarNumber');\r\n    const loopBarsButton = document.getElementById('loopBarsButton');\r\n\r\n    const importSongLibraryInput = document.getElementById('importSongLibraryInput');\r\n    const exportSongLibraryButton = document.getElementById('exportSongLibraryButton');\r\n\r\n    const loggerOutput = document.getElementById('loggerOutput');\r\n\r\n    const tabController = new TabController(document);\r\n    tabController.openTab('loadSongs');\r\n\r\n    const toastController = new ToastController(document);\r\n\r\n    const context = new (window.AudioContext || window.webkitAudioContext)();\r\n\r\n    const songLibrary = new SongLibrary();\r\n    const playlistManager = new PlaylistManager(context);\r\n    const jtmplModel = { playlist: [] };\r\n    jtmpl('#songsContainer', '#songTemplate', jtmplModel);\r\n\r\n    const jtmplSongs = jtmpl('#songsContainer');\r\n    jtmplSongs.on('update', (prop) => {\r\n        if (prop === 'playlist') {\r\n            songLibrary.updateSongInfos(jtmplModel.playlist);\r\n        }\r\n    });\r\n\r\n    let anySongsLoaded = false;\r\n    const addLoadedSong = (songFile) => {\r\n        const info = songLibrary.getSongInfoByName(songFile.fileName) || new SongInfo();\r\n        const songModel = {\r\n            name: songFile.fileName,\r\n            bpm: info.bpm,\r\n            beatsPerBar: info.beatsPerBar,\r\n            playbackSpeedPercent: info.playbackSpeed * 100,\r\n            escapedName: function () { return this('name').replace('\\'', '\\\\\\''); }\r\n        };\r\n\r\n        playlistManager.addSong(songFile.fileName, songFile.fileData);\r\n        jtmplModel.playlist.push(songModel);\r\n        jtmpl('#songsContainer').trigger('change', 'playlist');\r\n\r\n        if (!anySongsLoaded) {\r\n            noSongsContainer.classList.add('hidden');\r\n            someSongsContainer.classList.remove('hidden');\r\n            Array.from(sampleVoiceCommandSongName).forEach(el => el.innerText = songModel.name);\r\n            tabController.openTab('playlist');\r\n            anySongsLoaded = true;\r\n        }\r\n    };\r\n\r\n    const loadFileByUrl = (url) => {\r\n        FileHelpers.loadByUrl(url)\r\n            .then(file => {\r\n                const songFile = new SongFile(file.name.split('.')[0], file.contents);\r\n                addLoadedSong(songFile);\r\n            });\r\n    };\r\n    loadDemoSongButton.onclick = () => {\r\n        if (!songLibrary.getSongInfoByName('not just jazz')) {\r\n            songLibrary.updateSongInfos([{ name: 'not just jazz', bpm: 102 }]);\r\n        }\r\n        loadFileByUrl('audio/not just jazz.mp3');\r\n    };\r\n\r\n    const loadFiles = (files) => {\r\n        for (const f of files) {\r\n            FileHelpers.readArrayBufferFromFile(f)\r\n                .then(file => {\r\n                    const songFile = new SongFile(file.name.split('.')[0], file.contents);\r\n                    addLoadedSong(songFile);\r\n                });\r\n        }\r\n    };\r\n    filesInput.onchange = (evt) => {\r\n        loadFiles(evt.target.files);\r\n    };\r\n\r\n    filesDropArea.ondragover = (evt) => {\r\n        evt.dataTransfer.dropEffect = 'copy';\r\n        filesDropArea.classList.add('droppable');\r\n        return false;\r\n    };\r\n    filesDropArea.ondragleave = () => {\r\n        filesDropArea.classList.remove('droppable');\r\n    };\r\n    filesDropArea.ondrop = (evt) => {\r\n        filesDropArea.classList.remove('droppable');\r\n        loadFiles(evt.dataTransfer.files);\r\n        return false;\r\n    };\r\n\r\n    // wire up manual controls\r\n    window.barkeep_play = songName => {\r\n        try {\r\n            const songInfo = songLibrary.getSongInfoByName(songName);\r\n            playlistManager.playSong(songName, songInfo.bpm, songInfo.beatsPerBar, songInfo.playbackSpeed);\r\n        }\r\n        catch (e) {\r\n            alert(e);\r\n        }\r\n    };\r\n    jumpToBarButton.onclick = () => {\r\n        const barNumber = Number.parseInt(jumpToBarNumberInput.value);\r\n        toastController.show(`Bar ${barNumber}`);\r\n        playlistManager.jumpToBar(barNumber);\r\n    };\r\n    loopBarsButton.onclick = () => {\r\n        playlistManager.loopBars(Number.parseInt(fromBarNumberInput.value), Number.parseInt(toBarNumberInput.value));\r\n    };\r\n\r\n    enableMicButton.onclick = () => {\r\n        const beeper = new Beeper(context);\r\n        const wakeWordHandler = new WakeWordHandler();\r\n        wakeWordHandler.onWakeWord = (activated) => {\r\n            Array.from(document.getElementsByClassName('wake-word-indicator'))\r\n                .forEach(el => setElementClass(el, 'wake-word-indicator-on', activated));\r\n            if (activated) {\r\n                beeper.respond();\r\n                playlistManager.setVolume(.1);\r\n            }\r\n            else {\r\n                playlistManager.setVolume(1);\r\n            }\r\n            return true;\r\n        };\r\n\r\n        const commandHandler = new CommandHandler();\r\n        commandHandler.onBarCommand = (barNumber) => {\r\n            toastController.show(`Bar ${barNumber}`);\r\n            playlistManager.jumpToBar(barNumber);\r\n            return `Invoked Bar command with barNumber=${barNumber}`;\r\n        };\r\n        commandHandler.onLoopBarCommand = (barNumber) => {\r\n            playlistManager.loopBars(barNumber, barNumber);\r\n            return `Invoked LoopBar command with barNumber=${barNumber}`;\r\n        };\r\n        commandHandler.onLoopBarsCommand = (fromBarNumber, toBarNumber) => {\r\n            playlistManager.loopBars(fromBarNumber, toBarNumber);\r\n            return `Invoked LoopBars command with fromBarNumber=${fromBarNumber}, toBarNumber=${toBarNumber}`;\r\n        };\r\n        commandHandler.onPlayCommand = (input, playbackSpeedPercent, fromBarNumber) => {\r\n            try {\r\n                const songName = songLibrary.getSongNameFromInput(input);\r\n                if (!songName) {\r\n                    return false;\r\n                }\r\n\r\n                const songInfo = songLibrary.getSongInfoByName(songName);\r\n                if (!songInfo.bpm) {\r\n                    throw 'Please set BPM for ' + songName;\r\n                }\r\n\r\n                const playbackSpeed = (playbackSpeedPercent / 100) || songInfo.playbackSpeed;\r\n                playlistManager.playSong(songName, songInfo.bpm, songInfo.beatsPerBar, playbackSpeed, fromBarNumber);\r\n                return `Invoked Play command with input=${input}, playbackSpeedPercent=${playbackSpeedPercent}, fromBarNumber=${fromBarNumber}`;\r\n            }\r\n            catch (e) {\r\n                alert(e);\r\n                return false;\r\n            }\r\n        };\r\n        commandHandler.onStopCommand = () => {\r\n            playlistManager.stop();\r\n            return 'Invoked Stop command';\r\n        };\r\n\r\n        const logger = new Logger(loggerOutput);\r\n        const voiceCommandListener = new VoiceCommandListener(wakeWordHandler, commandHandler, logger);\r\n        voiceCommandListener.startListening();\r\n\r\n        commandHandler.onStopListeningCommand = () => {\r\n            voiceCommandListener.stopListening();\r\n            return 'Invoked StopListening command';\r\n        };\r\n\r\n        commandHandler.onNothingCommand = () => {\r\n            // no effect, but a successful command\r\n            return 'Invoked Nothing command';\r\n        };\r\n    };\r\n\r\n    importSongLibraryInput.onchange = (evt) => {\r\n        FileHelpers.readTextFromFile(evt.target.files[0])\r\n            .then(file => {\r\n                songLibrary.import(file.contents);\r\n                alert('imported!');\r\n            });\r\n    };\r\n    exportSongLibraryButton.onclick = () => {\r\n        const json = songLibrary.export();\r\n        FileHelpers.downloadFile('barkeep.json', json);\r\n    };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/main.js","export default class NoteConverter {\r\n    static getFrequencyFromNote(note) {\r\n        return 440 * Math.pow(2, (note - 69) / 12);\r\n    }\r\n    static getNoteFromFrequency(frequency) {\r\n        return Math.round(12 * (Math.log(frequency / 440) / Math.log(2))) + 69;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/note-converter.js","export default class FileHelpers {\r\n\r\n    static loadByUrl(url) {\r\n        return new Promise(function (resolve, reject) {\r\n            const request = new XMLHttpRequest();\r\n            request.open('GET', url);\r\n            request.responseType = 'arraybuffer';\r\n            request.onload = () => {\r\n                const urlParts = url.split('/');\r\n                const fileNamePart = urlParts[urlParts.length - 1];\r\n                resolve({ name: fileNamePart, contents: request.response });\r\n            };\r\n            request.onerror = () => {\r\n                reject({\r\n                    status: this.status,\r\n                    statusText: request.statusText\r\n                });\r\n            };\r\n            request.send();\r\n        });\r\n    }\r\n\r\n    static readArrayBufferFromFile(file) {\r\n        return new Promise(function (resolve, reject) {\r\n            const reader = new FileReader();\r\n            reader.onload = (evt) => {\r\n                resolve({ name: file.name, contents: evt.target.result });\r\n            };\r\n            reader.onerror = () => reject();\r\n            reader.readAsArrayBuffer(file);\r\n        });\r\n    }\r\n\r\n    static readTextFromFile(file) {\r\n        return new Promise(function (resolve, reject) {\r\n            const reader = new FileReader();\r\n            reader.onload = (evt) => {\r\n                resolve({ name: file.name, contents: evt.target.result });\r\n            };\r\n            reader.onerror = () => reject();\r\n            reader.readAsText(file);\r\n        });\r\n    }\r\n\r\n    static downloadFile(name, contents) {\r\n        const link = document.createElement('a');\r\n        link.download = name;\r\n        link.href = URL.createObjectURL(new Blob([contents]));\r\n        link.click();\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/file-helpers.js","export default class Logger {\r\n\r\n    constructor(outputElement) {\r\n        this.outputElement = outputElement;\r\n    }\r\n\r\n    log(level, message) {\r\n        const el = document.createElement('p');\r\n        el.classList.add('log');\r\n        el.classList.add('log-' + level);\r\n        el.innerText = message;\r\n        // prepend so latest message is always on top. better way?\r\n        this.outputElement.prepend(el);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/ui/logger.js","import Beeper from './beeper';\r\nimport BufferManager from './buffer-manager';\r\nimport SongPlayer from './song-player';\r\n\r\nexport default class PlaylistManager {\r\n\r\n    constructor(context) {\r\n        this.context = context;\r\n        this.beeper = new Beeper(context);\r\n        this.bufferManager = new BufferManager(context);\r\n    }\r\n\r\n    addSong(name, fileData) {\r\n        this.bufferManager.loadBuffer(name, fileData)\r\n            .then(() => {\r\n                // mark as loaded?\r\n            });\r\n    }\r\n\r\n    playSong(name, bpm, beatsPerBar, playbackSpeed = 1, fromBarNumber = 1) {\r\n        let noteNumber = 96;\r\n        const buffer = this.bufferManager.getBuffer(name, playbackSpeed, 12, p => {\r\n            console.log('Stretching...', p);\r\n            this.beeper.beep({ note: noteNumber++ });\r\n        });\r\n\r\n        if (this.currentSongPlayer) {\r\n            this.currentSongPlayer.stop();\r\n        }\r\n\r\n        this.beeper.beep();\r\n        this.currentSongPlayer = new SongPlayer(this.context, buffer, playbackSpeed, bpm, beatsPerBar);\r\n        this.currentSongPlayer.play(fromBarNumber);\r\n    }\r\n\r\n    jumpToBar(barNumber) {\r\n        if (this.currentSongPlayer) {\r\n            this.beeper.doubleBeep();\r\n            this.currentSongPlayer.play(barNumber);\r\n        }\r\n    }\r\n\r\n    loopBars(fromBarNumber, toBarNumber) {\r\n        if (this.currentSongPlayer) {\r\n            this.beeper.doubleBeep();\r\n            this.currentSongPlayer.loopBars(fromBarNumber, toBarNumber);\r\n        }\r\n    }\r\n\r\n    stop() {\r\n        if (this.currentSongPlayer) {\r\n            this.currentSongPlayer.stop();\r\n        }\r\n    }\r\n\r\n    setVolume(volume) {\r\n        if (this.currentSongPlayer) {\r\n            this.currentSongPlayer.setVolume(volume);\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/playlist-manager.js","import '../vendor/kali.min.js'; /* global Kali */\r\n\r\nexport default class BufferManager {\r\n\r\n    constructor(context) {\r\n        this.context = context;\r\n        this.bufferMap = new Map();\r\n    }\r\n\r\n    loadBuffer(songName, fileData) {\r\n        return new Promise((resolve, reject) => {\r\n            this.context.decodeAudioData(fileData, (buffer) => {\r\n                // set original buffer @1 x speed\r\n                this.bufferMap.set(songName + '@1', buffer);\r\n                resolve();\r\n            }, (e) => {\r\n                console.error(e);\r\n                reject();\r\n            });\r\n        });\r\n    }\r\n\r\n    getBuffer(songName, playbackSpeed = 1, progressIntervalCount = 12, progressCallback = undefined) {\r\n        const bufferKey = songName + '@' + playbackSpeed;\r\n        if (this.bufferMap.has(bufferKey)) {\r\n            return this.bufferMap.get(bufferKey);\r\n        }\r\n\r\n        // retrieve original buffer @1 x speed\r\n        const originalBuffer = this.bufferMap.get(songName + '@1');\r\n        if (!originalBuffer) {\r\n            throw 'Song not loaded: ' + songName;            \r\n        }\r\n\r\n        const buffer = BufferManager._stretch(this.context, originalBuffer,\r\n            playbackSpeed, 2, false, progressIntervalCount, progressCallback);\r\n        this.bufferMap.set(bufferKey, buffer);\r\n        return buffer;\r\n    }\r\n\r\n    static _stretch(context, buffer, playbackSpeed, numChannels, bestQuality, progressIntervalCount, progressCallback) {\r\n\r\n        if (playbackSpeed === 1.0) {\r\n            return buffer;\r\n        }\r\n\r\n        if (progressCallback) {\r\n            progressCallback(0);\r\n        }\r\n\r\n        const stretchSampleSize = 4096 * numChannels;\r\n        const inputBufferSize = buffer.getChannelData(0).length;\r\n        const outputBufferSize = Math.floor(inputBufferSize / playbackSpeed) + 1;\r\n\r\n        const outputAudioBuffer = context.createBuffer(numChannels, outputBufferSize, context.sampleRate);\r\n\r\n        let progressCounter = 0;\r\n        const progressIntervalSize = Math.floor(outputBufferSize * numChannels / progressIntervalCount);\r\n\r\n        for (let channel = 0; channel < numChannels; channel++) {\r\n            const inputData = buffer.getChannelData(channel);\r\n\r\n            const kali = new Kali(1);\r\n            kali.setup(context.sampleRate, playbackSpeed, !bestQuality);\r\n\r\n            const outputData = new Float32Array(outputBufferSize);\r\n\r\n            let inputOffset = 0;\r\n            let completedOffset = 0;\r\n            let flushed = false;\r\n\r\n            while (completedOffset < outputData.length) {\r\n                while (progressCallback && progressCounter >= progressIntervalSize) {\r\n                    progressCallback((completedOffset + outputBufferSize * channel) / (outputBufferSize * numChannels));\r\n                    progressCounter -= progressIntervalSize;\r\n                }\r\n\r\n                // Read stretched samples into outputData array\r\n                const framesCompleted = kali.output(outputData.subarray(completedOffset, Math.min(completedOffset + stretchSampleSize, outputData.length)));\r\n                completedOffset += framesCompleted;\r\n                progressCounter += framesCompleted;\r\n\r\n                if (inputOffset < inputData.length) {\r\n                    // If we have more data to write, write it\r\n                    const dataToInput = inputData.subarray(inputOffset, Math.min(inputOffset + stretchSampleSize, inputData.length));\r\n                    inputOffset += dataToInput.length;\r\n\r\n                    kali.input(dataToInput);\r\n                    kali.process();\r\n                } else if (!flushed) {\r\n                    kali.flush();\r\n                    flushed = true;\r\n                }\r\n            }\r\n\r\n            outputAudioBuffer.getChannelData(channel).set(outputData);\r\n        }\r\n\r\n        return outputAudioBuffer;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/buffer-manager.js","!function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p=\"\",t(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){function i(e){return Math.floor(e)}var n=r(2),s=function(){function e(){this.is_initialized=!1,this.sample_rate=44100,this.channels=0,this.quick_search=!1,this.factor=0,this.search=0,this.segment=0,this.overlap=0,this.process_size=0,this.samples_in=0,this.samples_out=0,this.segments_total=0,this.skip_total=0}return e}(),o=function(){function e(e){var t=new s;t.channels=e,t.input_fifo=new n(Float32Array),t.output_fifo=new n(Float32Array),this.t=t}return e.prototype.difference=function(e,t,r){for(var i=0,n=0,n=0;r>n;n++)i+=Math.pow(e[n]-t[n],2);return i},e.prototype.tempo_best_overlap_position=function(e,t){var r,i,n,s=e.overlap_buf,o=e.search+1>>>1,a=64,p=i=e.quick_search?o:0,u=this.difference(t.subarray(e.channels*p),s,e.channels*e.overlap),f=0;if(e.quick_search){do{for(f=-1;1>=f;f+=2)for(r=1;(4>r||64==a)&&(p=o+f*r*a,!(0>p||p>=e.search));r++)n=this.difference(t.subarray(e.channels*p),s,e.channels*e.overlap),u>n&&(u=n,i=p);o=i}while(a>>>=2)}else for(p=1;p<e.search;p++)n=this.difference(t.subarray(e.channels*p),s,e.channels*e.overlap),u>n&&(u=n,i=p);return i},e.prototype.tempo_overlap=function(e,t,r,i){var n=0,s=0,o=0,a=1/e.overlap;for(n=0;n<e.overlap;n++){var p=a*n,u=1-p;for(s=0;s<e.channels;s++,o++)i[o]=t[o]*u+r[o]*p}},e.prototype.process=function(){for(var e=this.t;e.input_fifo.occupancy()>=e.process_size;){var t,r;e.segments_total?(r=this.tempo_best_overlap_position(e,e.input_fifo.read_ptr(0)),this.tempo_overlap(e,e.overlap_buf,e.input_fifo.read_ptr(e.channels*r),e.output_fifo.write_ptr(e.overlap))):(r=e.search/2,e.output_fifo.write(e.input_fifo.read_ptr(e.channels*r,e.overlap),e.overlap)),e.output_fifo.write(e.input_fifo.read_ptr(e.channels*(r+e.overlap)),e.segment-2*e.overlap);var n=e.channels*e.overlap;e.overlap_buf.set(e.input_fifo.read_ptr(e.channels*(r+e.segment-e.overlap)).subarray(0,n)),e.segments_total++,t=i(e.factor*(e.segment-e.overlap)+.5),e.input_fifo.read(null,t)}},e.prototype.input=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=0),null==t&&(t=e.length);var i=this.t;i.samples_in+=t,i.input_fifo.write(e,t)},e.prototype.output=function(e){var t=this.t,r=Math.min(e.length,t.output_fifo.occupancy());return t.samples_out+=r,t.output_fifo.read(e,r),r},e.prototype.flush=function(){var e=this.t,t=i(e.samples_in/e.factor+.5),r=t>e.samples_out?t-e.samples_out:0,n=new Float32Array(128*e.channels);if(r>0){for(;e.output_fifo.occupancy()<r;)this.input(n,128),this.process();e.samples_in=0}},e.prototype.setup=function(t,r,n,s,o,a){void 0===n&&(n=!1),void 0===s&&(s=null),void 0===o&&(o=null),void 0===a&&(a=null);var p=1,u=this.t;u.sample_rate=t,null==s&&(s=Math.max(10,e.segments_ms[p]/Math.max(Math.pow(r,e.segments_pow[p]),1))),null==o&&(o=s/e.searches_div[p]),null==a&&(a=s/e.overlaps_div[p]);var f;if(u.quick_search=n,u.factor=r,u.segment=i(t*s/1e3+.5),u.search=i(t*o/1e3+.5),u.overlap=Math.max(i(t*a/1e3+4.5),16),2*u.overlap>u.segment&&(u.overlap-=8),u.is_initialized){var h=new Float32Array(u.overlap*u.channels),l=0;u.overlap*u.channels<u.overlap_buf.length&&(l=u.overlap_buf.length-u.overlap*u.channels),h.set(u.overlap_buf.subarray(l,u.overlap_buf.length)),u.overlap_buf=h}else u.overlap_buf=new Float32Array(u.overlap*u.channels);f=i(Math.ceil(r*(u.segment-u.overlap))),u.process_size=Math.max(f+u.overlap,u.segment)+u.search,u.is_initialized||u.input_fifo.reserve(i(u.search/2)),u.is_initialized=!0},e.prototype.setTempo=function(e){var t=this.t;this.setup(t.sample_rate,e,t.quick_search)},e.segments_ms=[82,82,35,20],e.segments_pow=[0,1,.33,1],e.overlaps_div=[6.833,7,2.5,2],e.searches_div=[5.587,6,2.14,2],e}();window&&(window.Kali=o),e.exports=o},function(e,t){var r=function(){function e(e){this.begin=0,this.end=0,this.typedArrayConstructor=e,this.buffer=new e(16384)}return e.prototype.clear=function(){this.begin=this.end=0},e.prototype.reserve=function(e){for(this.begin==this.end&&this.clear();;){if(this.end+e<this.buffer.length){var t=this.end;return this.end+=e,t}if(this.begin>16384)this.buffer.set(this.buffer.subarray(this.begin,this.end)),this.end-=this.begin,this.begin=0;else{var r=new this.typedArrayConstructor(this.buffer.length+e);r.set(this.buffer),this.buffer=r}}},e.prototype.write=function(e,t){var r=this.reserve(t);this.buffer.set(e.subarray(0,t),r)},e.prototype.write_ptr=function(e){var t=this.reserve(e);return this.buffer.subarray(t,t+e)},e.prototype.read=function(e,t){t+this.begin>this.end&&console.error(\"Read out of bounds\",t,this.end,this.begin),null!=e&&e.set(this.buffer.subarray(this.begin,this.begin+t)),this.begin+=t},e.prototype.read_ptr=function(e,t){return void 0===t&&(t=-1),t>this.occupancy()&&console.error(\"Read Pointer out of bounds\",t),0>t&&(t=this.occupancy()),this.buffer.subarray(this.begin+e,this.begin+t)},e.prototype.occupancy=function(){return this.end-this.begin},e}();e.exports=r}]);\n\n\n// WEBPACK FOOTER //\n// ./vendor/kali.min.js","export default class SongPlayer {\r\n\r\n    constructor(context, buffer, bufferRate, bpm, beatsPerBar) {\r\n        this.context = context;\r\n        this.buffer = buffer;\r\n        this.bpm = bpm;\r\n        this.beatsPerBar = beatsPerBar;\r\n        this.secondsPerBar = this.beatsPerBar * 60 / (bufferRate * bpm);\r\n    }\r\n\r\n    play(barNumber) {\r\n        this.stop();\r\n\r\n        const gainNode = this.context.createGain();\r\n        gainNode.gain.value = 1;\r\n        gainNode.connect(this.context.destination);\r\n        this.gainNode = gainNode;\r\n\r\n        const source = this.context.createBufferSource();\r\n        source.buffer = this.buffer;\r\n        source.connect(gainNode);\r\n\r\n        const startTime = this.getStartTimeInSeconds(barNumber || 0);\r\n        source.start(0, startTime);\r\n        this.currentSource = source;\r\n    }\r\n\r\n    loopBars(fromBarNumber, toBarNumber) {\r\n        this.stop();\r\n        const source = this.context.createBufferSource();\r\n        source.buffer = this.buffer;\r\n        source.connect(this.context.destination);\r\n        source.loop = true;\r\n        source.loopStart = this.getStartTimeInSeconds(fromBarNumber);\r\n        // toBarNumber is inclusive, so add 1 to it\r\n        source.loopEnd = this.getStartTimeInSeconds(toBarNumber + 1);\r\n        source.start(0, source.loopStart);\r\n        this.currentSource = source;\r\n    }\r\n\r\n    setVolume(volume) {\r\n        if (this.gainNode) {\r\n            this.gainNode.gain.value = volume;\r\n        }\r\n    }\r\n\r\n    stop() {\r\n        if (this.currentSource) {\r\n            this.currentSource.stop();\r\n        }\r\n    }\r\n\r\n    getStartTimeInSeconds(barNumber) {\r\n        const startTimeInSeconds = ((barNumber - 1) * this.secondsPerBar);\r\n        return Math.max(0, startTimeInSeconds);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/song-player.js","export default class SongFile {\r\n    constructor(fileName, fileData) {\r\n        this.fileName = fileName;\r\n        this.fileData = fileData;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/song-file.js","import SongInfo from './song-info';\r\n\r\nexport default class SongLibrary {\r\n\r\n    constructor() {\r\n        this.songInfos = this.retrieveFromStorage();\r\n    }\r\n\r\n    getSongNameFromInput(input) {\r\n        if (input.trim().length === 0) {\r\n            return null;\r\n        }\r\n        // TODO: account for case sensitivity?\r\n        if (this.songInfos.has(input)) {\r\n            return input;\r\n        }\r\n        // best guess at name?\r\n        input = input.toLowerCase();\r\n        for (const key of this.songInfos.keys()) {\r\n            if (key.toLowerCase().indexOf(input) >= 0) {\r\n                return key;\r\n            }\r\n        }\r\n        // no match :(\r\n        return null;\r\n    }\r\n\r\n    getSongInfoByName(name) {\r\n        return this.songInfos.get(name);\r\n    }\r\n\r\n    updateSongInfos(songs) {\r\n        for (let i = 0; i < songs.length; i++) {\r\n            // add or update\r\n            this.songInfos.set(songs[i].name, SongInfo.fromObject(songs[i]));\r\n        }\r\n        this.persistToStorage();\r\n    }\r\n\r\n    persistToStorage() {\r\n        // can't serialize Map, so use spread operator to convert to Array\r\n        const json = JSON.stringify([... this.songInfos]);\r\n        localStorage.setItem('song-library', json);\r\n    }\r\n\r\n    retrieveFromStorage() {\r\n        const jsonFromStorage = localStorage.getItem('song-library');\r\n        return new Map(JSON.parse(jsonFromStorage));\r\n    }\r\n\r\n    import(json) {\r\n        const songsToImport = new Map(JSON.parse(json));\r\n        this.songInfos = new Map([... this.songInfos, ...songsToImport]);\r\n        this.persistToStorage();\r\n    }\r\n\r\n    export() {\r\n        return localStorage.getItem('song-library');\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/song-library.js","export default class TabController {\r\n\r\n    constructor(document) {\r\n        this.tabLinks = Array.from(document.getElementsByClassName('tab-link'));\r\n        this.tabPanes = Array.from(document.getElementsByClassName('tab-pane'));\r\n\r\n        this.tabLinks.forEach(\r\n            tabLink => {\r\n                tabLink.onclick = () => { this.openTab(TabController._getTargetTabId(tabLink)); };\r\n            });\r\n    }\r\n\r\n    static _getTargetTabId(tabLink) {\r\n        return tabLink.getAttribute('href').substring(1);\r\n    }\r\n\r\n    openTab(targetTabId) {\r\n        const toggleActive = (tabId, el) => {\r\n            if (tabId === targetTabId) {\r\n                el.classList.add('active');\r\n            } else {\r\n                el.classList.remove('active');\r\n            }\r\n        };\r\n        this.tabLinks.forEach(\r\n            tabLink => {\r\n                toggleActive(TabController._getTargetTabId(tabLink), tabLink);\r\n            });\r\n        this.tabPanes.forEach(\r\n            tabContents => {\r\n                toggleActive(tabContents.id, tabContents);\r\n            });\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/ui/tab-controller.js","export default class ToastController {\r\n\r\n    constructor(document) {\r\n        const toastElement = document.createElement('div');\r\n        toastElement.classList.add('toast');\r\n        document.body.appendChild(toastElement);\r\n        this.toastElement = toastElement;\r\n    }\r\n\r\n    show(message, durationMilliseconds = 3000) {\r\n        this.toastElement.innerHTML = message;\r\n        this.toastElement.classList.add('show');\r\n        setTimeout(() => { this.toastElement.classList.remove('show'); }, durationMilliseconds);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/ui/toast-controller.js","import CommandParser from './command-parser';\r\n\r\nexport default class CommandHandler {\r\n\r\n    constructor() {\r\n        this.commandParser = new CommandParser({\r\n            synonyms: {\r\n                'bar': ['ba', 'baar'],\r\n                'loop': ['Luke', 'loot', 'loupe']\r\n            },\r\n            commands: {\r\n                'play {words} at {number}% from [bar] {number}':\r\n                (songName, playbackSpeedPercent, o, barNumber) => this.onPlayCommand(songName, playbackSpeedPercent, barNumber),\r\n                'play {words} from [bar] {number} at {number}%':\r\n                (songName, o, barNumber, playbackSpeedPercent) => this.onPlayCommand(songName, playbackSpeedPercent, barNumber),\r\n                'play {words} from [bar] {number}':\r\n                (songName, o, barNumber) => this.onPlayCommand(songName, 100, barNumber),\r\n                'play {words} at {number}%':\r\n                (songName, playbackSpeedPercent) => this.onPlayCommand(songName, playbackSpeedPercent),\r\n                'play {words}':\r\n                (songName) => this.onPlayCommand(songName),\r\n                'stop listening':\r\n                () => this.onStopListeningCommand(),\r\n                'stop':\r\n                () => this.onStopCommand(),\r\n                '[bar] {number}':\r\n                (barSynonym, barNumber) => this.onBarCommand(barNumber),\r\n                '[loop] from [bar] {number} through to [bar] {number}':\r\n                (loopSynonym, barSynonym1, fromBarNumber, barSynonym2, toBarNumber) => this.onLoopBarsCommand(fromBarNumber, toBarNumber),\r\n                '[loop] [bar] {number}':\r\n                (loopSynonym, barSynonym, barNumber) => this.onLoopBarCommand(barNumber),\r\n                'nothing':\r\n                () => this.onNothingCommand()\r\n            }\r\n        });\r\n    }\r\n\r\n    handle(statement) {\r\n        // split \"words\" like \"bar2\" into \"bar 2\"\r\n        statement = statement.replace(/(\\d+)/g, ' $1').trim();\r\n        // fix \"110 percent\" -> \"110%\"\r\n        statement = statement.replace(/( percent)/g, '%').trim();\r\n        return this.commandParser.parse(statement);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/voice-handlers/command-handler.js","import CommandParser from './command-parser';\r\n\r\nexport default class WakeWordHandler {\r\n\r\n    constructor() {\r\n        this.commandParser = new CommandParser({\r\n            synonyms: {\r\n                'barkeep': ['bar keep', 'party', 'barking', 'barky', 'barbie', 'turkey', 'perky', 'marquee', 'martin', 'body']\r\n            },\r\n            commands: {\r\n                '[barkeep]': () => this.onWakeWord(true),\r\n                '{words} [barkeep]': () => this.onWakeWord(true)\r\n            }\r\n        });\r\n    }\r\n\r\n    handle(statement) {\r\n        return this.commandParser.parse(statement);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/voice-handlers/wake-word-handler.js","export default class VoiceCommandListener {\r\n\r\n    static checkCompatibility() {\r\n        if (!(window.SpeechRecognition || window.webkitSpeechRecognition)) {\r\n            alert('SpeechRecognition is not supported. Please use a compatible browser, eg Chrome.');\r\n            return false;\r\n        }\r\n        const isLocalhost = location.host.startsWith('localhost');\r\n        if (isLocalhost) {\r\n            return true;\r\n        }\r\n        const isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\r\n        if (isChrome && location.protocol !== 'https:') {\r\n            alert('Chrome requires https for SpeechRecognition. Redirecting now!');\r\n            location.protocol = 'https:';\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    constructor(wakeWordHandler, commandHandler, logger) {\r\n        this.wakeWordHandler = wakeWordHandler;\r\n        this.commandHandler = commandHandler;\r\n        this.logger = logger;\r\n        this.stopped = false;\r\n    }\r\n\r\n    setWakeWordActive(active) {\r\n        if (active) {\r\n            this.logger.log('info', 'Wake word activated');            \r\n            this.wakeWordActive = true;\r\n            this.wakeWordActivatedAt = new Date();\r\n        } else {\r\n            this.logger.log('info', 'Wake word deactivated');\r\n            this.wakeWordActive = false;\r\n            this.wakeWordHandler.onWakeWord(false);\r\n        }    \r\n    }\r\n\r\n    startListening() {\r\n        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();\r\n        // recognition.continuous = true;\r\n        // TODO: other languages?\r\n        recognition.lang = 'en-US';\r\n        recognition.interimResults = false;\r\n        recognition.maxAlternatives = 5;\r\n        recognition.start();\r\n\r\n        recognition.onaudioend = () => {\r\n            // start listening again after audio ends\r\n            if (!this.stopped) {\r\n                this.startListening();\r\n            }\r\n        };\r\n\r\n        recognition.onresult = ev => {\r\n            const speechResults = ev.results[0];\r\n            for (const speechResult of speechResults) {\r\n\r\n                if (!this.wakeWordActive) {\r\n                    if (this.wakeWordHandler.handle(speechResult.transcript)) {\r\n                        this.setWakeWordActive(true);\r\n                        recognition.stop();\r\n                        this.startListening();\r\n                        break;\r\n                    }\r\n                } else {\r\n                    const commandResult = this.commandHandler.handle(speechResult.transcript);\r\n                    if (commandResult) {\r\n                        this.logger.log('success', `Command: \"${speechResult.transcript}\", result: \"${commandResult}\"`);\r\n                        this.setWakeWordActive(false);\r\n                        break;\r\n                    }\r\n\r\n                    this.logger.log('error', `Unrecognised command: \"${speechResult.transcript}\"`);\r\n                }\r\n            }\r\n        };\r\n\r\n        this.currentSpeechRecognition = recognition;\r\n    }\r\n\r\n    stopListening() {\r\n        this.stopped = true;\r\n        if (this.currentSpeechRecognition) {\r\n            this.currentSpeechRecognition.stop();\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/voice-command-listener.js","!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var t;\"undefined\"!=typeof window?t=window:\"undefined\"!=typeof global?t=global:\"undefined\"!=typeof self&&(t=self),t.jtmpl=e()}}(function(){var define,module,exports;return function e(t,n,r){function o(i,l){if(!n[i]){if(!t[i]){var c=\"function\"==typeof require&&require;if(!l&&c)return c(i,!0);if(a)return a(i,!0);throw new Error(\"Cannot find module '\"+i+\"'\")}var d=n[i]={exports:{}};t[i][0].call(d.exports,function(e){var n=t[i][1][e];return o(n?n:e)},d,d.exports,e,t,n,r)}return n[i].exports}for(var a=\"function\"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t){\"use strict\";function n(e,t,r,o){function a(e,t){if(!e)throw t||\"assertion failed\"}function i(e,t){for(var n=0,r=Object.getOwnPropertyNames(t),o=r.length;o>n;n++)e[r[n]]=t[r[n]]}function l(e,t){if(\"object\"==typeof e&&null!==e&&\"object\"==typeof t&&null!==t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n))return!1;if(!l(e[n],t[n]))return!1}return!0}return e!==t?!1:!0}function c(){var e=arguments[0],t=[\"string\",\"number\"].indexOf(typeof arguments[1])>-1?arguments[1]:null,n=\"function\"==typeof arguments[1]?arguments[1]:\"function\"==typeof arguments[2]?arguments[2]:null;a([\"change\",\"update\",\"insert\",\"delete\"].indexOf(e)>-1),a([\"change\"].indexOf(e)>-1&&null!==t||[\"insert\",\"delete\",\"update\"].indexOf(e)>-1&&null===t),N[e][t]||(N[e][t]=[]),-1===N[e][t].indexOf(n)&&N[e][t].push(n)}function d(){var e,t=arguments[0],n=\"string\"==typeof arguments[1]?arguments[1]:null,r=\"function\"==typeof arguments[1]?arguments[1]:\"function\"==typeof arguments[2]?arguments[2]:null;N[t][n]&&(r?(e=N[t][n].indexOf(r),e>-1&&N[t][n].splice(e,1)):N[t][n]=[])}function u(e,t,n){var r,o=N[e][[\"change\"].indexOf(e)>-1?t:null]||[],a=o.length;for(r=0;a>r;r++)o[r].call(C,t,n)}function p(){function t(e){var n,r=Array.isArray(e)?[]:{};for(n in e)\"object\"==typeof e[n]?r[n]=t(e[n]):\"function\"!=typeof e[n]&&\"_\"!==n[0]&&(r[n]=e[n]);return r}return JSON.stringify(t(e))}function s(t){var n;\"string\"==typeof t&&(t=JSON.parse(t));for(n in t)C(n,t[n]),u(\"update\",n);C.len=e.length}function f(e){l(b[e],h(e,function(){},!0))||u(\"change\",e);for(var t=0,n=x[e]||[],r=n.length;r>t;t++)delete S[n[t]],O[e][t].trigger(\"update\",n[t]);C.parent&&C.parent.trigger(\"update\",C.prop)}function m(e){function n(t){return function(n,r){return t._dependentProps[n]||(t._dependentProps[n]=[],t._dependentContexts[n]=[]),-1===t._dependentProps[n].indexOf(e)&&(t._dependentProps[n].push(e),t._dependentContexts[n].push(C)),t(n,r,!0)}}var o=n(C);return j(o),r&&(o.parent=n(r)),o.root=n(t||C),o}function g(e){var t,n;if(e&&\"object\"==typeof e){n={};for(t in e)n[t]=e[t]}else n=e;return n}function h(t,n,r){var o=e[t];return\"function\"==typeof o?(o=o.call(m(t),n),r||(b[t]=void 0===o?o:g(o))):r||(b[t]=o),o}function v(e,r,o){var a=h(e,r,o);return a&&\"object\"==typeof a?S[e]?S[e]:S[e]=n(a,t||C,C,e):a}function y(t,n){var r=h(t);\"function\"==typeof e[t]?e[t].call(m(t),n):(e[t]=n,n&&\"object\"==typeof n&&(delete b[t],delete S[t])),r!==n&&u(\"update\",t)}function _(e,t,n){return(void 0===t||\"function\"==typeof t?v:y)(e,t,n)}function j(n){function a(t,r){return function(){var o=[][t].apply(e,arguments);return this.len=this.values.length,b={},S={},r.apply(this,arguments),n.parent.trigger(\"update\",n.prop),o}}i(n,{values:e,parent:r||null,root:t||n,prop:void 0===o?null:o,on:c,off:d,trigger:u,toJSON:p,fromJSON:s,_dependentProps:x,_dependentContexts:O}),Array.isArray(e)&&i(n,{len:e.length,pop:a(\"pop\",function(){u(\"delete\",this.len,1)}),push:a(\"push\",function(){u(\"insert\",this.len-1,1)}),reverse:a(\"reverse\",function(){u(\"delete\",0,this.len),u(\"insert\",0,this.len)}),shift:a(\"shift\",function(){u(\"delete\",0,1)}),unshift:a(\"unshift\",function(){u(\"insert\",0,1)}),sort:a(\"sort\",function(){u(\"delete\",0,this.len),u(\"insert\",0,this.len)}),splice:a(\"splice\",function(){arguments[1]&&u(\"delete\",arguments[0],arguments[1]),arguments.length>2&&u(\"insert\",arguments[0],arguments.length-2)})})}var N={change:{},update:{},insert:{},\"delete\":{}},x={},O={},b={},S={};c(\"update\",f);var C=function(){return _.apply(null,arguments)};return j(C),C}\"object\"==typeof t&&(t.exports=n)},{}],2:[function(e,t){var n=/^\\{\\{([\\w\\.\\-]+)\\}\\}$/;t.exports=[function(e,t){var r=e.getAttribute(t).match(n);return\"value\"===t&&r?{prop:r[1],rule:function(e,t,n,r){function o(){var o=jtmpl._get(n,r);e[t]!==o&&(e[t]=o||\"\")}var a=[\"text\",\"password\"].indexOf(e.type)>-1?\"keyup\":\"change\";e.addEventListener(a,function(){n(r,e[t])}),n.on(\"change\",r,o),o()}}:void 0},function(e,t){var r=e.getAttribute(t).match(n);return\"jtmpl-selected\"===t&&r?{prop:r[1],rule:function(e,t,n,r){function o(){if(\"OPTION\"===e.nodeName){var t=selects.indexOf(e.parentNode);if(selectsUpdating[t])return;for(var o=0,a=selectOptions[t].length;a>o;o++)selectOptions[t][o].selected=selectOptionsContexts[t][o](r)}else e.selected=n(r)}\"OPTION\"===e.nodeName?setTimeout(function(){var t=selects.indexOf(e.parentNode);-1===t&&(t=selects.push(e.parentNode)-1,selectOptions.push([]),selectOptionsContexts.push([]),e.parentNode.addEventListener(\"change\",function(){selectsUpdating[t]=!0;for(var e=0,n=selectOptions[t].length;n>e;e++)selectOptionsContexts[t][e](r,selectOptions[t][e].selected);selectsUpdating[t]=!1})),selectOptions[t].push(e),selectOptionsContexts[t].push(n)},0):e.addEventListener(\"change\",function(){n(r,this.selected)}),n.on(\"change\",r,o),setTimeout(o)}}:void 0},function(e,t){var r=e.getAttribute(t).match(n);return\"jtmpl-checked\"===t&&r?{prop:r[1],rule:function(e,t,n,r){function o(){if(e.name){if(radioGroupsUpdating[e.name])return;for(var t=0,o=radioGroups[e.name][0].length;o>t;t++)radioGroups[e.name][0][t].checked=radioGroups[e.name][1][t](r)}else e.checked=n(r)}function a(){\"radio\"===e.type&&e.name&&(radioGroups[e.name]||(radioGroups[e.name]=[[],[]]),radioGroups[e.name][0].push(e),radioGroups[e.name][1].push(n)),e.addEventListener(\"click\",function(){if(\"radio\"===e.type&&e.name){radioGroupsUpdating[e.name]=!0;for(var t=0,o=radioGroups[e.name][0].length;o>t;t++)radioGroups[e.name][1][t](r,radioGroups[e.name][0][t].checked);radioGroupsUpdating[e.name]=!1}else n(r,e.checked)}),n.on(\"change\",r,o),setTimeout(o)}setTimeout(a)}}:void 0},function(e,t){var r=e.getAttribute(t).match(n);return r?{prop:r[1],rule:function(e,t,n,r){function o(){var o=jtmpl._get(n,r);return o?e.setAttribute(t,o):e.removeAttribute(t)}n.on(\"change\",r,o),o()}}:void 0},function(e,t){return{prop:e.getAttribute(t),rule:function(e,t,n,r){function o(){e.setAttribute(a,jtmpl.utemplate(r,n,o))}var a=t.replace(\"jtmpl-\",\"\");o()}}}]},{}],3:[function(_dereq_,module,exports){module.exports=[function(e){return e.innerHTML.match(/^[\\w\\.\\-]+$/)?{prop:e.innerHTML,rule:function(e,t,n){var r=document.createTextNode(jtmpl._get(t,n)||\"\");e.appendChild(r),t.on(\"change\",n,function(){r.data=jtmpl._get(t,n)||\"\"})}}:void 0},function(e){var t=e.innerHTML.match(/^&([\\w\\.\\-]+)$/);return t?{prop:t[1],rule:function(e,t,n){function r(){for(var e,r=document.createDocumentFragment(),i=document.createElement(\"body\");a;)o.parentNode.removeChild(o.previousSibling),a--;for(i.innerHTML=t(n)||\"\",a=i.childNodes.length,e=0;a>e;e++)r.appendChild(i.childNodes[0]);o.parentNode.insertBefore(r,o)}var o=document.createComment(\"\"),a=0;e.appendChild(o),t.on(\"change\",n,r),r()}}:void 0},function(e){var t=e.innerHTML.match(/>([\\w\\.\\-]+)|'([^\\']*)\\'|\"([^\"]*)\"/);return t?{prop:t,rule:function(e,t,n){function r(){o||(o=a.parentNode),jtmpl.loader(o,n[1]?t(n[1]):n[2]||n[3],t)}var o,a=document.createComment(\"\");n[1]&&t.on(\"change\",n[1],r),e.appendChild(a),setTimeout(r)}}:void 0},function(node){var match=node.innerHTML.match(/^#([\\w\\.\\-]+)$/);return match?{block:match[1],rule:function(fragment,model,prop,template){function update(i){return function(){for(var parent=anchor.parentNode,anchorIndex=[].indexOf.call(parent.childNodes,anchor),pos=anchorIndex-length+i*chunkSize,size=chunkSize,arr=\".\"===prop?model:model(prop);size--;)parent.removeChild(parent.childNodes[pos]);parent.insertBefore(eval(template+\"(arr(i))\"),parent.childNodes[pos])}}function insert(index,count){var parent=anchor.parentNode,anchorIndex=[].indexOf.call(parent.childNodes,anchor),pos=anchorIndex-length+index*chunkSize,size=count*chunkSize,i,fragment,arr=\".\"===prop?model:model(prop);for(i=0,fragment=document.createDocumentFragment();count>i;i++)fragment.appendChild(eval(template+\"(arr(index + i))\"));parent.insertBefore(fragment,parent.childNodes[pos]),length+=size}function del(e,t){var n=anchor.parentNode,r=[].indexOf.call(n.childNodes,anchor),o=r-length+e*chunkSize,a=t*chunkSize;for(length-=a;a--;)n.removeChild(n.childNodes[o])}function change(){for(var val=\".\"===prop?model:model(prop),i,len,render;length;)anchor.parentNode.removeChild(anchor.previousSibling),length--;if(\"function\"==typeof val&&void 0!==val.len){val.on(\"insert\",insert),val.on(\"delete\",del),render=document.createDocumentFragment();var func=eval(template),child,childModel;for(i=0,len=val.values.length;len>i;i++)val.on(\"change\",i,update(i)),childModel=val(i),child=func(childModel),child.__jtmpl__=childModel,render.appendChild(child);length=render.childNodes.length,chunkSize=~~(length/len),anchor.parentNode.insertBefore(render,anchor)}else\"function\"==typeof val&&void 0===val.len?(render=eval(template+\"(val)\"),length=render.childNodes.length,chunkSize=length,anchor.parentNode.insertBefore(render,anchor),anchor.parentNode.__jtmpl__=model):val&&(render=eval(template+\"(model)\"),length=render.childNodes.length,chunkSize=length,anchor.parentNode.insertBefore(render,anchor))}var anchor=document.createComment(\"\"),length=0,chunkSize;fragment.appendChild(anchor),change(),model.on(\"change\",prop,change)}}:void 0},function(node){var match=node.innerHTML.match(/^\\^([\\w\\.\\-]+)$/);return match?{block:match[1],rule:function(fragment,model,prop,template){function change(){for(var val=\".\"===prop?model:model(prop),i,len,render;length;)anchor.parentNode.removeChild(anchor.previousSibling),length--;\"function\"==typeof val&&void 0!==val.len?(val.on(\"insert\",change),val.on(\"delete\",change),render=document.createDocumentFragment(),0===val.len&&render.appendChild(eval(template+\"(val(i))\")),length=render.childNodes.length,anchor.parentNode.insertBefore(render,anchor)):val||(render=eval(template+\"(model)\"),length=render.childNodes.length,anchor.parentNode.insertBefore(render,anchor))}var anchor=document.createComment(\"\"),length=0;fragment.appendChild(anchor),change(),model.on(\"change\",prop,change)}}:void 0},function(){return{rule:function(e){e.appendChild(document.createTextNode(\"REMOVEMELATER\"))}}}]},{}],4:[function(e,t){function n(t,o,a){var i,l,c,d,u,p=\"(function(model) {\\nvar frag = document.createDocumentFragment(), node;\\n\\n\";a||(p+=\"var radioGroups = {};\\nvar radioGroupsUpdating = {};\\nvar selects = [];\\nvar selectsUpdating = [];\\nvar selectOptions = [];\\nvar selectOptionsContexts = [];\\n\\n\"),p+='model = typeof model === \"function\" ?model : typeof model === \"object\" ?jtmpl(model) :jtmpl({\".\": model});\\n\\n';for(var s,f=0,m=t.childNodes,g=m.length;g>f;f++)switch(s=m[f],s.nodeType){case 1:if(\"SCRIPT\"===s.nodeName&&\"text/jtmpl-tag\"===s.type){for(i=0,l=e(\"./compile-rules-node\"),c=l.length;c>i;i++)if(d=l[i](s)){if(d.block){for(u=document.createDocumentFragment(),f++;g>f&&!r(d.block,m[f].innerHTML||\"\");f++)u.appendChild(m[f].cloneNode(!0));if(f===g)throw\"jtmpl: Unclosed \"+d.block;p+=\"(\"+d.rule.toString()+\")(frag, model, \"+JSON.stringify(d.block)+\", \"+JSON.stringify(n(u,o&&o+\"-\"+s.innerHTML+\"[\"+f+\"]\",(a||0)+1))+\");\"}else p+=\"(\"+d.rule.toString()+\")(frag, model, \"+JSON.stringify(d.prop)+\");\\n\";break}}else{p+='node = document.createElement(\"'+s.nodeName+'\");\\n';for(var h=0,v=s.attributes,y=v.length;y>h;h++)for(i=0,l=e(\"./compile-rules-attr\"),c=l.length;c>i;i++)if(d=l[i](s,v[h].name.toLowerCase())){p+=\"(\"+d.rule.toString()+\")(node, \"+JSON.stringify(v[h].name)+\", model, \"+JSON.stringify(d.prop)+\");\\n\";break}\"INPUT\"!==s.nodeName&&(p+=\"node.appendChild(\"+n(s,o&&o+\"-\"+s.nodeName+\"[\"+f+\"]\",(a||0)+1)+\"(model));\\n\"),p+=\"frag.appendChild(node);\\n\"}break;case 3:p+=\"frag.appendChild(document.createTextNode(\"+JSON.stringify(s.data)+\"));\\n\";break;case 8:p+=\"frag.appendChild(document.createComment(\"+JSON.stringify(s.data)+\"));\\n\"}return p+=\"return frag; })\",p+=o?\"\\n//@ sourceURL=\"+o+\"\\n//# sourceURL=\"+o+\"\\n\":\"\"}function r(e,t){var n=t.match(/^\\/([\\w\\.\\-]+)?$/);return n?\"\"===e||!n[1]||n[1]===e:!1}t.exports=n},{\"./compile-rules-attr\":2,\"./compile-rules-node\":3}],5:[function(_dereq_,module,exports){function jtmpl(){var args=[].slice.call(arguments),target,t,template,model;return[\"GET\",\"POST\"].indexOf(args[0])>-1?_dereq_(\"./xhr\").apply(null,args):1===args.length&&\"object\"==typeof args[0]?_dereq_(\"freak\")(args[0]):1===args.length&&\"string\"==typeof args[0]?document.querySelector(args[0]).__jtmpl__:void((args[0]&&args[0].nodeType||\"string\"==typeof args[0])&&(args[1]&&\"function\"==typeof args[1].appendChild||\"string\"==typeof args[1])&&void 0!==args[2]&&(target=args[0]&&args[0].nodeType?args[0]:document.querySelector(args[0]),template=args[1].match(jtmpl.RE_NODE_ID)?document.querySelector(args[1]).innerHTML:args[1],model=\"function\"==typeof args[2]?args[2]:jtmpl(\"object\"==typeof args[2]?args[2]:\"string\"==typeof args[2]&&args[2].match(jtmpl.RE_NODE_ID)?_dereq_(\"./loader\")(document.querySelector(args[2]).innerHTML):{\".\":args[2]}),\"SCRIPT\"===target.nodeName&&(t=document.createElement(\"div\"),t.id=target.id,target.parentNode.replaceChild(t,target),target=t),target.__jtmpl__=model,target.innerHTML=\"\",target.appendChild(eval(jtmpl.compile(jtmpl.parse(template),target.getAttribute(\"data-jtmpl\"))+\"(model)\"))))}window.addEventListener(\"DOMContentLoaded\",function(){for(var e=_dereq_(\"./loader\"),t=document.querySelectorAll(\"[data-jtmpl]\"),n=0,r=t.length;r>n;n++)e(t[n],t[n].getAttribute(\"data-jtmpl\"))}),jtmpl.RE_NODE_ID=/^#[\\w\\.\\-]+$/,jtmpl.RE_ENDS_WITH_NODE_ID=/.+(#[\\w\\.\\-]+)$/,jtmpl.parse=_dereq_(\"./parse\"),jtmpl.compile=_dereq_(\"./compile\"),jtmpl.loader=_dereq_(\"./loader\"),jtmpl.utemplate=_dereq_(\"./utemplate\"),jtmpl._get=function(e,t){var n=e(t);return\"function\"==typeof n?JSON.stringify(n.values):n},_dereq_(\"./polyfills/matches\"),jtmpl.plugins=_dereq_(\"./plugins\"),module.exports=jtmpl,\"undefined\"!=typeof window&&(window.jtmpl=jtmpl)},{\"./compile\":4,\"./loader\":6,\"./parse\":7,\"./plugins\":8,\"./polyfills/matches\":12,\"./utemplate\":13,\"./xhr\":14,freak:1}],6:[function(_dereq_,module,exports){module.exports=function(target,src,model){function mixin(e,t){for(var n in t)0===n.indexOf(\"__\")&&n.lastIndexOf(\"__\")===n.length-2||\"function\"==typeof t[n]?void 0===e.values[n]&&(e.values[n]=t[n]):void 0===e(n)&&e(n,t[n])}function applyPlugins(){var e,t;for(e in jtmpl.plugins)plugin=jtmpl.plugins[e],t=model.values[\"__\"+e+\"__\"],\"function\"==typeof plugin&&void 0!==t&&plugin.call(model,t,target)}function evalObject(body,src){var result,module={exports:{}};return src=src?\"\\n//@ sourceURL=\"+src+\"\\n//# sourceURL=\"+src:\"\",body.match(/^\\s*{[\\S\\s]*}\\s*$/)?eval(\"result=\"+body+src):(eval(body+src),module.exports)}function loadModel(e,t,n){var r;if(e)if(e.match(jtmpl.RE_NODE_ID)){var o=n.querySelector(e);mixin(model,evalObject(o.innerHTML,e)),applyPlugins(),jtmpl(target,t,model)}else r=e.indexOf(\"#\"),jtmpl(\"GET\",r>-1?e.substring(0,r):e,function(n){var r=e.match(jtmpl.RE_ENDS_WITH_NODE_ID),o=r&&(new DOMParser).parseFromString(n,\"text/html\").querySelector(r[1]);mixin(model,evalObject(r?o.innerHTML:n,e)),applyPlugins(),jtmpl(target,t,model)});else jtmpl(target,t,model)}function loadTemplate(){var e;if(src)if(src.match(jtmpl.RE_NODE_ID)){var t=document.querySelector(src);loadModel(t.getAttribute(\"data-model\"),t.innerHTML,document)}else e=src.indexOf(\"#\"),jtmpl(\"GET\",e>-1?src.substring(0,e):src,function(e){var t,n,r=src.match(jtmpl.RE_ENDS_WITH_NODE_ID);r?(t=document.createElement(\"iframe\"),t.style.display=\"none\",document.body.appendChild(t),n=t.contentDocument,n.writeln(e),document.body.removeChild(t)):n=document;var o=r&&n.querySelector(r[1]);loadModel(r?o.getAttribute(\"data-model\"):\"\",r?o.innerHTML:e,n)})}model=model||{},\"function\"!=typeof model&&(model=jtmpl(model)),loadTemplate()}},{}],7:[function(e,t){function n(e){function t(e){return e=e.replace(/\\{\\{\\{([\\S\\s]*?)\\}\\}\\}/g,\"{{&$1}}\"),e=e.replace(/\\{\\{([\\S\\s]*?)\\}\\}/g,function(t,n,r){var o=e.slice(0,r),a=!!o.match(/<[\\w\\-]+[^>]*?$/),i=o.match(/<(script|SCRIPT)/g),l=o.match(/<\\/(script|SCRIPT)/g),c=(i&&i.length||0)>(l&&l.length||0),d=!!o.match(/<!--\\s*$/),u=0===n.indexOf(\"!\");return a||d?u?\"\":t:c?t:'<script type=\"text/jtmpl-tag\">'+n.trim()+\"</script>\"}),e=e.replace(/(<(?:option|OPTION)[^>]*?)(?:selected|SELECTED)=/g,\"$1jtmpl-selected=\"),e=e.replace(/(<(?:input|INPUT)[^>]*?)(?:checked|CHECKED)=/g,\"$1jtmpl-checked=\")}var n,r;return e=t(e),n=document.createElement(\"iframe\"),n.style.display=\"none\",document.body.appendChild(n),n.contentDocument.writeln(\"<!doctype html>\\n<html><body>\"+e+\"</body></html>\"),r=n.contentDocument.body,document.body.removeChild(n),r}t.exports=n},{}],8:[function(e,t){t.exports={init:e(\"./plugins/init\"),on:e(\"./plugins/on\"),routes:e(\"./plugins/routes\")}},{\"./plugins/init\":9,\"./plugins/on\":10,\"./plugins/routes\":11}],9:[function(e,t){t.exports=function(e){if(\"function\"==typeof e){var t=this;setTimeout(function(){e.call(t)})}}},{}],10:[function(e,t){t.exports=function(e,t){function n(n){t.addEventListener(n,function(t){for(var r in e[n])if(t.target.matches(r)){for(var o=t.target;!o.__jtmpl__&&o.parentNode;)o=o.parentNode;e[n][r].call(o.__jtmpl__,t)}})}for(var r in e)n(r)}},{}],11:[function(e,t){t.exports=function(){}},{}],12:[function(){\"undefined\"!=typeof Element&&function(e){e.matches=e.matches||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=this,n=(t.parentNode||t.document).querySelectorAll(e),r=-1;n[++r]&&n[r]!=t;);return!!n[r]}}(Element.prototype)},{}],13:[function(e,t){function n(e,t,r){return e.replace(/\\{\\{#([\\w\\.\\-]+)\\}\\}(.+?)\\{\\{\\/([\\w\\.\\-]*?)\\}\\}/g,function(e,o,a,i){if(\"\"!==i&&i!==o)throw\"jtmpl: Unclosed \"+o;\"function\"==typeof r&&t.on(\"change\",o,r);var l=\".\"===o?t:t(o);return\"function\"==typeof l&&void 0!==l.len?l.len>0?l.values.map(function(e,t){return n(a.replace(/\\{\\{\\.\\}\\}/g,\"{{\"+t+\"}}\"),l,r)}).join(\"\"):\"\":\"function\"==typeof l&&void 0===l.len?n(a,l,r):l?n(a,t,r):\"\"}).replace(/\\{\\{\\^([\\w\\.\\-]+)\\}\\}(.+?)\\{\\{\\/([\\w\\.\\-]*?)\\}\\}/g,function(e,o,a,i){if(\"\"!==i&&i!==o)throw\"jtmpl: Unclosed \"+o;\"function\"==typeof r&&t.on(\"change\",o,r);var l=\".\"===o?t:t(o);return\"function\"==typeof l&&void 0!==l.len?0===l.len?n(a,t,r):\"\":l?\"\":n(a,t,r)}).replace(/\\{\\{([\\w\\.\\-]+)\\}\\}/g,function(e,n){return\"function\"==typeof r&&t.on(\"change\",n,r),void 0===t(n)?\"\":t(n)+\"\"})}t.exports=n},{}],14:[function(e,t){t.exports=function(){var e,t,n,r,o,a=[].slice.call(arguments),i=new XMLHttpRequest,l=a.reduce(function(e,t){return\"function\"==typeof t?t:e},null),c=a[a.length-1];for(\"object\"!=typeof c&&(c={}),e=0,r=Object.getOwnPropertyNames(c),t=r.length;t>e;e++)n=r[e],i[n]=c[n];o=\"string\"==typeof a[2]?a[2]:\"object\"==typeof a[2]?Object.keys(a[2]).map(function(e){return e+\"=\"+encodeURIComponent(a[2][e])}).join(\"&\"):\"\";var d=function(e){var t;if(l){try{t=JSON.parse(this.responseText)}catch(n){t=this.responseText}l.call(this,t,e)}};return i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<300?d.call(this,\"done\"):console.log(\"jtmpl XHR error: \"+this.responseText))},i.open(a[0],a[1],void 0!==c.async?c.async:!0,c.user,c.password),i.send(o),i}},{}]},{},[5])(5)});\n\n\n// WEBPACK FOOTER //\n// ./vendor/jtmpl-1.1.0.min.js"],"sourceRoot":""}