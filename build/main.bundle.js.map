{"version":3,"sources":["webpack:///webpack/bootstrap 968e37062f75547b8cd1","webpack:///./js/buffer-loader.js","webpack:///./js/song-library.js","webpack:///./js/song-info.js","webpack:///./js/song-player.js","webpack:///./js/main.js","webpack:///./js/kali.min.js","webpack:///./js/file-helpers.js","webpack:///./js/playlist-manager.js","webpack:///./js/song-file.js","webpack:///./js/voice-command-listener.js","webpack:///./js/tab-control.js","webpack:///./js/beeper.js","webpack:///./js/note-converter.js"],"names":["BufferLoader","context","fileData","playbackSpeed","progressIntervalCount","progressCallback","undefined","Promise","resolve","reject","decodeAudioData","buffer","stretchedBuffer","_stretch","e","console","error","numChannels","bestQuality","stretchSampleSize","inputBufferSize","getChannelData","length","outputBufferSize","Math","floor","outputAudioBuffer","createBuffer","sampleRate","progressCounter","progressIntervalSize","channel","inputData","kali","Kali","setup","outputData","Float32Array","inputOffset","completedOffset","flushed","framesCompleted","output","subarray","min","dataToInput","input","process","flush","set","SongLibrary","songInfos","retrieveFromStorage","name","get","songs","i","fromObject","persistToStorage","json","JSON","stringify","localStorage","setItem","jsonFromStorage","getItem","Map","parse","log","songsToImport","SongInfo","bpm","beatsPerBar","song","playbackSpeedPercent","SongPlayer","bufferRate","secondsPerBar","barNumber","stop","source","createBufferSource","connect","destination","startTime","getStartTimeInSeconds","start","currentSource","startTimeInSeconds","max","checkCompatibility","init","enableMicButton","document","getElementById","loadDemoSongButton","filesInput","filesDropArea","body","loadingSampleProgressBar","noSongsContainer","someSongsContainer","sampleVoiceCommandSongName","jumpToBarNumberInput","jumpToBarButton","recognisedNumberDisplayElement","importSongLibraryInput","exportSongLibraryButton","tabControl","openTab","window","AudioContext","webkitAudioContext","songLibrary","playlistManager","jtmplModel","playlist","jtmpl","jtmplSongs","on","prop","updateSongInfos","anySongsLoaded","addLoadedSong","songFile","info","getSongInfoByName","fileName","songModel","escapedName","replace","addSong","push","trigger","classList","add","remove","innerText","loadFileByUrl","url","loadByUrl","then","file","split","contents","onclick","loadFiles","files","f","readArrayBufferFromFile","onchange","evt","target","ondragover","dataTransfer","dropEffect","ondragleave","ondrop","barkeep_play","playSongByName","songName","alert","jumpToBar","Number","parseInt","value","voiceCommandListener","onBarCommand","innerHTML","setTimeout","onPlayCommand","onStopCommand","startListening","readTextFromFile","import","export","downloadFile","beep","t","r","exports","n","id","loaded","call","m","c","p","s","is_initialized","sample_rate","channels","quick_search","factor","search","segment","overlap","process_size","samples_in","samples_out","segments_total","skip_total","o","input_fifo","output_fifo","prototype","difference","pow","tempo_best_overlap_position","overlap_buf","a","u","tempo_overlap","occupancy","read_ptr","write_ptr","write","read","segments_ms","segments_pow","searches_div","overlaps_div","h","l","ceil","reserve","setTempo","begin","end","typedArrayConstructor","clear","FileHelpers","request","XMLHttpRequest","open","responseType","onload","urlParts","fileNamePart","response","onerror","status","statusText","send","reader","FileReader","result","readAsArrayBuffer","readAsText","link","createElement","download","href","URL","createObjectURL","Blob","click","PlaylistManager","beeper","fileDataMap","bufferMap","trim","has","toLowerCase","keys","key","indexOf","_getSongNameFromInput","songInfo","bufferKey","_playBuffer","noteNumber","note","loadBuffer","currentSongPlayer","doubleBeep","play","songPlayer","SongFile","VoiceCommandListener","recognition","SpeechRecognition","webkitSpeechRecognition","lang","interimResults","maxAlternatives","onaudioend","onresult","results","ev","command","transcript","substring","testBarNumber","isNaN","isFinite","isLocalhost","location","host","startsWith","isChrome","test","navigator","userAgent","vendor","protocol","TabControl","tabLinks","Array","from","getElementsByClassName","tabPanes","forEach","tabLink","_getTargetTabId","targetTabId","toggleActive","tabId","el","tabContents","getAttribute","Beeper","options","defaults","startSecondsFromNow","durationSeconds","Object","assign","gainNode","createGain","gain","oscillator","createOscillator","frequency","getFrequencyFromNote","startWhen","currentTime","NoteConverter","round"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 968e37062f75547b8cd1","import './kali.min.js'\r\n\r\nexport default class BufferLoader {\r\n\r\n    static loadBuffer(context, fileData, playbackSpeed = 1.0, progressIntervalCount = 12, progressCallback = undefined) {\r\n        return new Promise((resolve, reject) => {\r\n            context.decodeAudioData(fileData, (buffer) => {\r\n                let stretchedBuffer = BufferLoader._stretch(context, buffer, playbackSpeed, 2, false, progressIntervalCount, progressCallback);\r\n                resolve(stretchedBuffer);\r\n            }, (e) => {\r\n                console.error(e);\r\n                reject();\r\n            });\r\n        });\r\n    }\r\n\r\n    static _stretch(context, buffer, playbackSpeed, numChannels, bestQuality, progressIntervalCount, progressCallback) {\r\n\r\n        if (playbackSpeed === 1.0) {\r\n            return buffer;\r\n        }\r\n\r\n        const stretchSampleSize = 4096 * numChannels;\r\n        const inputBufferSize = buffer.getChannelData(0).length;\r\n        const outputBufferSize = Math.floor(inputBufferSize / playbackSpeed) + 1;\r\n\r\n        const outputAudioBuffer = context.createBuffer(numChannels, outputBufferSize, context.sampleRate);\r\n\r\n        let progressCounter = 0;\r\n        const progressIntervalSize = Math.floor(outputBufferSize * numChannels / progressIntervalCount);\r\n\r\n        for (let channel = 0; channel < numChannels; channel++) {\r\n            const inputData = buffer.getChannelData(channel);\r\n\r\n            const kali = new Kali(1);\r\n            kali.setup(context.sampleRate, playbackSpeed, !bestQuality);\r\n\r\n            const outputData = new Float32Array(outputBufferSize);\r\n\r\n            let inputOffset = 0;\r\n            let completedOffset = 0;\r\n            let flushed = false;\r\n\r\n            while (completedOffset < outputData.length) {\r\n                while (progressCallback && progressCounter >= progressIntervalSize) {\r\n                    progressCallback((completedOffset + outputBufferSize * channel) / (outputBufferSize * numChannels));\r\n                    progressCounter -= progressIntervalSize;\r\n                }\r\n\r\n                // Read stretched samples into outputData array\r\n                const framesCompleted = kali.output(outputData.subarray(completedOffset, Math.min(completedOffset + stretchSampleSize, outputData.length)));\r\n                completedOffset += framesCompleted;\r\n                progressCounter += framesCompleted;\r\n\r\n                if (inputOffset < inputData.length) {\r\n                    // If we have more data to write, write it\r\n                    const dataToInput = inputData.subarray(inputOffset, Math.min(inputOffset + stretchSampleSize, inputData.length));\r\n                    inputOffset += dataToInput.length;\r\n\r\n                    kali.input(dataToInput);\r\n                    kali.process();\r\n                } else if (!flushed) {\r\n                    kali.flush();\r\n                    flushed = true;\r\n                }\r\n            }\r\n\r\n            outputAudioBuffer.getChannelData(channel).set(outputData);\r\n        }\r\n\r\n        return outputAudioBuffer;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/buffer-loader.js","import SongInfo from './song-info'\r\n\r\nexport default class SongLibrary {\r\n\r\n    constructor() {\r\n        this.songInfos = this.retrieveFromStorage();\r\n    }\r\n\r\n    getSongInfoByName(name) {\r\n        return this.songInfos.get(name);\r\n    }\r\n\r\n    updateSongInfos(songs) {\r\n        for (let i = 0; i < songs.length; i++) {\r\n            // add or update\r\n            this.songInfos.set(songs[i].name, SongInfo.fromObject(songs[i]));\r\n        }\r\n        this.persistToStorage();\r\n    }\r\n\r\n    persistToStorage() {\r\n        // can't serialize Map, so use spread operator to convert to Array\r\n        const json = JSON.stringify([... this.songInfos]);\r\n        localStorage.setItem('song-library', json);\r\n    }\r\n\r\n    retrieveFromStorage() {\r\n        let jsonFromStorage = localStorage.getItem('song-library');\r\n        return new Map(JSON.parse(jsonFromStorage));\r\n    }\r\n\r\n    import(json) {\r\n        console.log(json);\r\n        const songsToImport = new Map(JSON.parse(json));\r\n        console.log(songsToImport);\r\n        this.songInfos = new Map([... this.songInfos, ...songsToImport]);\r\n        this.persistToStorage();\r\n    }\r\n\r\n    export() {\r\n        return localStorage.getItem('song-library');\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/song-library.js","export default class SongInfo {\r\n    constructor(bpm, beatsPerBar, playbackSpeed) {\r\n        this.bpm = bpm;\r\n        this.beatsPerBar = beatsPerBar || 4;\r\n        this.playbackSpeed = playbackSpeed || 1.0;\r\n    }\r\n\r\n    static fromObject(song) {\r\n        return new SongInfo(song.bpm, song.beatsPerBar, song.playbackSpeedPercent / 100);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/song-info.js","export default class SongPlayer {\r\n\r\n    constructor(context, buffer, bufferRate, bpm, beatsPerBar) {\r\n        this.context = context;\r\n        this.buffer = buffer;\r\n        this.bpm = bpm;\r\n        this.beatsPerBar = beatsPerBar;\r\n        this.secondsPerBar = this.beatsPerBar * 60 / (bufferRate * bpm);\r\n    }\r\n\r\n    play(barNumber) {\r\n        this.stop();\r\n        let source = this.context.createBufferSource();\r\n        source.buffer = this.buffer;\r\n        source.connect(this.context.destination);\r\n        let startTime = this.getStartTimeInSeconds(barNumber || 0);\r\n        source.start(0, startTime);\r\n        this.currentSource = source;\r\n    }\r\n\r\n    stop() {\r\n        if (this.currentSource) {\r\n            this.currentSource.stop();\r\n        }\r\n    }\r\n\r\n    getStartTimeInSeconds(barNumber) {\r\n        let startTimeInSeconds = ((barNumber - 1) * this.secondsPerBar);\r\n        return Math.max(0, startTimeInSeconds);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/song-player.js","import BufferLoader from './buffer-loader'\r\nimport FileHelpers from './file-helpers'\r\nimport PlaylistManager from './playlist-manager'\r\nimport SongFile from './song-file'\r\nimport SongInfo from './song-info'\r\nimport SongLibrary from './song-library'\r\nimport SongPlayer from './song-player'\r\nimport TabControl from './tab-control'\r\nimport VoiceCommandListener from './voice-command-listener'\r\n\r\nif (VoiceCommandListener.checkCompatibility()) {\r\n    init();\r\n}\r\n\r\nfunction init() {\r\n    let enableMicButton = document.getElementById('enableMicButton');\r\n    let loadDemoSongButton = document.getElementById('loadDemoSongButton');\r\n    let filesInput = document.getElementById('files');\r\n    let filesDropArea = document.body;\r\n    let loadingSampleProgressBar = document.getElementById('loadingSampleProgressBar');\r\n\r\n    let noSongsContainer = document.getElementById('noSongsContainer');\r\n    let someSongsContainer = document.getElementById('someSongsContainer');\r\n    let sampleVoiceCommandSongName = document.getElementById('sampleVoiceCommandSongName');\r\n    let jumpToBarNumberInput = document.getElementById('jumpToBarNumber');\r\n    let jumpToBarButton = document.getElementById('jumpToBarButton');\r\n    let recognisedNumberDisplayElement = document.getElementById('recognisedNumberDisplay');\r\n\r\n    let importSongLibraryInput = document.getElementById('importSongLibraryInput');\r\n    let exportSongLibraryButton = document.getElementById('exportSongLibraryButton');\r\n\r\n    let tabControl = new TabControl(document);\r\n    tabControl.openTab('loadSongs');\r\n\r\n    let context = new (window.AudioContext || window.webkitAudioContext)();\r\n    \r\n    let songLibrary = new SongLibrary();\r\n    let playlistManager = new PlaylistManager(context, songLibrary);\r\n    let jtmplModel = { playlist: [] };\r\n    jtmpl('#songsContainer', '#songTemplate', jtmplModel);\r\n\r\n    let jtmplSongs = jtmpl('#songsContainer');\r\n    jtmplSongs.on('update', (prop) => {\r\n        if (prop === 'playlist') {\r\n            songLibrary.updateSongInfos(jtmplModel.playlist);\r\n        }\r\n    });\r\n\r\n    let anySongsLoaded = false;\r\n    let addLoadedSong = (songFile) => {\r\n        let info = songLibrary.getSongInfoByName(songFile.fileName) || new SongInfo();\r\n        let songModel = {\r\n            name: songFile.fileName,\r\n            bpm: info.bpm,\r\n            beatsPerBar: info.beatsPerBar,\r\n            playbackSpeedPercent: info.playbackSpeed * 100,\r\n            escapedName: function () { return this('name').replace('\\'', '\\\\\\''); }\r\n        };\r\n\r\n        playlistManager.addSong(songFile.fileName, songFile.fileData);\r\n        jtmplModel.playlist.push(songModel);\r\n        jtmpl('#songsContainer').trigger('change', 'playlist');\r\n\r\n        if (!anySongsLoaded) {\r\n            noSongsContainer.classList.add('hidden');\r\n            someSongsContainer.classList.remove('hidden');\r\n            sampleVoiceCommandSongName.innerText = songModel.name;\r\n            tabControl.openTab('playlist');\r\n            anySongsLoaded = true;\r\n        }\r\n    }\r\n\r\n    let loadFileByUrl = (url) => {\r\n        FileHelpers.loadByUrl(url)\r\n            .then(file => {\r\n                const songFile = new SongFile(file.name.split('.')[0], file.contents);\r\n                addLoadedSong(songFile);\r\n            });\r\n    }\r\n    loadDemoSongButton.onclick = () => {\r\n        if (!songLibrary.getSongInfoByName('not just jazz')) {\r\n            songLibrary.updateSongInfos([{ name: 'not just jazz', bpm: 102 }]);\r\n        }    \r\n        loadFileByUrl('audio/not just jazz.mp3');\r\n    }\r\n\r\n    let loadFiles = (files) => {\r\n        for (let i = 0, f; f = files[i]; i++) {\r\n            FileHelpers.readArrayBufferFromFile(f)\r\n                .then(file => {\r\n                    const songFile = new SongFile(file.name.split('.')[0], file.contents);\r\n                    addLoadedSong(songFile);\r\n                });\r\n        }\r\n    }\r\n    filesInput.onchange = (evt) => {\r\n        loadFiles(evt.target.files);\r\n    }\r\n\r\n    filesDropArea.ondragover = (evt) => {\r\n        evt.dataTransfer.dropEffect = 'copy';\r\n        filesDropArea.classList.add('droppable');\r\n        return false;\r\n    }\r\n    filesDropArea.ondragleave = () => {\r\n        filesDropArea.classList.remove('droppable');\r\n    }\r\n    filesDropArea.ondrop = (evt) => {\r\n        filesDropArea.classList.remove('droppable');\r\n        loadFiles(evt.dataTransfer.files);\r\n        return false;\r\n    }\r\n\r\n    // wire up manual controls\r\n    window.barkeep_play = songName => {\r\n        try {\r\n            playlistManager.playSongByName(songName);\r\n        }\r\n        catch (e) {\r\n            alert(e);\r\n        }\r\n    }\r\n    jumpToBarButton.onclick = (e) => {\r\n        playlistManager.jumpToBar(Number.parseInt(jumpToBarNumberInput.value));\r\n    };\r\n\r\n    enableMicButton.onclick = () => {\r\n        let voiceCommandListener = new VoiceCommandListener();\r\n        voiceCommandListener.onBarCommand = (barNumber) => {\r\n            recognisedNumberDisplayElement.innerHTML = barNumber;\r\n            recognisedNumberDisplayElement.classList.add('highlight');\r\n            setTimeout(() => { recognisedNumberDisplayElement.classList.remove('highlight'); }, 1000);\r\n            playlistManager.jumpToBar(barNumber);\r\n        }\r\n        voiceCommandListener.onPlayCommand = (songName) => {\r\n            try {\r\n                playlistManager.playSongByName(songName);\r\n            }\r\n            catch (e) {\r\n                alert(e);\r\n            }\r\n        }\r\n        voiceCommandListener.onStopCommand = () => {\r\n            playlistManager.stop();\r\n        }\r\n\r\n        voiceCommandListener.startListening();\r\n    }\r\n\r\n    importSongLibraryInput.onchange = (evt) => {\r\n        FileHelpers.readTextFromFile(evt.target.files[0])\r\n            .then(file => {\r\n                songLibrary.import(file.contents);\r\n                alert('imported!');\r\n            });\r\n    }\r\n    exportSongLibraryButton.onclick = () => {\r\n        let json = songLibrary.export();\r\n        FileHelpers.downloadFile('barkeep.json', json);\r\n    }\r\n    window.beep = () => { playlistManager.beep(); }\r\n    \r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/main.js","!function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p=\"\",t(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){function i(e){return Math.floor(e)}var n=r(2),s=function(){function e(){this.is_initialized=!1,this.sample_rate=44100,this.channels=0,this.quick_search=!1,this.factor=0,this.search=0,this.segment=0,this.overlap=0,this.process_size=0,this.samples_in=0,this.samples_out=0,this.segments_total=0,this.skip_total=0}return e}(),o=function(){function e(e){var t=new s;t.channels=e,t.input_fifo=new n(Float32Array),t.output_fifo=new n(Float32Array),this.t=t}return e.prototype.difference=function(e,t,r){for(var i=0,n=0,n=0;r>n;n++)i+=Math.pow(e[n]-t[n],2);return i},e.prototype.tempo_best_overlap_position=function(e,t){var r,i,n,s=e.overlap_buf,o=e.search+1>>>1,a=64,p=i=e.quick_search?o:0,u=this.difference(t.subarray(e.channels*p),s,e.channels*e.overlap),f=0;if(e.quick_search){do{for(f=-1;1>=f;f+=2)for(r=1;(4>r||64==a)&&(p=o+f*r*a,!(0>p||p>=e.search));r++)n=this.difference(t.subarray(e.channels*p),s,e.channels*e.overlap),u>n&&(u=n,i=p);o=i}while(a>>>=2)}else for(p=1;p<e.search;p++)n=this.difference(t.subarray(e.channels*p),s,e.channels*e.overlap),u>n&&(u=n,i=p);return i},e.prototype.tempo_overlap=function(e,t,r,i){var n=0,s=0,o=0,a=1/e.overlap;for(n=0;n<e.overlap;n++){var p=a*n,u=1-p;for(s=0;s<e.channels;s++,o++)i[o]=t[o]*u+r[o]*p}},e.prototype.process=function(){for(var e=this.t;e.input_fifo.occupancy()>=e.process_size;){var t,r;e.segments_total?(r=this.tempo_best_overlap_position(e,e.input_fifo.read_ptr(0)),this.tempo_overlap(e,e.overlap_buf,e.input_fifo.read_ptr(e.channels*r),e.output_fifo.write_ptr(e.overlap))):(r=e.search/2,e.output_fifo.write(e.input_fifo.read_ptr(e.channels*r,e.overlap),e.overlap)),e.output_fifo.write(e.input_fifo.read_ptr(e.channels*(r+e.overlap)),e.segment-2*e.overlap);var n=e.channels*e.overlap;e.overlap_buf.set(e.input_fifo.read_ptr(e.channels*(r+e.segment-e.overlap)).subarray(0,n)),e.segments_total++,t=i(e.factor*(e.segment-e.overlap)+.5),e.input_fifo.read(null,t)}},e.prototype.input=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=0),null==t&&(t=e.length);var i=this.t;i.samples_in+=t,i.input_fifo.write(e,t)},e.prototype.output=function(e){var t=this.t,r=Math.min(e.length,t.output_fifo.occupancy());return t.samples_out+=r,t.output_fifo.read(e,r),r},e.prototype.flush=function(){var e=this.t,t=i(e.samples_in/e.factor+.5),r=t>e.samples_out?t-e.samples_out:0,n=new Float32Array(128*e.channels);if(r>0){for(;e.output_fifo.occupancy()<r;)this.input(n,128),this.process();e.samples_in=0}},e.prototype.setup=function(t,r,n,s,o,a){void 0===n&&(n=!1),void 0===s&&(s=null),void 0===o&&(o=null),void 0===a&&(a=null);var p=1,u=this.t;u.sample_rate=t,null==s&&(s=Math.max(10,e.segments_ms[p]/Math.max(Math.pow(r,e.segments_pow[p]),1))),null==o&&(o=s/e.searches_div[p]),null==a&&(a=s/e.overlaps_div[p]);var f;if(u.quick_search=n,u.factor=r,u.segment=i(t*s/1e3+.5),u.search=i(t*o/1e3+.5),u.overlap=Math.max(i(t*a/1e3+4.5),16),2*u.overlap>u.segment&&(u.overlap-=8),u.is_initialized){var h=new Float32Array(u.overlap*u.channels),l=0;u.overlap*u.channels<u.overlap_buf.length&&(l=u.overlap_buf.length-u.overlap*u.channels),h.set(u.overlap_buf.subarray(l,u.overlap_buf.length)),u.overlap_buf=h}else u.overlap_buf=new Float32Array(u.overlap*u.channels);f=i(Math.ceil(r*(u.segment-u.overlap))),u.process_size=Math.max(f+u.overlap,u.segment)+u.search,u.is_initialized||u.input_fifo.reserve(i(u.search/2)),u.is_initialized=!0},e.prototype.setTempo=function(e){var t=this.t;this.setup(t.sample_rate,e,t.quick_search)},e.segments_ms=[82,82,35,20],e.segments_pow=[0,1,.33,1],e.overlaps_div=[6.833,7,2.5,2],e.searches_div=[5.587,6,2.14,2],e}();window&&(window.Kali=o),e.exports=o},function(e,t){var r=function(){function e(e){this.begin=0,this.end=0,this.typedArrayConstructor=e,this.buffer=new e(16384)}return e.prototype.clear=function(){this.begin=this.end=0},e.prototype.reserve=function(e){for(this.begin==this.end&&this.clear();;){if(this.end+e<this.buffer.length){var t=this.end;return this.end+=e,t}if(this.begin>16384)this.buffer.set(this.buffer.subarray(this.begin,this.end)),this.end-=this.begin,this.begin=0;else{var r=new this.typedArrayConstructor(this.buffer.length+e);r.set(this.buffer),this.buffer=r}}},e.prototype.write=function(e,t){var r=this.reserve(t);this.buffer.set(e.subarray(0,t),r)},e.prototype.write_ptr=function(e){var t=this.reserve(e);return this.buffer.subarray(t,t+e)},e.prototype.read=function(e,t){t+this.begin>this.end&&console.error(\"Read out of bounds\",t,this.end,this.begin),null!=e&&e.set(this.buffer.subarray(this.begin,this.begin+t)),this.begin+=t},e.prototype.read_ptr=function(e,t){return void 0===t&&(t=-1),t>this.occupancy()&&console.error(\"Read Pointer out of bounds\",t),0>t&&(t=this.occupancy()),this.buffer.subarray(this.begin+e,this.begin+t)},e.prototype.occupancy=function(){return this.end-this.begin},e}();e.exports=r}]);\n\n\n// WEBPACK FOOTER //\n// ./js/kali.min.js","export default class FileHelpers {\r\n\r\n    static loadByUrl(url) {\r\n        return new Promise(function (resolve, reject) {\r\n            var request = new XMLHttpRequest();\r\n            request.open('GET', url);\r\n            request.responseType = 'arraybuffer';\r\n            request.onload = () => {\r\n                let urlParts = url.split('/');\r\n                let fileNamePart = urlParts[urlParts.length - 1];\r\n                resolve({ name: fileNamePart, contents: request.response });\r\n            };\r\n            request.onerror = () => {\r\n                reject({\r\n                    status: this.status,\r\n                    statusText: request.statusText\r\n                });\r\n            };\r\n            request.send();\r\n        });\r\n    }\r\n\r\n    static readArrayBufferFromFile(file) {\r\n        return new Promise(function (resolve, reject) {\r\n            var reader = new FileReader();\r\n            reader.onload = (evt) => {\r\n                resolve({ name: file.name, contents: evt.target.result });\r\n            };\r\n            reader.onerror = () => reject();\r\n            reader.readAsArrayBuffer(file);\r\n        });\r\n    }\r\n\r\n    static readTextFromFile(file) {\r\n        return new Promise(function (resolve, reject) {\r\n            var reader = new FileReader();\r\n            reader.onload = (evt) => {\r\n                resolve({ name: file.name, contents: evt.target.result });\r\n            };\r\n            reader.onerror = () => reject();\r\n            reader.readAsText(file);\r\n        });\r\n    }\r\n\r\n    static downloadFile(name, contents) {\r\n        var link = document.createElement('a');\r\n        link.download = name;\r\n        link.href = URL.createObjectURL(new Blob([contents]));\r\n        link.click();\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/file-helpers.js","import Beeper from './beeper'\r\nimport BufferLoader from './buffer-loader'\r\nimport SongLibrary from './song-library'\r\nimport SongPlayer from './song-player'\r\n\r\nexport default class PlaylistManager {\r\n\r\n    constructor(context, songLibrary) {\r\n        this.context = context;\r\n        this.beeper = new Beeper(context);\r\n        this.songLibrary = songLibrary;\r\n        this.fileDataMap = new Map();\r\n        this.bufferMap = new Map();\r\n    }\r\n\r\n    addSong(name, fileData) {\r\n        this.fileDataMap.set(name, fileData);\r\n    }\r\n\r\n    _getSongNameFromInput(input) {\r\n        if (input.trim().length === 0) {\r\n            return null;\r\n        }\r\n        if (this.fileDataMap.has(input)) {\r\n            return input;\r\n        }\r\n        // best guess at name?\r\n        input = input.toLowerCase();\r\n        for (let key of this.fileDataMap.keys()) {\r\n            if (key.toLowerCase().indexOf(input) >= 0) {\r\n                return key;\r\n            }\r\n        }\r\n        // no match :(\r\n        return null;\r\n    }\r\n\r\n    playSongByName(input) {\r\n        let songName = this._getSongNameFromInput(input);\r\n        if (!songName) {\r\n            console.log('Unrecognised song:', input);\r\n            return;\r\n        }\r\n\r\n        let songInfo = this.songLibrary.getSongInfoByName(songName);\r\n        if (!songInfo.bpm) {\r\n            throw 'Please set BPM for ' + songName;\r\n        }\r\n\r\n        let bufferKey = songName + '@' + songInfo.playbackSpeed;\r\n        if (this.bufferMap.has(bufferKey)) {\r\n            let buffer = this.bufferMap.get(bufferKey);\r\n            this._playBuffer(buffer, songInfo);\r\n        }\r\n        else {\r\n            let fileData = this.fileDataMap.get(songName);\r\n            let noteNumber = 96;\r\n            this.beeper.beep({ note: noteNumber });\r\n            BufferLoader.loadBuffer(this.context, fileData, songInfo.playbackSpeed, 12, p => {\r\n                console.log('Stretching...', p);\r\n                this.beeper.beep({ note: ++noteNumber });\r\n            })\r\n                .then(buffer => {\r\n                    this.bufferMap.set(bufferKey, buffer);\r\n                    this._playBuffer(buffer, songInfo);\r\n                });\r\n        }\r\n    }\r\n\r\n    stop() {\r\n        if (this.currentSongPlayer) {\r\n            this.currentSongPlayer.stop();\r\n        }\r\n    }\r\n\r\n    jumpToBar(barNumber) {\r\n        if (this.currentSongPlayer) {\r\n            this.beeper.doubleBeep();\r\n            this.currentSongPlayer.play(barNumber);\r\n        }\r\n    }\r\n\r\n    _playBuffer(buffer, songInfo) {\r\n        if (this.currentSongPlayer) {\r\n            this.currentSongPlayer.stop();\r\n        }\r\n        this.beeper.beep();\r\n        let songPlayer = new SongPlayer(this.context, buffer, songInfo.playbackSpeed, songInfo.bpm, songInfo.beatsPerBar);\r\n        songPlayer.play();\r\n        this.currentSongPlayer = songPlayer;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/playlist-manager.js","export default class SongFile {\r\n    constructor(fileName, fileData) {\r\n        this.fileName = fileName;\r\n        this.fileData = fileData;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/song-file.js","export default class VoiceCommandListener {\r\n\r\n    static checkCompatibility() {\r\n        if (!(window.SpeechRecognition || window.webkitSpeechRecognition)) {\r\n            alert('SpeechRecognition is not supported. Please use a compatible browser, eg Chrome.');\r\n            return false;\r\n        }\r\n        var isLocalhost = location.host.startsWith('localhost');\r\n        if (isLocalhost) {\r\n            return true;\r\n        }\r\n        var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\r\n        if (isChrome && location.protocol !== 'https:') {\r\n            alert('Chrome requires https for SpeechRecognition. Redirecting now!');\r\n            location.protocol = 'https:';\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    startListening() {\r\n        var recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();\r\n        // recognition.continuous = true;\r\n        // TODO: other languages?\r\n        recognition.lang = 'en-US';\r\n        recognition.interimResults = false;\r\n        recognition.maxAlternatives = 5;\r\n        recognition.start();\r\n\r\n        recognition.onaudioend = ev => {\r\n            // start listening again after audio ends\r\n            this.startListening();\r\n        };\r\n\r\n        recognition.onresult = ev => {\r\n            var results = ev.results[0];\r\n            for (var i = 0; i < results.length; i++) {\r\n                let command = results[i].transcript.split(' ')[0];\r\n\r\n                switch (command) {\r\n                    case 'play': {\r\n                        if (this.onPlayCommand) {\r\n                            this.onPlayCommand(results[i].transcript.substring('play '.length));\r\n                            // allow multiple commands in case the first song name doesn't match\r\n                            break;\r\n                        }\r\n                    }\r\n                    case 'stop': {\r\n                        if (this.onStopCommand) {\r\n                            this.onStopCommand();\r\n                            return;\r\n                        }\r\n                    }\r\n                    case 'bar': {\r\n                        if (this.onBarCommand) {\r\n                            var testBarNumber = Number.parseInt(results[i].transcript.substring('bar '.length));\r\n                            if (!Number.isNaN(testBarNumber) && Number.isFinite(testBarNumber)) {\r\n                                this.onBarCommand(testBarNumber);\r\n                                // stop on first successful bar command\r\n                                return;\r\n                            }\r\n                        }\r\n                    }\r\n                    default: {\r\n                        console.log('Unrecognised command:', results[i].transcript);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    };\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/voice-command-listener.js","export default class TabControl {\r\n\r\n    constructor(document) {\r\n        this.tabLinks = Array.from(document.getElementsByClassName('tab-link'));\r\n        this.tabPanes = Array.from(document.getElementsByClassName('tab-pane'));\r\n\r\n        this.tabLinks.forEach(\r\n            tabLink => {\r\n                tabLink.onclick = () => { this.openTab(TabControl._getTargetTabId(tabLink)); }\r\n            });\r\n    }\r\n\r\n    static _getTargetTabId(tabLink) {\r\n        return tabLink.getAttribute('href').substring(1);\r\n    }\r\n\r\n    openTab(targetTabId) {\r\n        let toggleActive = (tabId, el) => {\r\n            if (tabId === targetTabId) {\r\n                el.classList.add('active');\r\n            } else {\r\n                el.classList.remove('active');\r\n            }\r\n        }\r\n        this.tabLinks.forEach(\r\n            tabLink => {\r\n                toggleActive(TabControl._getTargetTabId(tabLink), tabLink);\r\n            });\r\n        this.tabPanes.forEach(\r\n            tabContents => {\r\n                toggleActive(tabContents.id, tabContents);\r\n            });\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/tab-control.js","import NoteConverter from './note-converter'\r\n\r\nexport default class Beeper {\r\n\r\n    constructor(context) {\r\n        this.context = context;\r\n    }\r\n\r\n    beep(options = {}) {\r\n        const defaults = {\r\n            startSecondsFromNow: 0,\r\n            durationSeconds: .1,\r\n            note: 108\r\n        };\r\n        options = Object.assign({}, defaults, options);\r\n\r\n        const gainNode = this.context.createGain();\r\n        gainNode.gain.value = .1;\r\n        gainNode.connect(this.context.destination);\r\n\r\n        const oscillator = this.context.createOscillator();\r\n        oscillator.frequency.value = NoteConverter.getFrequencyFromNote(options.note);\r\n        oscillator.connect(gainNode);\r\n\r\n        let startWhen = options.startSecondsFromNow + this.context.currentTime;\r\n        oscillator.start(startWhen);\r\n        oscillator.stop(startWhen + options.durationSeconds);\r\n    }\r\n\r\n    doubleBeep() {\r\n        this.beep({ startSecondsFromNow: 0, durationSeconds: .05 });\r\n        this.beep({ startSecondsFromNow: .1, durationSeconds: .05 });\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/beeper.js","export default class NoteConverter {\r\n    static getFrequencyFromNote(note) {\r\n        return 440 * Math.pow(2, (note - 69) / 12);\r\n    }\r\n    static getNoteFromFrequency(frequency) {\r\n        return Math.round(12 * (Math.log(frequency / 440) / Math.log(2))) + 69;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./js/note-converter.js"],"sourceRoot":""}